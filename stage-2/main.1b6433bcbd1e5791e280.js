!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(i,o,function(t){return e[t]}.bind(null,o));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=8)}([function(e,t,n){"use strict";function i(e,t,n){return e.reduce(function(e,i,o){return e.push(n(i,t[o],o)),e},[])}function o(e){return e*Math.PI/180}function r(e,t){return t*e*360/100}function a(e,t){return o(150+r(e,t))}Object.defineProperty(t,"__esModule",{value:!0}),t.month=["January","February","March","April","May","June","July","August","September","October","November","December"],t.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],t.day=864e5,t.devicePixelRatio=window.devicePixelRatio,t.drawConvas=function(e,n,i,o){var r=document.createElement("canvas");return o&&r.classList.add(o),r.setAttribute("width",(n*t.devicePixelRatio).toString()),r.setAttribute("height",(i*t.devicePixelRatio).toString()),r.style.height=i+"px",r.style.width=n+"px",e.appendChild(r),r},t.toDiv=function(e,t){var n=document.createElement("div");return t&&n.classList.add(t),e.appendChild(n),n},t.map2=i,t.mapMaxMin=function(e,t){return e.map(function(e){var n=e[0],i=e[1];return[t(n),t(i)]})},t.map2MaxMin=function(e,t,n){return i(e,t,function(e,t){var i=e[0],o=e[1],r=t[0],a=t[1];return[n(i,r),n(o,a)]})},t.toggleClass=function(e,t,n){t?e.classList.add(n):e.classList.remove(n)},t.toRadian=o,t.scaleAngle=r,t.toAngle=a,t.toPieAngle=function(e){return a(1,e)},t.speedTest=function(e,t){var n,i=[];return{start:function(){n=performance.now()},end:function(){var o=performance.now();if(i.push(o-n),i.length>=t){var r=i.reduce(function(e,t){return e+t},0);console.log(e,r/i.length),i=[]}}}},t.toScales=function(e){return e.reduce(function(e,t,n){return 0!==n&&e.push(t?1:0),e},[])},t.roundPercentageTotals=function(e){var t=(e=e.map(function(e){return Math.round(e)})).reduce(function(e,t){return e+t},0);if(100!==t){var n=e.indexOf(Math.max.apply(Math,e));e[n]=e[n]-(t-100)}return e},t.copyRange=function(e){return{start:e.start,end:e.end}},t.findIndex=function(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n;return-1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.recountAndUseSimplePintsChart=function(e,t,n,i,o,r,a,c,s){for(var u=e.columns[0],l=r.height/(c-a),f=r.width/(o.end-o.start),h=0,d=i.start;d<=i.end;d++){var m=(u[d]-o.start)*f*devicePixelRatio;s(m,(r.height-(e.columns[t][d]-a)*l)*devicePixelRatio,0===h?m:h,r.height*devicePixelRatio),h=m}},t.recountDoubleMax=function(e,t,n){for(var i=[],o=1;o<e.columns.length;o++){for(var r=10,a=e.columns[o][n.start],c=n.start;c<=n.end;c++)r=Math.max(r,e.columns[o][c]),a=Math.min(a,e.columns[o][c]);i.push([10*Math.ceil(r/10),10*Math.floor(a/10)])}var s=i[0],u=s[0],l=s[1],f=i[1],h=f[0],d=f[1];return t[1]&&t[2]&&(u>h?h*=1.2:u*=1.2),[[u,l],[h,d]]},t.recountSimpleMax=function(e,t,n){for(var i=10,o=1;o<e.columns.length;o++)if(t[o])for(var r=n.start;r<=n.end;r++)i=Math.max(i,e.columns[o][r]);return[[10*Math.ceil(i/10),0]]},t.recountSimpleMaxAndMin=function(e,t,n){for(var i=10,o=function(e,t,n){for(var i=1;i<e.columns.length;i++)if(t[i])return e.columns[i][n];return 0}(e,t,n.start),r=1;r<e.columns.length;r++)if(t[r])for(var a=n.start;a<=n.end;a++)i=Math.max(i,e.columns[r][a]),o=Math.min(o,e.columns[r][a]);return[[10*Math.ceil(i/10),10*Math.floor(o/10)]]},t.recountAndUseChartBySumm=function(e,t,n,i,o,r,a,c,s,u){for(var l=e.columns[0],f=r.height/(c-a),h=r.width/(o.end-o.start),d=0,m=i.start;m<=i.end;m++){for(var v=(l[m]-o.start)*h*devicePixelRatio,g=0,p=1;p<t;p++)g+=(e.columns[p][m]-a)*f*u[p-1];var y=g+(e.columns[t][m]-a)*f*u[t-1];s(v,(r.height-y)*devicePixelRatio,0===d?v:d,(r.height-g)*devicePixelRatio),d=v}},t.recountMaxBySumm=function(e,t,n){for(var i=10,o=n.start;o<=n.end;o++){for(var r=0,a=1;a<e.columns.length;a++)t[a]&&(r+=e.columns[a][o]);i=Math.max(i,r)}return[[10*Math.ceil(i/10),0]]},t.recountAndUsePercentChartOver=function(e){return function(t,n,i,o,r,a,c,s,u,l){for(var f=t.columns[0],h=a.width/(r.end-r.start),d=0,m=o.start;m<=o.end;m++){for(var v=(f[m]-r.start)*h*devicePixelRatio,g=0,p=0,y=0,x=1;x<t.columns.length;x++){var R=t.columns[x][m]*l[x-1];x<n&&(g+=R),x<=n&&(y+=R),p+=R}u(v,y/p*a.height*devicePixelRatio,e?v:d,g/p*a.height*devicePixelRatio),d=v}}},t.recountPercent=function(e,t,n){for(var i=[],o=1;o<e.columns.length;o++)i.push(e.columns[o][t]*n[o-1]);var r=i.reduce(function(e,t){return e+t},0);return i.map(function(e){return e/r*100})}},function(e,t,n){"use strict";t.a=function(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toScalableFactory=function(e,t,n){for(var i=[],o=[],r=1;r<e.columns.length;r++){var a=e.columns[r][0];i.push(t(e.colors[a])),o.push("none")}return{draw:function(e,t,o,r,a,c){i.forEach(function(i,o){i.drw(e,t,o+1,r(o+1)[1],r(o+1)[0],a,n,c)})},setVisible:function(e){for(var t=1;t<e.length;t++)o[t-1]=e[t]?"in":"out"},scale:function(e,t,r,a,c,s){o.forEach(function(e,t){"in"===e&&(n[t]=Math.min(1,n[t]+.1),1===n[t]&&(o[t]="none")),"out"===e&&(n[t]=Math.max(0,n[t]-.1),0===n[t]&&(o[t]="none"))}),i.forEach(function(i,o){0!==n[o]&&i.drw(e,t,o+1,a(o+1)[1],a(o+1)[0],c,n,s)})},setRange:function(){},setHover:function(){}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPoligonItemOver=function(e){return{drw:function(t,n,i,o,r,a,c,s){void 0===s&&(s=1),n.fillStyle=e,n.globalAlpha=s,t(i,a,o,r,function(e,t,i,o){n.beginPath(),n.moveTo(i,o),n.lineTo(i,t),n.lineTo(e,t),n.lineTo(e,o),n.closePath(),n.fill()},c)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toIndexRange=function(e,t){for(var n=e.columns[0],i=1;n[i]<t.start;)i++;i=Math.max(i-1,1);for(var o=n.length-1;n[o]>t.end;)o--;return{start:i,end:o=Math.min(o+1,n.length-1)}}},function(e,t,n){"use strict";(function(e){var i=n(2),o=setTimeout;function r(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function c(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void u(t.promise,e)}s(t.promise,i)}else(1===e._state?s:u)(t.promise,e._value)})):e._deferreds.push(t)}function s(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void l(e);if("function"==typeof n)return void h((i=n,o=t,function(){i.apply(o,arguments)}),e)}e._state=1,e._value=t,l(e)}catch(t){u(e,t)}var i,o}function u(e,t){e._state=2,e._value=t,l(e)}function l(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)c(e,e._deferreds[t]);e._deferreds=null}function f(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}function h(e,t){var n=!1;try{e(function(e){n||(n=!0,s(t,e))},function(e){n||(n=!0,u(t,e))})}catch(e){if(n)return;n=!0,u(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(r);return c(this,new f(e,t,n)),n},a.prototype.finally=i.a,a.all=function(e){return new a(function(t,n){if(!e||void 0===e.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var o=i.length;function r(e,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var c=a.then;if("function"==typeof c)return void c.call(a,function(t){r(e,t)},n)}i[e]=a,0==--o&&t(i)}catch(e){n(e)}}for(var a=0;a<i.length;a++)r(a,i[a])})},a.resolve=function(e){return e&&"object"==typeof e&&e.constructor===a?e:new a(function(t){t(e)})},a.reject=function(e){return new a(function(t,n){n(e)})},a.race=function(e){return new a(function(t,n){for(var i=0,o=e.length;i<o;i++)e[i].then(t,n)})},a._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){o(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},t.a=a}).call(this,n(28).setImmediate)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(9),o=n(21);n(27),n(31),n(32),window.onload=function(){var e=Math.min(window.innerWidth,600);i.drawContainer(["1","2","3","4","5"].map(function(t){return new o.DataService(e,t)}),e)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(10),r=n(17),a=n(18),c=n(19);t.drawContainer=function(e,t){var n=document.createElement("div");document.body.appendChild(n),n.id="app",n.style.width=t+"px",function(e,t){var n,i=document.createElement("div");function o(){n=!0,document.body.classList.remove("night"),i.innerHTML="Switch to Night Mode",t.map(function(e){return e.changeStyle("day")})}e.appendChild(i),i.classList.add("mode"),o(),i.onclick=function(){n?(n=!1,document.body.classList.add("night"),i.innerHTML="Switch to Day Mode",t.map(function(e){return e.changeStyle("night")})):o()},t[0].onDestroy(function(){i.onclick=null,e.removeChild(i),i=null,e=null})}(n,e),Promise.all(e.map(function(e){return e.asSoonAsReady})).then(function(e){return e.forEach(function(e){return function(e,t,n){r.toHeader(t,e,n);var s=i.toDiv(t,"chart");e.isSingleton&&s.classList.add("as-sg"),o.toChart(s,e),c.toMiniMap(s,e),a.toMenu(s,e)}(e,n,t)})})}},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(11),a=n(12),c=n(13),s=n(14),u=n(16);t.toChart=function(e,t){var n,l,f,h,d,m=[],v=[],g=t.jsonData,p=g.columns,y=g.colors,x=t.viewport,R=o.drawConvas(e,x.width,x.height+2),M=R.getContext("2d"),P=!1;M.textAlign="center",M.lineJoin="bevel",M.lineCap="butt";var w=u.toTimes(e,t),b=o.drawConvas(e,x.width-10,x.height+11,"lines"),T=b.getContext("2d");T.font=10*o.devicePixelRatio+"px Arial",T.fillStyle=t.style.text,T.strokeStyle=t.style.line,t.onChangeStyle(function(){T.fillStyle=t.style.text,T.strokeStyle=t.style.line,P||(T.clearRect(0,0,b.width,b.height),(m=A(n,1)).forEach(function(e){return e.drw(T)}))}),T.lineWidth=o.devicePixelRatio,b.style.zIndex=t.zIndex,n=t.toMaxVisibleValue(t.indexRange),(m=A(n,1)).forEach(function(e){return e.drw(T)});var D=function(e){return n.length>1?n[e-1]:n[0]},S=function(e){void 0===e&&(e=D);var n=t.toFactory(t.jsonData,2,1);return n.draw(t.use,M,t.indexRange,e,x),n},_=S();s.toPopUp(e,t,D),t.onZoomStart(function(e,i,r,a){l=t.adapter.toMax(e,a,i),O(f=o.map2MaxMin(l,n,function(e,t){return(e-t)/10}),10),E(10)}),t.onSingletonZoom(function(){_=S(function(){return l[0]})}),t.onZoom(function(e,n){var i=t.toMaxVisibleValue(t.indexRange);M.clearRect(0,0,R.width,R.height),_.scale(t.use,M,t.indexRange,function(e){return i.length>1?i[e-1]:i[0]},x,n)}),t.onTimeRangeChange(function(e){_.setRange(t.indexRange),C(e)}),t.onVisibilityChange(function(e){_.setVisible(e),C("visible")});var j=null;function E(e){null!=j&&cancelAnimationFrame(j),function e(t,i){j=requestAnimationFrame(function(){n=o.map2MaxMin(n,f,function(e,t){return e+t}),t!==i&&e(t+1,i)})}(1,e)}function C(e){h&&(cancelAnimationFrame(h),n=o.mapMaxMin(n,function(e){return 10*Math.floor(e/10)})),w.rdt(e),l=t.toMaxVisibleValue(t.indexRange),f=o.map2MaxMin(l,n,function(e,t){return Math.round((e-t)/10)}),L(0,10),O(f,10),E(10)}function L(e,n){h=requestAnimationFrame(function(){if(M.clearRect(0,0,R.width,R.height),_.scale(t.use,M,t.indexRange,D,x),e!==n)return L(e+1,n)})}function A(e,n){var r=[],c=e.map(function(e,n){var i=e[0],o=e[1],r=10*Math.floor(i/10);return{dx:x.height/(i-o),lastLine:r,dOneLine:(r-o)/5,color:y[p[n+1][0]],isShow:t.visibility[n+1],label:o,min:o}});do{var s=x.height+10-(c[0].label-c[0].min)*c[0].dx;r.push(a.ln(c,s*o.devicePixelRatio,(x.width-10)*o.devicePixelRatio,n)),c=c.map(function(e){return i({},e,{label:e.label+e.dOneLine})})}while(c[0].label<=c[0].lastLine);return r}function O(e,t){e.every(function(e){var t=e[0],n=e[1];return 0===t&&0===n})||(null!=d&&cancelAnimationFrame(d),m.forEach(function(e){e.hd(),v.push(e)}),m=A(l,0),function e(t,i){d=requestAnimationFrame(function(){T.clearRect(0,0,b.width,b.height);var r=x.height/(n[0][0]-n[0][1]);function a(e){return 0!=e.up(T,(x.height+10-(e.vl[0].label-n[0][1])*r)*o.devicePixelRatio)}m.forEach(a),v=v.filter(a),t>=i||e(t+1,i)})}(0,t))}var I=c.pieAnimator(R,M,x,t.jsonData);function F(e,t){_.setHover(t),L(0,20)}t.onDrawPie(function(e,n){P=!0,T.clearRect(0,0,b.width,b.height),I.drawPie(e).then(function(){(_=r.toPieFactory(t.jsonData,t.visibility)).draw(t.use,M,n,D,x),t.onHover(F)})}),t.onDrawPersent(function(e){t.offHover(F),P=!1,I.drawPersents(e).then(function(){_=S(),m.forEach(function(e){return e.drw(T)})})})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(0);t.toPieFactory=function(e,t){for(var n,r,a=[],c=[],s=[],u=[],l=[],f=1;f<e.columns.length;f++)a.push(t[f]?1:0),c.push("none"),s.push(0),u.push(0),l.push(0);function h(t,i){var r=.02*i.height*o.devicePixelRatio,a=i.width/2*o.devicePixelRatio,c=i.height/2*o.devicePixelRatio;t.font=18*o.devicePixelRatio+"px Arial",n.reduceRight(function(n,i,s){t.fillStyle=e.colors[e.columns[s+1][0]];var l=n+i,f=o.toPieAngle(n+i/2),h=a+Math.cos(f)*r*u[s],d=c+Math.sin(f)*r*u[s];return t.beginPath(),t.moveTo(h,d),t.arc(h,d,c-r,o.toPieAngle(n),o.toPieAngle(l)),t.closePath(),t.fill(),l},0),t.fillStyle="white";var s=o.roundPercentageTotals(n);n.reduceRight(function(e,n,i){if(n){var l=o.toPieAngle(e+n/2);t.fillText(s[i]+"%",a+Math.cos(l)*(c/3*2+r*u[i]),c+Math.sin(l)*(c/3*2+r*u[i])+12)}return e+n},0)}function d(){u=u.map(function(){return 0}),l=l.map(function(){return 0})}return{draw:function(t,o,r,c,s,u){n=i.recountPercent(e,r.start,a),h(o,s)},scale:function(t,r,f,d,m,v){c.some(function(e){return"none"!==e})?(c.forEach(function(e,t){"in"===e&&(a[t]=Math.min(1,a[t]+.1),1===a[t]&&(c[t]="none")),"out"===e&&(a[t]=Math.max(0,a[t]-.1),0===a[t]&&(c[t]="none"))}),n=i.recountPercent(e,f.start,a)):s.some(function(e){return 0!==e})?n=o.map2(n,s,function(e,t){return e+t}):u=o.map2(u,l,function(e,t,n){var i=Math.min(Math.max(e+t,0),1);return 0!==i&&1!==i||(l[n]=0),i}),h(r,m)},setVisible:function(e){d();for(var t=1;t<e.length;t++)c[t-1]=e[t]?"in":"out"},setRange:function(t){d(),r=i.recountPercent(e,t.start,a),s=o.map2(r,n,function(e,t){return(e-t)/10})},setHover:function(e){s=s.map(function(){return 0}),e.forEach(function(e,t){e!==u[t]&&(l[t]=e>0?.05:-.05)})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ln=function(e,t,n,i){var o=0===i?"in":"none";function r(t,o){var r=e[0],a=e[1];t.globalAlpha=i,null!=a&&(t.fillStyle=r.color),(r.isShow||null==a)&&(t.textAlign="left",t.fillText(r.label.toString(),0,o-5)),null!=a&&a.isShow&&(t.fillStyle=a.color,t.textAlign="right",t.fillText(a.label.toString(),n,o-5)),t.beginPath(),t.lineTo(0,o),t.lineTo(n,o),t.stroke()}return{drw:function(e){r(e,t)},hd:function(){o="out"},up:function(e,t){return"in"===o&&1===(i=Math.min(1,i+.1))&&(o="none"),"out"===o&&0===(i=Math.max(0,i-.1))&&(o="none"),0!==i&&r(e,t),i},vl:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.pieAnimator=function(e,t,n,o){var r=o.colors,a=o.columns,c=n.height,s=n.width,u=c/2,l=s/2,f=Math.PI/2,h=c/100;function d(e){t.beginPath(),t.moveTo(s/2*devicePixelRatio,0),e<u?(t.lineTo((s-e)*devicePixelRatio,0),t.arc((s-e)*devicePixelRatio,e*devicePixelRatio,e*devicePixelRatio,-f,0),t.lineTo(s*devicePixelRatio,(c-e)*devicePixelRatio),t.arc((s-e)*devicePixelRatio,(c-e)*devicePixelRatio,e*devicePixelRatio,0,f),t.lineTo(e*devicePixelRatio,c*devicePixelRatio),t.arc(e*devicePixelRatio,(c-e)*devicePixelRatio,e*devicePixelRatio,f,2*f),t.lineTo(0,e*devicePixelRatio),t.arc(e*devicePixelRatio,e*devicePixelRatio,e*devicePixelRatio,2*f,3*f)):(t.arc((s-e)*devicePixelRatio,u*devicePixelRatio,u*devicePixelRatio,-f,f),t.lineTo(e*devicePixelRatio,c*devicePixelRatio),t.arc(e*devicePixelRatio,u*devicePixelRatio,u*devicePixelRatio,f,3*f)),t.closePath(),t.clip()}function m(e){e.reduceRight(function(e,n,i){t.fillStyle=r[a[i+1][0]];var o=e+n;return t.beginPath(),t.moveTo(0,(c-e*h)*devicePixelRatio),t.lineTo(0,(c-o*h)*devicePixelRatio),t.lineTo(s*devicePixelRatio,(c-o*h)*devicePixelRatio),t.lineTo(s*devicePixelRatio,(c-e*h)*devicePixelRatio),t.closePath(),t.fill(),e+n},0)}function v(e){e.reduceRight(function(n,i,o){t.fillStyle=r[a[o+1][0]];var u=n+i;return t.beginPath(),t.moveTo(0,(c-n*h)*devicePixelRatio),t.lineTo(0,(c-u*h)*devicePixelRatio),0===o&&t.lineTo(s*devicePixelRatio,0),t.lineTo(s*devicePixelRatio,c/2*devicePixelRatio),o===e.length-1&&t.lineTo(s*devicePixelRatio,c*devicePixelRatio),t.closePath(),t.fill(),n+i},0)}function g(e,n,o){e.reduceRight(function(u,l,f){t.fillStyle=r[a[f+1][0]];var h=u+l,d=(s-o)*devicePixelRatio,m=c/2*devicePixelRatio;t.beginPath(),t.moveTo(d,m),t.arc(d,m,2*s*devicePixelRatio,i.toAngle(n,u),i.toAngle(n,h)),t.closePath(),t.fill();var v=i.toRadian(150+(360+i.scaleAngle(n,100))/2);return f===e.length-1&&1!==n&&(t.beginPath(),t.moveTo(d,m),t.arc(d,m,s*devicePixelRatio,v,i.toAngle(n,0)),t.closePath(),t.fill()),0===f&&1!==n&&(t.beginPath(),t.moveTo(d,m),t.arc(d,m,s*devicePixelRatio,i.toAngle(n,h),v),t.closePath(),t.fill()),u+l},0)}return{drawPie:function(n){return new Promise(function(i){var o=0,r=l/18,a=0,c=s/2/16,u=60/360,f=(1-u)/16,h=function(s){requestAnimationFrame(function(){t.clearRect(0,0,e.width,e.height),19!==s?(t.save(),d(o),0===s?m(n):1===s?v(n):s<=18&&(g(n,u,a),u+=f,a+=c),t.restore(),o+=r,h(s+1)):i()})};h(0)})},drawPersents:function(n){return new Promise(function(i){var o=l,r=-l/18,a=l,c=-l/16,s=1,u=function(l){requestAnimationFrame(function(){t.clearRect(0,0,e.width,e.height),t.save(),d(o),0===l?m(n):1===l?v(n):l<=18&&(g(n,s,a),s+=-(1-60/360)/16,a+=c),t.restore(),o+=r,0!==l?u(l-1):i()})};u(18)})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(0),r=n(15);t.toPopUp=function(e,t,n){var a,c=t.viewport,s=c.width,u=c.height,l=o.toDiv(e,"hover");l.style.height=u+"px",l.style.width=s+"px";var f=o.toDiv(l,"pop-up"),h=!1,d=!1;function m(e){return 360*e/100}function v(e,n){var r=t.jsonData,a=t.visibility,c=t.indexRange,s=function(e,n){var i=Math.atan((t.viewport.height/2-n)/(e-t.viewport.width/2))/Math.PI*180;return e>t.viewport.width/2?210-i:n<t.viewport.height/2||i<=30?30-i:390-i}(e,n),u=i.recountPercent(r,c.start,o.toScales(a));if(function(e,n){var i=t.viewport.height/2-n,o=e-t.viewport.width/2;return Math.sqrt(o*o+i*i)>t.viewport.height/2-20}(e,n))return t.hover(u,u.map(function(){return 0}),e,n,!0);var l=[];u.reduceRight(function(e,t){var n=e+t;return l.push(m(e)<s&&s<=m(n)?1:0),e+t},0),t.hover(u,l.reverse(),e,n,!1)}t.onVisibilityChange(function(e){h||a.block.setVisibility(e)}),t.onSingletonZoom(function(){j(),_()}),t.onDrawPie(function(){R(),j(),_(),h=!0}),t.onDrawPersent(function(){R(),j(),_(),h=!1}),_(),t.onHover(function(e,t,n,i,r){a.block.setPersent(e,t,n,i),o.toggleClass(f,r,"invisible")});var g,p,y=null,x=function(e,i,r){null!=g&&cancelAnimationFrame(g),g=requestAnimationFrame(function(){if(h)return v(e,i);var c,l,d=s/(t.timeRange.end-t.timeRange.start),m=new Date(t.timeRange.start+Math.round(e/d)),g=t.isZoom?t.isSingleton?(c=m,l=3e5,Math.round(c.getTime()/l)*l):m.setUTCMinutes(0,0,0):m.setUTCHours(0,0,0,0),p=t.jsonData.columns[0],x=o.findIndex(p,function(e){return e===g});if(-1===x)return R();r&&!t.isZoom&&a.block.setLoading(t.loadingData(t.isBars?g+o.day:g)),g!==y&&(y=g,function(e,i,r){var c=t.jsonData.columns,s=c[0],l=c.slice(1),h=(e-t.timeRange.start)*i;if(t.isBars){var d=s[r+1];if(!d)return;a.line[0].style.transform="translate(0, 0)",a.line[0].style.width=h+"px",a.line[1].style.transform="translate("+(d-t.timeRange.start)*i+"px, 0)",a.line[1].style.width=(t.timeRange.end-d)*i+"px",a.block.setData(e+(t.isBars&&!t.isZoom?o.day:0),r+1,h)}else a.line[0].style.transform="translate("+h+"px, 0)",a.dots.forEach(function(e,t){var i=u/(n(t+1)[0]-n(t+1)[1]),o=l[t][r]-n(t+1)[1],a=u-o*i,c=a.toString();e.style.transform="translate("+h+"px, "+c+"px)"}),a.block.setData(e,r,h);f.classList.remove("invisible")}(g,d,x))})};function R(){f.classList.add("invisible"),d||l.addEventListener("mousemove",T)}function M(e){e.target===l&&(l.removeEventListener("touchmove",w),P(p,!0))}function P(e,t){e.stopPropagation();var n=e.targetTouches[0],i=n.clientX,o=n.clientY,r=n.target.getBoundingClientRect(),a=i-r.left,c=o-r.top;x(a,c,t)}function w(e){1===e.targetTouches.length&&(P(e,!1),p=e)}function b(e){d=!0,l.removeEventListener("mousemove",T),1===e.targetTouches.length&&e.target===l&&(P(e,!1),l.addEventListener("touchmove",w,{passive:!1}),p=e)}function T(e){if(t.isMove)R();else{var n=e.clientX,i=e.clientY,o=e.currentTarget.getBoundingClientRect(),r=n-o.left,a=i-o.top;x(r,a,!1)}}function D(e){R()}function S(e){h||l.removeEventListener("mousemove",T);var t=e.clientX,n=e.clientY,i=e.currentTarget.getBoundingClientRect(),o=t-i.left,r=n-i.top;x(o,r,!0)}function _(){var e=t.jsonData,n=e.columns,i=(n[0],n.slice(1)),c=e.colors;if(f.classList.add("invisible"),t.isBars)a={line:[o.toDiv(f,"shadow"),o.toDiv(f,"shadow")],dots:[],block:r.toPopUpBlock(t,f)};else{var s=[];t.isPercentage&&t.isZoom||s.push(o.toDiv(f,"line"));var u=t.isPercentage?[]:i.map(function(e){var t=e[0],n=o.toDiv(f,"dot");return n.style.borderColor=c[t],n});a={line:s,dots:u,block:r.toPopUpBlock(t,f)}}}function j(){a.line.forEach(function(e){return f.removeChild(e)}),a.dots.forEach(function(e){return f.removeChild(e)}),a.block.destroy(),f.removeChild(a.block.panel),a=null}l.addEventListener("click",S),l.addEventListener("mousemove",T),l.addEventListener("mouseleave",D),l.addEventListener("touchstart",b,{passive:!1}),l.addEventListener("touchend",M),t.onVisibilityChange(function(e){if(R(),a.dots.length)for(var t=1;t<e.length;t++)o.toggleClass(a.dots[t-1],!e[t],"invisible")}),t.onTimeRangeChange(function(){return R()}),t.onZoomStart(function(){return R()}),t.onDestroy(function(){l.removeEventListener("click",S),l.removeEventListener("mousemove",T),l.removeEventListener("mouseleave",D),l.removeEventListener("touchstart",b),l.removeEventListener("touchend",M)})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);function o(e){var t=i.drawConvas(e,20,20,"icon"),n=t.getContext("2d");n.strokeStyle="#d2d5d7",n.lineWidth=2*i.devicePixelRatio;var o,r=t.width,a=t.height,c=a/2,s=a/2-2*i.devicePixelRatio,u=Math.sqrt(2)/2*s,l=315,f=90;function h(){o=setTimeout(function(){360===(l+=5)&&(l=0),n.clearRect(0,0,r,a),n.beginPath(),n.arc(c,c,s,i.toRadian(l),i.toRadian(l+f)),n.stroke(),h()},20)}function d(){n.clearRect(0,0,r,a),n.beginPath(),n.moveTo(c+u,c-u),n.lineTo(c+s,c),n.lineTo(c+u,c+u),n.stroke()}return d(),{start:function(){h()},end:function(){clearTimeout(o),l=315,d()},destroy:function(){clearTimeout(o),e.removeChild(t),e=null}}}function r(e){var t=e.toString();return t.length>6?t.substr(0,t.length-6)+"."+t.substr(t.length-6,1)+"M":t.length>4?t.substr(0,t.length-3)+"K":t}t.toPopUpBlock=function(e,t){var n,a=e.viewport.width,c=i.toDiv(t,"panel"),s=!1;c.onclick=function(t){e.isZoom?e.unzoom():e.zoom(),t.stopPropagation(),s&&u&&u.start()};var u=null;e.isZoom&&e.isPercentage||(n=i.toDiv(c,"date"),u=o(c));var l=e.jsonData,f=l.columns,h=(f[0],f.slice(1)),d=l.names,m=l.colors,v=h.map(function(e){var t=i.toDiv(c,"block"),n=i.toDiv(t,"name"),o=i.toDiv(t,"value");return n.innerHTML=d[e[0]],o.style.color=m[e[0]],{block:t,value:o,num:0,name:n,nameVal:d[e[0]],key:e[0],isShow:!0}});if(e.isBars&&v.length>1){var g=i.toDiv(c,"block"),p=i.toDiv(g,"name"),y=i.toDiv(g,"value");p.innerHTML="All",v.push({block:g,value:y,num:0,name:p,nameVal:"All",key:"all",isShow:!0})}function x(e,t){e.isShow=t,i.toggleClass(e.block,!t,"invisible")}function R(){var e=v.reduce(function(e,t){return t.isShow?e+t.num:e},0),t=i.roundPercentageTotals(v.map(function(t){return t.num/e*100}));v.forEach(function(e,n){e.isShow&&(e.name.innerHTML="<b>"+t[n]+"%</b> "+e.nameVal)})}return{setLoading:function(e){s=!0,e.then(function(){s=!1,u&&u.end()})},setData:function(t,o,s){var u=new Date(t);n.innerHTML=i.days[u.getUTCDay()].slice(0,3)+", "+u.getUTCDate()+" "+i.month[u.getUTCMonth()].slice(0,3),e.isZoom?e.isSingleton?n.innerHTML=("0"+u.getUTCHours()).slice(-2)+":"+("0"+u.getUTCMinutes()).slice(-2):n.innerHTML+=" "+("0"+u.getUTCHours()).slice(-2)+":00":n.innerHTML+=" "+u.getUTCFullYear();var l=e.jsonData.columns,f=(l[0],l.slice(1));if(v.forEach(function(e,t){"all"!==e.key&&(e.num=f[t][o],e.value.innerHTML=r(e.num))}),e.isPercentage&&R(),e.isBars&&v.length>1){var h=v[v.length-1],d=v.filter(function(e){return"all"!==e.key&&e.isShow});d.length>1?(h.num=d.reduce(function(e,t){return e+t.num},0),h.value.innerHTML=r(h.num),x(h,!0)):x(h,!1)}c.style.transform="translate("+(s+(s>a/2?-190:20))+"px, 10px)"},setPersent:function(e,t,n,o){var r=i.roundPercentageTotals(e);v.forEach(function(e,n){x(e,!!t[n]),e.num=r[n],e.value.innerHTML=e.num+"%"}),c.style.transform="translate("+(n-85)+"px, "+(o-70)+"px)"},setVisibility:function(t){for(var n=1;n<t.length;n++)x(v[n-1],t[n]);e.isPercentage&&R()},destroy:function(){c.onclick=null,u&&u.destroy()},panel:c}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.toTimes=function(e,t){var n=t.viewport.width,o=i.drawConvas(e,n,16,"text"),r=o.getContext("2d");r.font=10*i.devicePixelRatio+"px Arial",r.fillStyle=t.style.text;var a,c,s,u=30,l=70,f=20,h=0,d=t.jsonData,m=!1;t.onChangeStyle(function(){r.fillStyle=t.style.text,P()});var v=1;function g(e){s=n/(e.end-e.start),v=Math.min(v+.1,1),P()}function p(e){return void 0!==d.columns[0][e]}function y(e){return p(e)?d.columns[0][e]:null}function x(e){return R(e,t.timeRange)}function R(e,t){return(y(e)-t.start)*(n/(t.end-t.start))}function M(e){var n;r.fillText((n=new Date(y(e)),t.isZoom?("0"+n.getUTCHours()).slice(-2)+":00":n.getUTCDate()+" "+i.month[n.getUTCMonth()].slice(0,3)),x(e)*i.devicePixelRatio,13*i.devicePixelRatio)}function P(){if(!m){r.clearRect(0,0,o.width,o.height),r.globalAlpha=v;for(var e=a;e<=c;e+=h)M(e)}}t.onZoomStart(function(e,t,i){d=e,s=n/(i.end-i.start),v=0,T(t,i)}),t.onZoom(g),t.onPieZoom(g),t.onDrawPie(function(){r.clearRect(0,0,o.width,o.height),m=!0}),t.onDrawPersent(function(){m=!1}),T(t.indexRange,t.timeRange),P();var w=null;function b(e){var i=t.timeRange;s=n/(i.end-i.start),e(),function(){var e=a-h;p(e)&&x(e)>-u&&(a=e),x(a)<-u&&(a+=h);var t=c+h;p(t)&&x(t)<n+u&&(c=t),x(c)>n+u&&(c-=h)}(),P()}function T(e,t){for(s=n/(t.end-t.start),a=e.start;R(a,t)<f;)a++;for(h=1;R(a+h,t)<l+f;)h*=2;for(a-h>e.start&&(a-=h),c=a;p(c+h)&&R(c,t)<=n;)c+=h}return{rdt:function(e){m||(null!==w&&cancelAnimationFrame(w),w=requestAnimationFrame(function(){switch(e){case"left":return b(function(){!function(){if(1!==h){var e=h/2,t=c-e;if(p(t)&&(y(c)-y(t))*s>l){for(var n=t;x(n)>=-u;)n-=e;a=n,h=e}}}(),function(){var e=2*h,t=c-h;if(p(t)&&(y(c)-y(t))*s<l){for(var n=c;x(n)>=-u;)n-=h;a=n,h=e}}()});case"right":return b(function(){!function(){if(1!==h){var e=h/2,t=a+e;if(p(t)&&(y(t)-y(a))*s>l){for(var i=t;x(i)<=n+u;)i+=e;c=i,h=e}}}(),function(){var e=2*h,t=a+h;if(p(t)&&(y(t)-y(a))*s<l){for(var i=a;x(i)<=n+u;)i+=e;c=i,h=e}}()});case"move":return function e(){var t=a-h;p(t)&&x(t)>-u&&(c-=h,a=t,e())}(),function e(){var t=c+h;p(t)&&x(t)<n+u&&(a+=h,c=t,e())}(),void P();default:return}}))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);function o(e){if(e.isZoom){var t=new Date(e.timeRange.start+(e.isPercentage?0:i.day/2));return i.days[t.getUTCDay()]+", "+t.getUTCDate()+" "+i.month[t.getMonth()]+" "+t.getFullYear()}var n=new Date(e.timeRange.start),o=new Date(e.timeRange.end);return n.getUTCDate()+" "+i.month[n.getMonth()]+" "+n.getFullYear()+" - "+o.getUTCDate()+" "+i.month[o.getMonth()]+" "+o.getFullYear()}t.toHeader=function(e,t,n){var r=i.toDiv(e,"header");r.innerHTML="<h1>Chart "+t.url+"</h1>",n<400&&r.classList.add("double");var a=i.toDiv(r,"zoom");a.innerHTML='<svg class="loupe" height="27" width="27"><circle cx="12" cy="12" r="9"></circle><line x1="7" x2="17" y1="12" y2="12"></line><line x1="19" x2="27" y1="19" y2="27"></line></svg><span>Zoom Out</span>';var c=i.toDiv(r,"range");function s(){var e;e=o(t),g!==e&&(p&&clearTimeout(p),p=setTimeout(function(){g=e,m?v=!0:y()},35))}t.onTimeRangeChange(s),t.onZoom(s),t.onPieZoom(s);var u=!1;function l(){u=!0}t.onZoomStart(l),t.onDrawPie(l),t.onDrawPersent(l),a.onclick=function(){u||t.unzoom()},t.onDestroy(function(){a.onclick=null});var f=i.toDiv(c,"changer");f.innerHTML=o(t);var h=i.toDiv(c,"changer");h.classList.add("hide");var d=!0,m=!1,v=!1,g="",p=null;function y(){d?x(f,h):x(h,f)}function x(e,t){m=!0,d=!d,t.innerHTML=g,t.classList.add("animation"),e.classList.add("animation"),t.classList.remove("hide"),e.classList.add("hiding");var n=u;u&&(r.classList.toggle("in-zoom"),u=!1),setTimeout(function(){e.classList.add("hide"),e.classList.remove("hiding","animation"),t.classList.remove("animation"),n&&(t.classList.toggle("reverse"),e.classList.toggle("reverse")),setTimeout(function(){m=!1,v&&(v=!1,y())},50)},300)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.toMenu=function(e,t){var n=i.toDiv(e,"menu"),r=[];function a(){t.jsonData.columns.forEach(function(e,a){var c=e[0];"x"===c?r.push(o):r.push(function(e,t,n,o,r,a){var c=i.toDiv(a,"checkbox");c.innerHTML+=o,requestAnimationFrame(function(){c.appendChild(function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.innerHTML+='<circle class="shadow" cx="22" cy="21" r="'+t+'" style="fill: '+e+';"></circle><circle cx="22" cy="21" r="13" style="fill: '+e+';"></circle>',n.innerHTML+='<polyline class="check-mark" points="16,21.5 20,25.5 27,17.5"></polyline><circle class="cover" cx="22" cy="21" r="12"></circle>',n}(n,c.clientWidth))});var s=!1,u=null;function l(e){t=e,i.toggleClass(c,t,"as-check")}return c.onmousedown=c.ontouchstart=function(){u=setTimeout(function(){s=!0,r.uncheckOther(e)},500)},c.onmouseup=c.ontouchend=function(){u&&clearTimeout(u)},c.onclick=function(){s||r.toggleVisibility(e),s=!1},l(t),{setValue:l,destroy:function(){c.onclick=null,c.onmousedown=null,c.onmouseup=null,c.ontouchstart=null,c.ontouchend=null,a.removeChild(c),a=null}}}(a,t.visibility[a],t.jsonData.colors[c],t.jsonData.names[c],t,n))})}t.isSingleton||a(),t.onSingletonZoom(function(e){e?a():(r.forEach(function(e){return e.destroy()}),r=[])}),t.onVisibilityChange(function(e){return e.forEach(function(e,t){return r.length&&r[t].setValue(e)})}),t.onDestroy(function(){r.forEach(function(e){return e.destroy()}),e.removeChild(n)})};var o={setValue:function(){},destroy:function(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(0),r=n(4),a=n(5),c=n(20);t.toMiniMap=function(e,t){var n=o.toDiv(e,"mini-map");!function(e,t){var n,c,s,u,l=t.miniMap,f=o.drawConvas(e,l.viewport.width,l.viewport.height),h=f.getContext("2d");function d(e){return n.length>1?n[e-1]:n[0]}function m(){var e=t.toFactory(t.jsonData,1,1);return e.draw(t.useMin,h,t.indexRange,d,l.viewport),e}n=t.toMaxVisibleValue(l.indexRange);var v=m();function g(){n=t.toMaxVisibleValue(t.miniMap.indexRange),h.clearRect(0,0,f.width,f.height),v.draw(t.useMin,h,t.indexRange,d,l.viewport)}function p(){u&&(cancelAnimationFrame(u),n=o.mapMaxMin(n,function(e){return 10*Math.floor(e/10)})),c=t.toMaxVisibleValue(l.indexRange),s=o.map2MaxMin(c,n,function(e,t){return Math.round((e-t)/10)}),function e(i){u=requestAnimationFrame(function(){if(h.clearRect(0,0,f.width,f.height),v.scale(t.useMin,h,t.indexRange,d,l.viewport),10!==i)return n=o.map2MaxMin(n,s,function(e,t){return e+t}),e(i+1)})}(0)}t.onZoom(g),t.onPieZoom(g),t.onVisibilityChange(function(e){v.setVisible(e),p()}),t.onDrawPie(function(){t.adapter.use=i.recountAndUsePercentChartOver(!1),(v=r.toScalableFactory(t.jsonData,a.toPoligonItemOver,o.toScales(t.visibility))).draw(t.useMin,h,t.indexRange,d,l.viewport)}),t.onDrawPersent(function(){t.adapter.use=i.recountAndUsePercentChartOver(!0),v=m()})}(n,t),c.drawLens(n,t),t.onSingletonZoom(function(e){o.toggleClass(n,e,"fade")})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.drawLens=function(e,t){var n=i.toDiv(e,"lens"),o=i.toDiv(e,"cover");o.style.left="0px";var r=i.toDiv(e,"cover");r.style.right="0px";var a=document.createElement("span");n.appendChild(a),a.style.left="-5px";var c=document.createElement("span");n.appendChild(c),c.style.right="-5px";var s=t.miniMap,u=t.miniMap.viewport.width,l=u/(s.timeRange.end-s.timeRange.start);function f(e){l=u/(s.timeRange.end-s.timeRange.start),m(e)}t.onZoom(f),t.onPieZoom(f);var h=!1;function d(){h=!h}t.onZoomStart(d),t.onDrawPersent(d),t.onDrawPie(d);var m=function(e){var t=Math.floor((e.end-e.start)*l),i=Math.floor((e.start-s.timeRange.start)*l);n.style.width=t+"px",n.style.left=i+"px",o.style.width=i+"px",r.style.left=i+t+"px"};function v(e,i){t.isMove=!0;var o,r=(t.timeRange.end-t.timeRange.start)*l,f=(t.timeRange.start-s.timeRange.start)*l;function d(n){o&&cancelAnimationFrame(o),o=requestAnimationFrame(function(){return function(n){switch(e){case a:if(h)return;if((d=Math.min(Math.max(f+n-i,0),f+r-20))===f)return;t.setTimeRange("left",{start:Math.floor(s.timeRange.start+d/l),end:t.timeRange.end});break;case c:if(h)return;var o=Math.min(u-f,Math.max(20,r+n-i));if(o===r)return;t.setTimeRange("right",{start:t.timeRange.start,end:Math.floor(s.timeRange.start+(f+o)/l)});break;default:var d;if((d=Math.min(Math.max(f+n-i,0),u-r))===f)return;t.setTimeRange("move",{start:Math.floor(s.timeRange.start+d/l),end:Math.floor(s.timeRange.start+(d+r)/l)})}}(n)})}function m(e){e.stopPropagation(),e.preventDefault(),d(e.clientX)}function v(e){1===e.targetTouches.length&&(e.stopPropagation(),e.preventDefault(),d(e.targetTouches[0].clientX))}function g(){t.isMove=!1,document.removeEventListener("mousemove",m),document.removeEventListener("touchmove",v),document.removeEventListener("mouseup",g),n.removeEventListener("touchend",g)}document.addEventListener("mousemove",m),document.addEventListener("touchmove",v,{passive:!1}),document.addEventListener("mouseup",g),n.addEventListener("touchend",g)}m(t.timeRange),t.onTimeRangeChange(function(e,t){return m(t)}),n.addEventListener("mousedown",function(e){e.stopPropagation(),e.preventDefault(),v(e.target,e.clientX)}),n.addEventListener("touchstart",function(e){1===e.targetTouches.length&&(e.stopPropagation(),e.preventDefault(),v(e.targetTouches[0].target,e.targetTouches[0].clientX))},{passive:!1})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=n(22),r=n(23),a=n(5),c=n(24),s=n(1),u=n(0),l=n(6),f=n(25),h=n(26),d=function(){function e(e,t){var n=this;this.url=t,this.visibility=[],this.isMove=!1,this.isBars=!1,this.isPercentage=!1,this.isSingleton=!1,this.styleWatchers=[],this.timeChangeWatchers=[],this.visibilityWatchers=[],this.destroyWatchers=[],this.use=function(e,t,i,o,r,a){n.adapter.use(n.jsonData,e,n.visibility,n.indexRange,n.timeRange,t,i,o,r,a)},this.useMin=function(e,t,i,o,r,a){n.adapter.use(n.jsonData,e,n.visibility,n.miniMap.indexRange,n.miniMap.timeRange,t,i,o,r,a)},this.isZoom=!1,this.yearDatas=null,this.zoomWatchers=[],this.zoomStartWatchers=[],this.singletonZoomWatchers=[],this.drawPieWatchers=[],this.drawPersentsWatchers=[],this.pieZoomWatchers=[],this.hoverWatchers=[],this.asSoonAsReady=p("./json/"+t+"/overview.json").then(function(t){return n.setDate(e,t)}).then(function(){return n})}return e.prototype.changeStyle=function(e){this.style="day"===e?h.dayStyle:h.nightStyle,this.styleWatchers.forEach(function(e){return e()})},e.prototype.onChangeStyle=function(e){this.styleWatchers.push(e)},e.prototype.setDate=function(e,t){var n=this;this.changeStyle("day"),this.jsonData=t;var f=t.columns[0];this.timeRange={start:f[Math.max(Math.round(.8*f.length),1)],end:f[f.length-1]},this.indexRange=l.toIndexRange(this.jsonData,this.timeRange),this.viewport={width:e,height:Math.round(e*(t.percentage?.7:.6))},this.miniMap={viewport:{width:e-10,height:46},indexRange:{start:1,end:f.length-1},timeRange:{start:f[1]-2*u.day,end:f[f.length-1]+2*u.day}},this.visibility=t.columns.map(function(){return!0}),this.isBars=("bar"===t.types[t.columns[1][0]]||t.stacked)&&!t.percentage,this.isPercentage=t.percentage,this.isSingleton=2===t.columns.length,t.y_scaled?(this.zIndex="-1",this.toFactory=function(e,t,n){return o.toChartItemsFactory(e,c.toPolylineItemOver,t,n)},this.adapter={use:s.recountAndUseSimplePintsChart,toMax:s.recountDoubleMax}):t.percentage?(this.zIndex="1",this.toFactory=function(e){return i.toScalableFactory(e,r.toAreaItemOver,u.toScales(n.visibility))},this.adapter={use:s.recountAndUsePercentChartOver(!0),toMax:function(){return[[100,0]]}}):t.stacked?(this.zIndex="1",this.toFactory=function(e){return i.toScalableFactory(e,a.toPoligonItemOver,u.toScales(n.visibility))},this.adapter={use:s.recountAndUseChartBySumm,toMax:s.recountMaxBySumm}):this.isSingleton?(this.zIndex="1",this.toFactory=function(e){return i.toScalableFactory(e,a.toPoligonItemOver,u.toScales(n.visibility))},this.adapter={use:s.recountAndUseSimplePintsChart,toMax:s.recountSimpleMax}):(this.zIndex="-1",this.toFactory=function(e,t,n){return o.toChartItemsFactory(e,c.toPolylineItemOver,t,n)},this.adapter={use:s.recountAndUseSimplePintsChart,toMax:s.recountSimpleMaxAndMin})},e.prototype.onTimeRangeChange=function(e){this.timeChangeWatchers.push(e)},e.prototype.setTimeRange=function(e,t){this.indexRange=l.toIndexRange(this.jsonData,t),this.timeRange=t,this.timeChangeWatchers.forEach(function(n){return n(e,t)})},e.prototype.uncheckOther=function(e){var t=this;this.visibility=this.visibility.map(function(t,n){return n===e}),this.visibilityWatchers.forEach(function(e){return e(t.visibility)})},e.prototype.toggleVisibility=function(e){var t=this;this.visibility[e]=!this.visibility[e],this.visibilityWatchers.forEach(function(e){return e(t.visibility)})},e.prototype.onVisibilityChange=function(e){this.visibilityWatchers.push(e)},e.prototype.onDestroy=function(e){this.destroyWatchers.push(e)},e.prototype.toMaxVisibleValue=function(e){return this.adapter.toMax(this.jsonData,this.visibility,e)},e.prototype.loadingData=function(e){return this.zoomedTime=e,this.isPercentage?Promise.resolve():this.asSoonAsLoading=p(function(e,t){var n=new Date(t);return"./json/"+e+"/"+n.getUTCFullYear()+"-"+("0"+(n.getMonth()+1)).slice(-2)+"/"+("0"+n.getDate()).slice(-2)+".json"}(this.url,e))},e.prototype.storeYearsDatas=function(){this.yearDatas={yearData:this.jsonData,indexRange:u.copyRange(this.indexRange),timeRange:u.copyRange(this.timeRange),miniMapIndexRange:u.copyRange(this.miniMap.indexRange),miniMapTimeRange:u.copyRange(this.miniMap.timeRange)}},e.prototype.unzoom=function(){if(this.isPercentage)return this.percentageUnZoom();this.isZoom=!1;var e=this.yearDatas,t=e.yearData,n=e.miniMapTimeRange,i=e.timeRange,o=e.indexRange,r=this.zommingTimesOver(i,n,16);this.isSingleton?(this.zoomStart(t,o,i,t.columns.map(function(){return!0})),this.singletonUnzooming(16,t,r)):(this.zoomStart(t,o,i,this.visibility),this.simpleUnzooming(t,this.jsonData,r))},e.prototype.singletonUnzooming=function(e,t,n){var o=this;g(e,v,function(r){if(n(),16===r)o.jsonData=t,o.indexRange=l.toIndexRange(o.jsonData,o.timeRange),o.miniMap.indexRange=l.toIndexRange(o.jsonData,o.miniMap.timeRange),o.visibility=t.columns.map(function(){return!0}),o.isBars=!0,o.toFactory=function(e){return i.toScalableFactory(e,a.toPoligonItemOver,u.toScales(o.visibility))},o.singletonZoomWatchers.forEach(function(e){return e(!1)});else if(o.indexRange=l.toIndexRange(o.jsonData,o.timeRange),o.miniMap.indexRange=l.toIndexRange(o.jsonData,o.miniMap.timeRange),o.zoomWatchers.forEach(function(t){return t(o.timeRange,(e-r)/10)}),1===r)return!0})},e.prototype.simpleUnzooming=function(e,t,n){var i=this,o=u.copyRange(this.miniMap.timeRange),r=f.mergeJsonForSimpleZoomOver(e,t,this.miniMap.timeRange,o);g(20,v,function(t){if(n(t>14?3:1),19===t&&(i.jsonData=r(3)),16===t&&(i.jsonData=r(6)),14===t&&(i.jsonData=r(12)),10===t&&(i.jsonData=e),i.indexRange=l.toIndexRange(i.jsonData,i.timeRange),i.miniMap.indexRange=l.toIndexRange(i.jsonData,i.miniMap.timeRange),i.zoomWatchers.forEach(function(e){return e(i.timeRange)}),1===t)return!0})},e.prototype.zommingTimesOver=function(e,t,n){var i=this,o=(e.start-this.timeRange.start)/n,r=(e.end-this.timeRange.end)/n,a=(t.start-this.miniMap.timeRange.start)/n,c=(t.end-this.miniMap.timeRange.end)/n;return function(e){void 0===e&&(e=1),i.timeRange.start+=o/e,i.timeRange.end+=r/e,i.miniMap.timeRange.start+=a/e,i.miniMap.timeRange.end+=c/e}},e.prototype.zoom=function(){var e=this;if(this.isPercentage)return this.percentageZoom();this.storeYearsDatas(),this.asSoonAsLoading.then(function(t){e.isZoom=!0;var n=t.columns[0],i={start:e.zoomedTime,end:e.zoomedTime+u.day},o=l.toIndexRange(t,i),r={start:n[1],end:n[n.length-1]},a=e.zommingTimesOver(i,r,16);e.isSingleton?(e.zoomStart(t,o,i,t.columns.map(function(){return!0})),e.singletonZoomin(t,a)):(e.zoomStart(t,o,i,e.visibility),e.simpleZooming(i,e.jsonData,t,a))})},e.prototype.singletonZoomin=function(e,t){var n=this;g(1,m,function(i){if(t(),n.indexRange=l.toIndexRange(n.jsonData,n.timeRange),n.miniMap.indexRange=l.toIndexRange(n.jsonData,n.miniMap.timeRange),n.zoomWatchers.forEach(function(e){return e(n.timeRange,(16-i)/10)}),16===i)return n.jsonData=e,n.visibility=e.columns.map(function(){return!0}),n.indexRange=l.toIndexRange(n.jsonData,n.timeRange),n.miniMap.indexRange=l.toIndexRange(n.jsonData,n.miniMap.timeRange),n.isBars=!1,n.toFactory=function(e,t,n){return o.toChartItemsFactory(e,c.toPolylineItemOver,t,n)},n.singletonZoomWatchers.forEach(function(e){return e(!0)}),!0})},e.prototype.simpleZooming=function(e,t,n,i){var o=this,r=f.mergeJsonForSimpleZoomOver(t,n,this.miniMap.timeRange,e);g(1,m,function(e){if(i(e>14?3:1),11===e&&(o.jsonData=r(12)),14===e&&(o.jsonData=r(6)),17===e&&(o.jsonData=r(3)),20===e&&(o.jsonData=n),o.indexRange=l.toIndexRange(o.jsonData,o.timeRange),o.miniMap.indexRange=l.toIndexRange(o.jsonData,o.miniMap.timeRange),o.zoomWatchers.forEach(function(e){return e(o.timeRange)}),20===e)return!0})},e.prototype.onZoom=function(e){this.zoomWatchers.push(e)},e.prototype.onZoomStart=function(e){this.zoomStartWatchers.push(e)},e.prototype.onSingletonZoom=function(e){this.singletonZoomWatchers.push(e)},e.prototype.zoomStart=function(e,t,n,i){this.zoomStartWatchers.forEach(function(o){return o(e,t,n,i)})},e.prototype.percentageZoom=function(){this.storeYearsDatas(),this.isZoom=!0;var e={start:this.zoomedTime,end:this.zoomedTime+u.day},t=l.toIndexRange(this.jsonData,e),n=this.jsonData.columns[0],i={start:Math.max(this.zoomedTime-3*u.day,n[1]),end:Math.min(this.zoomedTime+4*u.day,n[n.length-1])},o=s.recountPercent(this.jsonData,t.start,u.toScales(this.visibility));this.drawPieWatchers.forEach(function(e){return e(o,t)}),this.pieZoomingMiniMap(e,i)},e.prototype.pieZoomingMiniMap=function(e,t){var n=this,i=this.zommingTimesOver(e,t,16);g(1,m,function(e){if(i(),n.indexRange=l.toIndexRange(n.jsonData,n.timeRange),n.miniMap.indexRange=l.toIndexRange(n.jsonData,n.miniMap.timeRange),n.pieZoomWatchers.forEach(function(e){return e(n.timeRange)}),16===e)return!0})},e.prototype.onDrawPie=function(e){this.drawPieWatchers.push(e)},e.prototype.onDrawPersent=function(e){this.drawPersentsWatchers.push(e)},e.prototype.percentageUnZoom=function(){this.isZoom=!1;var e=s.recountPercent(this.jsonData,this.indexRange.start,u.toScales(this.visibility));this.drawPersentsWatchers.forEach(function(t){return t(e)}),this.pieZoomingMiniMap(this.yearDatas.timeRange,this.yearDatas.miniMapTimeRange)},e.prototype.onPieZoom=function(e){this.pieZoomWatchers.push(e)},e.prototype.hover=function(e,t,n,i,o){this.hoverWatchers.forEach(function(r){return r(e,t,n,i,o)})},e.prototype.onHover=function(e){this.hoverWatchers.push(e)},e.prototype.offHover=function(e){this.hoverWatchers=this.hoverWatchers.filter(function(t){return t!==e})},e}();function m(e){return e+1}function v(e){return e-1}function g(e,t,n){!function e(i){requestAnimationFrame(function(){n(i)||e(t(i))})}(e)}function p(e){return new Promise(function(t){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==this.readyState&&200==this.status&&t(JSON.parse(this.responseText))},n.open("GET",e,!0),n.send()})}t.DataService=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toChartItemsFactory=function(e,t,n,i){for(var o=[],r=1;r<e.columns.length;r++){var a=e.columns[r][0];o.push(t(e.colors[a],n,i))}return{draw:function(e,t,n,i,r){o.forEach(function(n,o){n.drw(e,t,o+1,i(o+1)[1],i(o+1)[0],r)})},setVisible:function(e){for(var t=1;t<e.length;t++)o[t-1].set(e[t])},scale:function(e,t,n,i,r){o.forEach(function(n,o){n.sc(e,t,o+1,i(o+1)[1],i(o+1)[0],r)})},setRange:function(){},setHover:function(){}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toAreaItemOver=function(e){return{drw:function(t,n,i,o,r,a,c){n.fillStyle=e,n.beginPath();var s=[];t(i,a,o,r,function(e,t,i,o){n.lineTo(e,t),s.push([i,o])},c);for(var u=s.length-1;u>=0;u--){var l=s[u],f=l[0],h=l[1];n.lineTo(f,h)}n.closePath(),n.fill()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0);t.toPolylineItemOver=function(e,t,n){var o=1===n?"none":"in";function r(o,r,a,c,s,u){r.lineWidth=t*i.devicePixelRatio,r.globalAlpha=n,r.strokeStyle=e,r.beginPath(),o(a,u,c,s,function(e,t){return r.lineTo(e,t)}),r.stroke()}return{drw:r,set:function(e){o=e?"in":"out"},sc:function(e,t,i,a,c,s){"in"===o&&1===(n=Math.min(1,n+.1))&&(o="none"),"out"===o&&0===(n=Math.max(0,n-.1))&&(o="none"),0!==n&&r(e,t,i,a,c,s)}}}},function(e,t,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var o=n(6);t.mergeJsonForSimpleZoomOver=function(e,t,n,r){return function(a){var c=o.toIndexRange(e,n),s=c.start,u=c.end,l=e.columns.map(function(e){return e.slice(s,u)}),f=function(e,t){for(var n=1;e[n]<t.start;)n++;n=Math.max(n-2,1);for(var i=e.length-1;e[i]>t.end;)i--;return i=Math.min(i+3,e.length-1),{start:n,end:i}}(l[0],r);return i({},t,{columns:l.map(function(e,n){var i=t.columns[n],o=i[0],r=i.slice(1);if("x"===o){var c=r.reduce(function(e,t,n){return n%a==0&&e.push(t),e},[]);return[o].concat(e.slice(0,f.start),c,e.slice(f.end,e.length-1))}var s=function(e){return 12===e?2:6===e?4:8}(a);if(c=r.reduce(function(e,t,n){return n%a==0?e.push(t):e[e.length-1]+=t,e},[]),12===a){var u=e[f.start]/s;c=c.map(function(e){return e>u?e/1.5:1.5*e})}return[o].concat(e.slice(0,f.start).map(function(e){return e/s}),c,e.slice(f.end,e.length-1).map(function(e){return e/s}))})})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dayStyle={text:"rgba(37, 37, 41, 0.5)",line:"rgba(24, 45, 59, 0.1)"},t.nightStyle={text:"rgba(163, 177, 194, 0.6)",line:"rgba(255, 255, 255, 0.1)"}},function(e,t,n){"use strict";n.r(t),function(e){var t=n(7),i=n(2),o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("unable to locate global object")}();"Promise"in o?o.Promise.prototype.finally||(o.Promise.prototype.finally=i.a):o.Promise=t.a}.call(this,n(3))},function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function r(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(29),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(3))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,o,r,a,c,s=1,u={},l=!1,f=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){m(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){m(e.data)},i=function(e){r.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,i=function(e){var t=f.createElement("script");t.onreadystatechange=function(){m(e),t.onreadystatechange=null,o.removeChild(t),t=null},o.appendChild(t)}):i=function(e){setTimeout(m,0,e)}:(a="setImmediate$"+Math.random()+"$",c=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&m(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",c,!1):e.attachEvent("onmessage",c),i=function(t){e.postMessage(a+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return u[s]=o,i(s),s++},h.clearImmediate=d}function d(e){delete u[e]}function m(e){if(l)setTimeout(m,0,e);else{var t=u[e];if(t){l=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{d(e),l=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(3),n(30))},function(e,t){var n,i,o=e.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function c(e){if(n===setTimeout)return setTimeout(e,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(e){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var s,u=[],l=!1,f=-1;function h(){l&&s&&(l=!1,s.length?u=s.concat(u):f=-1,u.length&&d())}function d(){if(!l){var e=c(h);l=!0;for(var t=u.length;t;){for(s=u,u=[];++f<t;)s&&s[f].run();f=-1,t=u.length}s=null,l=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function v(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new m(e,t)),1!==u.length||l||c(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){!function(e){var t=["SVGSVGElement","SVGGElement"],n=document.createElement("dummy");if(!t[0]in e)return!1;if(Object.defineProperty){var i={get:function(){return n.innerHTML="",Array.prototype.slice.call(this.childNodes).forEach(function(e,t){n.appendChild(e.cloneNode(!0))}),n.innerHTML},set:function(e){var t=this,i=Array.prototype.slice.call(t.childNodes),o=function(e,t){if(1!==t.nodeType)return!1;var n=document.createElementNS("http://www.w3.org/2000/svg",t.nodeName);Array.prototype.slice.call(t.attributes).forEach(function(e){n.setAttribute(e.name,e.value)}),"TEXT"===t.nodeName&&(n.textContent=t.innerHTML),e.appendChild(n),t.childNodes.length&&Array.prototype.slice.call(t.childNodes).forEach(function(e,t){o(n,e)})};e=e.replace(/<(\w+)([^<]+?)\/>/,"<$1$2></$1>"),i.forEach(function(e,t){e.parentNode.removeChild(e)}),n.innerHTML=e,Array.prototype.slice.call(n.childNodes).forEach(function(e){o(t,e)})},enumerable:!0,configurable:!0};try{t.forEach(function(e,t){Object.defineProperty(window[e].prototype,"innerHTML",i)})}catch(e){}}else Object.prototype.__defineGetter__&&t.forEach(function(e,t){window[e].prototype.__defineSetter__("innerHTML",i.set),window[e].prototype.__defineGetter__("innerHTML",i.get)})}(window)},function(e,t,n){}]);