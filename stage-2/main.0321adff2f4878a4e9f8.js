!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";function i(t,e,n){return t.reduce(function(t,i,o){return t.push(n(i,e[o],o)),t},[])}function o(t){return t*Math.PI/180}function a(t,e){return e*t*360/100}function r(t,e){return o(150+a(t,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.month=["January","February","March","April","May","June","July","August","September","October","November","December"],e.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e.devicePixelRatio=window.devicePixelRatio,e.drawConvas=function(t,n,i,o){var a=document.createElement("canvas");return o&&a.classList.add(o),a.setAttribute("width",(n*e.devicePixelRatio).toString()),a.setAttribute("height",(i*e.devicePixelRatio).toString()),a.style.height=i+"px",a.style.width=n+"px",t.appendChild(a),a},e.toDiv=function(t,e){var n=document.createElement("div");return e&&n.classList.add(e),t.appendChild(n),n},e.map2=i,e.mapMaxMin=function(t,e){return t.map(function(t){var n=t[0],i=t[1];return[e(n),e(i)]})},e.map2MaxMin=function(t,e,n){return i(t,e,function(t,e){var i=t[0],o=t[1],a=e[0],r=e[1];return[n(i,a),n(o,r)]})},e.toggleClass=function(t,e,n){e?t.classList.add(n):t.classList.remove(n)},e.toRadian=o,e.scaleAngle=a,e.toAngle=r,e.toPieAngle=function(t){return r(1,t)},e.speedTest=function(t,e){var n,i=[];return{start:function(){n=performance.now()},end:function(){var o=performance.now();if(i.push(o-n),i.length>=e){var a=i.reduce(function(t,e){return t+e},0);console.log(t,a/i.length),i=[]}}}},e.toScales=function(t){return t.reduce(function(t,e,n){return 0!==n&&t.push(e?1:0),t},[])},e.roundPercentageTotals=function(t){var e=(t=t.map(function(t){return Math.round(t)})).reduce(function(t,e){return t+e},0);if(100!=e){var n=t.indexOf(Math.max.apply(Math,t));t[n]=t[n]-(e-100)}return t}},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(4),a=n(5),r=n(6),s=n(0);function c(t,e,n){for(var i=[],o=[],a=1;a<t.columns.length;a++){var r=t.columns[a][0];i.push(e(t.colors[r])),o.push("none")}return{draw:function(t,e,o,a,r,s){i.forEach(function(i,o){i.drw(t,e,o+1,a(o+1)[1],a(o+1)[0],r,n,s)})},setVisible:function(t){for(var e=1;e<t.length;e++)o[e-1]=t[e]?"in":"out"},scale:function(t,e,a,r,s,c){o.forEach(function(t,e){"in"===t&&(n[e]=Math.min(1,n[e]+.1),1===n[e]&&(o[e]="none")),"out"===t&&(n[e]=Math.max(0,n[e]-.1),0===n[e]&&(o[e]="none"))}),i.forEach(function(i,o){0!==n[o]&&i.drw(t,e,o+1,r(o+1)[1],r(o+1)[0],s,n,c)})},setRange:function(){},setHover:function(){}}}function u(t,e,n,i){for(var o=[],a=1;a<t.columns.length;a++){var r=t.columns[a][0];o.push(e(t.colors[r],n,i))}return{draw:function(t,e,n,i,a){o.forEach(function(n,o){n.drw(t,e,o+1,i(o+1)[1],i(o+1)[0],a)})},setVisible:function(t){for(var e=1;e<t.length;e++)o[e-1].set(t[e])},scale:function(t,e,n,i,a){o.forEach(function(n,o){n.sc(t,e,o+1,i(o+1)[1],i(o+1)[0],a)})},setRange:function(){},setHover:function(){}}}function l(t,e,n,i,o,a,r,c,u){for(var l=t.columns[0],h=a.height/(c-r),f=a.width/(o.end-o.start),m=0,d=i.start;d<=i.end;d++){var v=(l[d]-o.start)*f*s.devicePixelRatio;u(v,(a.height-(t.columns[e][d]-r)*h)*s.devicePixelRatio,0==m?v:m,a.height*s.devicePixelRatio),m=v}}function h(t,e,n){for(var i=10,o=1;o<t.columns.length;o++)if(e[o])for(var a=n.start;a<=n.end;a++)i=Math.max(i,t.columns[o][a]);return[[10*Math.ceil(i/10),0]]}function f(t,e,n){for(var i=10,o=function(t,e,n){for(var i=1;i<t.columns.length;i++)if(e[i])return t.columns[i][n];return 0}(t,e,n.start),a=1;a<t.columns.length;a++)if(e[a])for(var r=n.start;r<=n.end;r++)i=Math.max(i,t.columns[a][r]),o=Math.min(o,t.columns[a][r]);return[[10*Math.ceil(i/10),10*Math.floor(o/10)]]}function m(t,e,n){for(var i=[],o=1;o<t.columns.length;o++){var a=10,r=0;if(e[o]){r=t.columns[o][n.start];for(var s=n.start;s<=n.end;s++)a=Math.max(a,t.columns[o][s]),r=Math.min(r,t.columns[o][s])}i.push([10*Math.ceil(a/10),10*Math.floor(r/10)])}var c=i[0],u=c[0],l=c[1],h=i[1],f=h[0];return u>f?f*=1.2:u*=1.2,[[u,l],[f,h[1]]]}function d(t,e,n,i,o,a,r,c,u,l){for(var h=t.columns[0],f=a.height/(c-r),m=a.width/(o.end-o.start),d=0,v=i.start;v<=i.end;v++){for(var g=(h[v]-o.start)*m*s.devicePixelRatio,p=0,R=1;R<e;R++)p+=(t.columns[R][v]-r)*f*l[R-1];var y=p+(t.columns[e][v]-r)*f*l[e-1];u(g,(a.height-y)*s.devicePixelRatio,0===d?g:d,(a.height-p)*s.devicePixelRatio),d=g}}function v(t,e,n){for(var i=10,o=n.start;o<=n.end;o++){for(var a=0,r=1;r<t.columns.length;r++)e[r]&&(a+=t.columns[r][o]);i=Math.max(i,a)}return[[10*Math.ceil(i/10),0]]}function g(t,e,n,i,o,a,r,c,u,l){for(var h=t.columns[0],f=a.width/(o.end-o.start),m=i.start;m<=i.end;m++){for(var d=(h[m]-o.start)*f*s.devicePixelRatio,v=0,g=0,p=0,R=1;R<t.columns.length;R++){var y=t.columns[R][m]*l[R-1];R<e&&(v+=y),R<=e&&(p+=y),g+=y}u(d,p/g*a.height*s.devicePixelRatio,d,v/g*a.height*s.devicePixelRatio)}}function p(t,e,n){for(var i=[],o=1;o<t.columns.length;o++)i.push(t.columns[o][e]*n[o-1]);var a=i.reduce(function(t,e){return t+e},0);return s.roundPercentageTotals(i.map(function(t){return t/a*100}))}e.toScalesItemOver=c,e.recountPercent=p;var R={text:"rgba(37, 37, 41, 0.5)",line:"rgba(24, 45, 59, 0.1)"},y={text:"rgba(163, 177, 194, 0.6)",line:"rgba(255, 255, 255, 0.1)"};e.day=864e5;var x=function(){function t(t,e){var n=this;this.url=e,this.lines=5,this.visibility=[],this.isMove=!1,this.isBars=!1,this.isPercentage=!1,this.isSingleton=!1,this.styleWatchers=[],this.timeChangeWatchers=[],this.visibilityWatchers=[],this.destroyWatchers=[],this.use=function(t,e,i,o,a,r){n.adapter.use(n.jsonData,t,n.visibility,n.indexRange,n.timeRange,e,i,o,a,r)},this.useMin=function(t,e,i,o,a,r){n.adapter.use(n.jsonData,t,n.visibility,n.miniMap.indexRange,n.miniMap.timeRange,e,i,o,a,r)},this.isZoom=!1,this.yearDatas=null,this.zoomWatchers=[],this.zoomStartWatchers=[],this.changeFactoryWatchers=[],this.drawPieWatchers=[],this.drawPersentsWatchers=[],this.pieZoomWatchers=[],this.hoverWatchers=[],this.asSoonAsReady=fetch("./json/"+e+"/overview.json").then(function(t){return t.json()}).then(function(e){return n.setDate(t,e)}).then(function(){return n})}return t.prototype.changeStyle=function(t){this.style="day"===t?R:y,this.styleWatchers.forEach(function(t){return t()})},t.prototype.onChangeStyle=function(t){this.styleWatchers.push(t)},t.prototype.setDate=function(t,n){var i=this;this.changeStyle("day"),this.jsonData=n;var p=n.columns[0];this.timeRange={start:p[Math.max(Math.round(.8*p.length),1)],end:p[p.length-1]},this.indexRange=b(this.jsonData,this.timeRange),this.viewport={width:t,height:Math.round(.6*t)},this.miniMap={viewport:{width:t-10,height:46},indexRange:{start:1,end:p.length-1},timeRange:{start:p[1]-2*e.day,end:p[p.length-1]+2*e.day}},this.visibility=n.columns.map(function(){return!0}),this.isBars=("bar"===n.types[n.columns[1][0]]||n.stacked)&&!n.percentage,this.isPercentage=n.percentage,this.isSingleton=2===n.columns.length,n.y_scaled?(this.zIndex="-1",this.cr=function(t,e,n){return u(t,r.pl,e,n)},this.adapter={use:l,toMax:m}):n.percentage?(this.zIndex="1",this.cr=function(t){return c(t,o.ar,s.toScales(i.visibility))},this.adapter={use:g,toMax:function(){return[[100,0]]}}):n.stacked?(this.zIndex="1",this.cr=function(t){return c(t,a.plg,s.toScales(i.visibility))},this.adapter={use:d,toMax:v}):this.isSingleton?(this.zIndex="1",this.cr=function(t){return c(t,a.plg,s.toScales(i.visibility))},this.adapter={use:l,toMax:h}):(this.zIndex="-1",this.cr=function(t,e,n){return u(t,r.pl,e,n)},this.adapter={use:l,toMax:f})},t.prototype.onTimeRangeChange=function(t){this.timeChangeWatchers.push(t)},t.prototype.setTimeRange=function(t,e){this.indexRange=b(this.jsonData,e,t,this.timeRange,this.indexRange),this.timeRange=e,this.timeChangeWatchers.forEach(function(n){return n(t,e)})},t.prototype.uncheckOther=function(t){var e=this;this.visibility=this.visibility.map(function(e,n){return n===t}),this.visibilityWatchers.forEach(function(t){return t(e.visibility)})},t.prototype.toggleVisibility=function(t){var e=this;this.visibility[t]=!this.visibility[t],this.visibilityWatchers.forEach(function(t){return t(e.visibility)})},t.prototype.onVisibilityChange=function(t){this.visibilityWatchers.push(t)},t.prototype.onDestroy=function(t){this.destroyWatchers.push(t)},t.prototype.toMaxVisibleValue=function(t){return this.adapter.toMax(this.jsonData,this.visibility,t)},t.prototype.loadingData=function(t){this.zoomedTime=t,this.isPercentage||(this.asSoonAsLoading=fetch(function(t,e){var n=new Date(e);return"./json/"+t+"/"+n.getUTCFullYear()+"-"+("0"+(n.getMonth()+1)).slice(-2)+"/"+("0"+n.getDate()).slice(-2)+".json"}(this.url,t)).then(function(t){return t.json()}))},t.prototype.unzoom=function(){var t=this;if(this.isPercentage)return this.percentageUnZoom();this.isZoom=!1;var e=this.yearDatas,n=e.yearData,i=e.miniMapTimeRange,o=e.timeRange,a=e.indexRange,r=(o.start-this.timeRange.start)/16,s=(o.end-this.timeRange.end)/16,c=(i.start-this.miniMap.timeRange.start)/16,u=(i.end-this.miniMap.timeRange.end)/16,l=function(e){t.timeRange.start+=r/e,t.timeRange.end+=s/e,t.miniMap.timeRange.start+=c/e,t.miniMap.timeRange.end+=u/e};this.isSingleton?(this.zoomStart(n,a,o,n.columns.map(function(){return!0})),this.singletonUnzooming(16,n,l)):(this.zoomStart(n,a,o,this.visibility),this.simpleUnzooming(n,this.jsonData,l))},t.prototype.singletonUnzooming=function(t,e,n){var i=this,o=function(r){requestAnimationFrame(function(){if(n(1),16===r)i.jsonData=e,i.indexRange=b(i.jsonData,i.timeRange),i.miniMap.indexRange=b(i.jsonData,i.miniMap.timeRange),i.visibility=e.columns.map(function(){return!0}),i.isBars=!0,i.cr=function(t){return c(t,a.plg,s.toScales(i.visibility))},i.changeFactoryWatchers.forEach(function(t){return t(!1)});else if(i.indexRange=b(i.jsonData,i.timeRange),i.miniMap.indexRange=b(i.jsonData,i.miniMap.timeRange),i.zoomWatchers.forEach(function(e){return e(i.timeRange,(t-r)/10)}),1===r)return;o(r-1)})};o(t)},t.prototype.simpleUnzooming=function(t,e,n){var i=this,o=M(this.miniMap.timeRange),a=P(t,e,this.miniMap.timeRange,o),r=function(e){requestAnimationFrame(function(){n(e>14?3:1),19===e&&(i.jsonData=a(3)),16===e&&(i.jsonData=a(6)),14===e&&(i.jsonData=a(12)),10===e&&(i.jsonData=t),i.indexRange=b(i.jsonData,i.timeRange),i.miniMap.indexRange=b(i.jsonData,i.miniMap.timeRange),i.zoomWatchers.forEach(function(t){return t(i.timeRange)}),1!==e&&r(e-1)})};r(20)},t.prototype.zoom=function(){var t=this;if(this.isPercentage)return this.percentageZoom();this.yearDatas={yearData:this.jsonData,indexRange:M(this.indexRange),timeRange:M(this.timeRange),miniMapIndexRange:M(this.miniMap.indexRange),miniMapTimeRange:M(this.miniMap.timeRange)},this.asSoonAsLoading.then(function(n){t.isZoom=!0;var i=n.columns[0],o=i[1],a=i[i.length-1],r={start:t.zoomedTime,end:t.zoomedTime+e.day},s=b(n,r),c=(r.start-t.timeRange.start)/16,u=(r.end-t.timeRange.end)/16,l=(o-t.miniMap.timeRange.start)/16,h=(a-t.miniMap.timeRange.end)/16,f=function(e){t.timeRange.start+=c/e,t.timeRange.end+=u/e,t.miniMap.timeRange.start+=l/e,t.miniMap.timeRange.end+=h/e};t.isSingleton?(t.zoomStart(n,s,r,n.columns.map(function(){return!0})),t.singletonZoomin(n,f)):(t.zoomStart(n,s,r,t.visibility),t.simpleZooming(r,t.jsonData,n,f))})},t.prototype.singletonZoomin=function(t,e){var n=this,i=function(o){requestAnimationFrame(function(){if(e(1),n.indexRange=b(n.jsonData,n.timeRange),n.miniMap.indexRange=b(n.jsonData,n.miniMap.timeRange),n.zoomWatchers.forEach(function(t){return t(n.timeRange,(16-o)/10)}),16===o)return n.jsonData=t,n.visibility=t.columns.map(function(){return!0}),n.indexRange=b(n.jsonData,n.timeRange),n.miniMap.indexRange=b(n.jsonData,n.miniMap.timeRange),n.isBars=!1,n.cr=function(t,e,n){return u(t,r.pl,e,n)},void n.changeFactoryWatchers.forEach(function(t){return t(!0)});i(o+1)})};i(1)},t.prototype.simpleZooming=function(t,e,n,i){var o=this,a=P(e,n,this.miniMap.timeRange,t),r=function(t){requestAnimationFrame(function(){i(t>14?3:1),11===t&&(o.jsonData=a(12)),14===t&&(o.jsonData=a(6)),17===t&&(o.jsonData=a(3)),20===t&&(o.jsonData=n),o.indexRange=b(o.jsonData,o.timeRange),o.miniMap.indexRange=b(o.jsonData,o.miniMap.timeRange),o.zoomWatchers.forEach(function(t){return t(o.timeRange)}),20!==t&&r(t+1)})};r(1)},t.prototype.onZoom=function(t){this.zoomWatchers.push(t)},t.prototype.onZoomStart=function(t){this.zoomStartWatchers.push(t)},t.prototype.onChangeFactory=function(t){this.changeFactoryWatchers.push(t)},t.prototype.zoomStart=function(t,e,n,i){this.zoomStartWatchers.forEach(function(o){return o(t,e,n,i)})},t.prototype.percentageZoom=function(){this.yearDatas={yearData:this.jsonData,indexRange:M(this.indexRange),timeRange:M(this.timeRange),miniMapIndexRange:M(this.miniMap.indexRange),miniMapTimeRange:M(this.miniMap.timeRange)},this.isZoom=!0;var t={start:this.zoomedTime,end:this.zoomedTime+e.day},n=b(this.jsonData,t),i=this.jsonData.columns[0],o={start:Math.max(this.zoomedTime-3*e.day,i[1]),end:Math.min(this.zoomedTime+4*e.day,i[i.length-1])},a=p(this.jsonData,n.start,s.toScales(this.visibility));this.drawPieWatchers.forEach(function(t){return t(a,n)}),this.pieZoomingMiniMap(t,o)},t.prototype.pieZoomingMiniMap=function(t,e){var n=this,i=(t.start-this.timeRange.start)/16,o=(t.end-this.timeRange.end)/16,a=(e.start-this.miniMap.timeRange.start)/16,r=(e.end-this.miniMap.timeRange.end)/16,s=function(t){requestAnimationFrame(function(){n.timeRange.start+=i,n.timeRange.end+=o,n.miniMap.timeRange.start+=a,n.miniMap.timeRange.end+=r,n.indexRange=b(n.jsonData,n.timeRange),n.miniMap.indexRange=b(n.jsonData,n.miniMap.timeRange),n.pieZoomWatchers.forEach(function(t){return t(n.timeRange)}),16!==t&&s(t+1)})};s(1)},t.prototype.onDrawPie=function(t){this.drawPieWatchers.push(t)},t.prototype.onDrawPersent=function(t){this.drawPersentsWatchers.push(t)},t.prototype.percentageUnZoom=function(){this.isZoom=!1;var t=p(this.jsonData,this.indexRange.start,s.toScales(this.visibility));this.drawPersentsWatchers.forEach(function(e){return e(t)}),this.pieZoomingMiniMap(this.yearDatas.timeRange,this.yearDatas.miniMapTimeRange)},t.prototype.onPieZoom=function(t){this.pieZoomWatchers.push(t)},t.prototype.hover=function(t,e,n,i,o){this.hoverWatchers.forEach(function(a){return a(t,e,n,i,o)})},t.prototype.onHover=function(t){this.hoverWatchers.push(t)},t}();function M(t){return{start:t.start,end:t.end}}function P(t,e,n,o){return function(a){var r=b(t,n),s=r.start,c=r.end,u=t.columns.map(function(t){return t.slice(s,c)}),l=function(t,e){var n=1;for(;t[n]<e.start;)n++;n=Math.max(n-2,1);var i=t.length-1;for(;t[i]>e.end;)i--;return i=Math.min(i+3,t.length-1),{start:n,end:i}}(u[0],o);return i({},e,{columns:u.map(function(t,n){var i=e.columns[n],o=i[0],r=i.slice(1);if("x"===o){var s=r.reduce(function(t,e,n){return n%a==0&&t.push(e),t},[]);return[o].concat(t.slice(0,l.start),s,t.slice(l.end,t.length-1))}var c=function(t){return 12===t?2:6===t?4:8}(a);s=r.reduce(function(t,e,n){return n%a==0?t.push(e):t[t.length-1]+=e,t},[]);if(12===a){var u=t[l.start]/c;s=s.map(function(t){return t>u?t/1.5:1.5*t})}return[o].concat(t.slice(0,l.start).map(function(t){return t/c}),s,t.slice(l.end,t.length-1).map(function(t){return t/c}))})})}}function b(t,e,n,i,o){void 0===n&&(n="visible");for(var a=t.columns[0],r=1;a[r]<e.start;)r++;r=Math.max(r-1,1);for(var s=a.length-1;a[s]>e.end;)s--;return{start:r,end:s=Math.min(s+1,a.length-1)}}e.DataService=x},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(1);n(16),window.onload=function(){var t=Math.min(window.innerWidth,500);i.drawContainer(["1","2","3","4","5"].map(function(e){return new o.DataService(t,e)}),t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1),a=n(7),r=n(13),s=n(14);e.drawContainer=function(t,e){var n=document.createElement("div");document.body.append(n),n.id="app",n.style.width=e+"px",function(t,e){var n,i=document.createElement("div");function o(){n=!0,document.body.classList.remove("night"),i.innerHTML="Switch to Night Mode",e.map(function(t){return t.changeStyle("day")})}t.appendChild(i),i.classList.add("mode"),o(),i.onclick=function(){n?(n=!1,document.body.classList.add("night"),i.innerHTML="Switch to Day Mode",e.map(function(t){return t.changeStyle("night")})):o()},e[0].onDestroy(function(){i.onclick=null,t.removeChild(i),i=null,t=null})}(n,t),Promise.all(t.map(function(t){return t.asSoonAsReady})).then(function(t){return t.forEach(function(t){return function(t,e,n){!function(t,e,n){var a=i.toDiv(t,"header");a.innerHTML="<h1>Chart "+e.url+"</h1>",n<400&&a.classList.add("double");var r=i.toDiv(a,"zoom");r.innerHTML='<svg class="loupe" height="27" width="27"><circle cx="12" cy="12" r="9"></circle><line x1="7" x2="17" y1="12" y2="12"></line><line x1="19" x2="27" y1="19" y2="27"></line></svg><span>Zoom Out</span>';var s=i.toDiv(a,"range");function c(){var t;t=function(t){if(t.isZoom){var e=new Date(t.timeRange.start+o.day/2);return i.days[e.getUTCDay()]+", "+e.getUTCDate()+" "+i.month[e.getMonth()]+" "+e.getFullYear()}var n=new Date(t.timeRange.start),a=new Date(t.timeRange.end);return n.getUTCDate()+" "+i.month[n.getMonth()]+" "+n.getFullYear()+" - "+a.getUTCDate()+" "+i.month[a.getMonth()]+" "+a.getFullYear()}(e),g!==t&&(p&&clearTimeout(p),p=setTimeout(function(){g=t,d?v=!0:R()},35))}c(),e.onTimeRangeChange(c),e.onZoom(c),e.onPieZoom(c);var u=!1;function l(){u=!0}e.onZoomStart(l),e.onDrawPie(l),e.onDrawPersent(l),r.onclick=function(){u||e.unzoom()},e.onDestroy(function(){r.onclick=null});var h=i.toDiv(s,"changer"),f=i.toDiv(s,"changer");f.classList.add("hide");var m=!0,d=!1,v=!1,g="",p=null;function R(){m?y(h,f):y(f,h)}function y(t,e){d=!0,m=!m,e.innerHTML=g,e.classList.add("animation"),t.classList.add("animation"),e.classList.remove("hide"),t.classList.add("hiding");var n=u;u&&(a.classList.toggle("in-zoom"),u=!1),setTimeout(function(){t.classList.add("hide"),t.classList.remove("hiding","animation"),e.classList.remove("animation"),n&&(e.classList.toggle("reverse"),t.classList.toggle("reverse")),setTimeout(function(){d=!1,v&&(v=!1,R())},50)},300)}}(e,t,n);var c=i.toDiv(e,"chart");t.isSingleton&&c.classList.add("as-sg"),a.toChart(c,t),s.toMiniMap(c,t),r.toMenu(c,t)}(t,n,e)})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ar=function(t){return{drw:function(e,n,i,o,a,r,s){n.fillStyle=t,n.beginPath();var c=[];e(i,r,o,a,function(t,e,i,o){n.lineTo(t,e),c.push([i,o])},s);for(var u=c.length-1;u>=0;u--){var l=c[u],h=l[0],f=l[1];n.lineTo(h,f)}n.closePath(),n.fill()}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.plg=function(t){return{drw:function(e,n,i,o,a,r,s,c){void 0===c&&(c=1),n.fillStyle=t,n.globalAlpha=c,e(i,r,o,a,function(t,e,i,o){n.beginPath(),n.moveTo(i,o),n.lineTo(i,e),n.lineTo(t,e),n.lineTo(t,o),n.closePath(),n.fill()},s)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.pl=function(t,e,n){var o=1===n?"none":"in";function a(o,a,r,s,c,u){a.lineWidth=e*i.devicePixelRatio,a.globalAlpha=n,a.strokeStyle=t,a.beginPath(),o(r,u,s,c,function(t,e){return a.lineTo(t,e)}),a.stroke()}return{drw:a,set:function(t){o=t?"in":"out"},sc:function(t,e,i,r,s,c){"in"===o&&1===(n=Math.min(1,n+.1))&&(o="none"),"out"===o&&0===(n=Math.max(0,n-.1))&&(o="none"),0!==n&&a(t,e,i,r,s,c)}}}},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),a=n(8),r=n(9),s=n(10),c=n(12);e.toChart=function(t,e){var n,u,l,h,f,m=[],d=[],v=e.jsonData,g=v.columns,p=v.colors,R=e.viewport,y=o.drawConvas(t,R.width,R.height+2),x=y.getContext("2d"),M=!1;x.textAlign="center",x.lineJoin="bevel",x.lineCap="butt";var P=c.toTimes(t,e),b=o.drawConvas(t,R.width-10,R.height+11,"lines"),w=b.getContext("2d");w.font=10*o.devicePixelRatio+"px Arial",w.fillStyle=e.style.text,w.strokeStyle=e.style.line,e.onChangeStyle(function(){w.fillStyle=e.style.text,w.strokeStyle=e.style.line,M||(w.clearRect(0,0,b.width,b.height),(m=E(n,1)).forEach(function(t){return t.drw(w)}))}),w.lineWidth=o.devicePixelRatio,b.style.zIndex=e.zIndex,n=e.toMaxVisibleValue(e.indexRange),(m=E(n,1)).forEach(function(t){return t.drw(w)});var D=function(t){return n.length>1?n[t-1]:n[0]},T=e.cr(e.jsonData,2,1);T.draw(e.use,x,e.indexRange,D,R),s.toPopUp(t,e,D),e.onZoomStart(function(t,i,a,r){u=e.adapter.toMax(t,r,i),A(l=o.map2MaxMin(u,n,function(t,e){return(t-e)/10}),10),S(10)}),e.onChangeFactory(function(){(T=e.cr(e.jsonData,2,1)).draw(e.use,x,e.indexRange,function(){return u[0]},R)}),e.onZoom(function(t,n){var i=e.toMaxVisibleValue(e.indexRange);x.clearRect(0,0,y.width,y.height),T.scale(e.use,x,e.indexRange,function(t){return i.length>1?i[t-1]:i[0]},R,n)}),e.onTimeRangeChange(function(t){T.setRange(e.indexRange),C(t)}),e.onVisibilityChange(function(t){T.setVisible(t),C("visible")});var j=null;function S(t){null!=j&&cancelAnimationFrame(j),function t(e,i){j=requestAnimationFrame(function(){n=o.map2MaxMin(n,l,function(t,e){return t+e}),e!==i&&t(e+1,i)})}(1,t)}function C(t){h&&(cancelAnimationFrame(h),n=o.mapMaxMin(n,function(t){return 10*Math.floor(t/10)})),P.rdt(t),u=e.toMaxVisibleValue(e.indexRange),l=o.map2MaxMin(u,n,function(t,e){return Math.round((t-e)/10)}),L(0,10),A(l,10),S(10)}function L(t,n){h=requestAnimationFrame(function(){if(x.clearRect(0,0,y.width,y.height),T.scale(e.use,x,e.indexRange,D,R),t!==n)return L(t+1,n)})}function E(t,n){var r=[],s=t.map(function(t,n){var i=t[0],o=t[1],a=10*Math.floor(i/10);return{dx:R.height/(i-o),lastLine:a,dOneLine:(a-o)/e.lines,color:p[g[n+1][0]],isShow:e.visibility[n+1],label:o,min:o}});do{var c=R.height+10-(s[0].label-s[0].min)*s[0].dx;r.push(a.ln(s,c*o.devicePixelRatio,(R.width-10)*o.devicePixelRatio,n)),s=s.map(function(t){return i({},t,{label:t.label+t.dOneLine})})}while(s[0].label<=s[0].lastLine);return r}function A(t,e){t.every(function(t){var e=t[0],n=t[1];return 0===e&&0===n})||(null!=f&&cancelAnimationFrame(f),m.forEach(function(t){t.hd(),d.push(t)}),m=E(u,0),function t(e,i){f=requestAnimationFrame(function(){w.clearRect(0,0,b.width,b.height);var a=R.height/(n[0][0]-n[0][1]);function r(t){return 0!=t.up(w,(R.height+10-(t.vl[0].label-n[0][1])*a)*o.devicePixelRatio)}m.forEach(r),d=d.filter(r),e>=i||t(e+1,i)})}(0,e))}e.onDrawPie(function(t,n){M=!0,w.clearRect(0,0,b.width,b.height),function(t,n){var i=0,o=W/18,a=0,s=k/2/16,c=60/360,u=(1-c)/16,l=function(h){requestAnimationFrame(function(){x.clearRect(0,0,y.width,y.height),19!==h?(x.save(),F(i),0===h?V(t):1===h?H(t):h<=18&&(U(t,c,a),c+=u,a+=s),x.restore(),i+=o,l(h+1)):(T=r.toPiesItemOver(e.jsonData,e.visibility)).draw(e.use,x,n,D,R)})};l(0)}(t,n)}),e.onDrawPersent(function(t){M=!1,function(t){var n=W,i=-W/18,o=W,a=-W/16,r=1,s=function(c){requestAnimationFrame(function(){if(x.clearRect(0,0,y.width,y.height),x.save(),F(n),0===c?V(t):1===c?H(t):c<=18&&(U(t,r,o),r+=-(1-60/360)/16,o+=a),x.restore(),n+=i,0===c)return(T=e.cr(e.jsonData,2,1)).draw(e.use,x,e.indexRange,D,R),void m.forEach(function(t){return t.drw(w)});s(c-1)})};s(18)}(t)});var Z=R.height,k=R.width,_=Z/2,W=k/2,z=Math.PI/2,O=Z/100;function F(t){x.beginPath(),x.moveTo(k/2*o.devicePixelRatio,0),t<_?(x.lineTo((k-t)*o.devicePixelRatio,0),x.arc((k-t)*o.devicePixelRatio,t*o.devicePixelRatio,t*o.devicePixelRatio,-z,0),x.lineTo(k*o.devicePixelRatio,(Z-t)*o.devicePixelRatio),x.arc((k-t)*o.devicePixelRatio,(Z-t)*o.devicePixelRatio,t*o.devicePixelRatio,0,z),x.lineTo(t*o.devicePixelRatio,Z*o.devicePixelRatio),x.arc(t*o.devicePixelRatio,(Z-t)*o.devicePixelRatio,t*o.devicePixelRatio,z,2*z),x.lineTo(0,t*o.devicePixelRatio),x.arc(t*o.devicePixelRatio,t*o.devicePixelRatio,t*o.devicePixelRatio,2*z,3*z)):(x.arc((k-t)*o.devicePixelRatio,_*o.devicePixelRatio,_*o.devicePixelRatio,-z,z),x.lineTo(t*o.devicePixelRatio,Z*o.devicePixelRatio),x.arc(t*o.devicePixelRatio,_*o.devicePixelRatio,_*o.devicePixelRatio,z,3*z)),x.closePath(),x.clip()}function V(t){t.reduceRight(function(t,e,n){x.fillStyle=p[g[n+1][0]];var i=t+e;return x.beginPath(),x.moveTo(0,(Z-t*O)*o.devicePixelRatio),x.lineTo(0,(Z-i*O)*o.devicePixelRatio),x.lineTo(k*o.devicePixelRatio,(Z-i*O)*o.devicePixelRatio),x.lineTo(k*o.devicePixelRatio,(Z-t*O)*o.devicePixelRatio),x.closePath(),x.fill(),t+e},0)}function H(t){t.reduceRight(function(e,n,i){x.fillStyle=p[g[i+1][0]];var a=e+n;return x.beginPath(),x.moveTo(0,(Z-e*O)*o.devicePixelRatio),x.lineTo(0,(Z-a*O)*o.devicePixelRatio),0===i&&x.lineTo(k*o.devicePixelRatio,0),x.lineTo(k*o.devicePixelRatio,Z/2*o.devicePixelRatio),i===t.length-1&&x.lineTo(k*o.devicePixelRatio,Z*o.devicePixelRatio),x.closePath(),x.fill(),e+n},0)}function U(t,e,n){t.reduceRight(function(i,a,r){x.fillStyle=p[g[r+1][0]];var s=i+a,c=(k-n)*o.devicePixelRatio,u=Z/2*o.devicePixelRatio;x.beginPath(),x.moveTo(c,u),x.arc(c,u,2*k*o.devicePixelRatio,o.toAngle(e,i),o.toAngle(e,s)),x.closePath(),x.fill();var l=o.toRadian(150+(360+o.scaleAngle(e,100))/2);return r===t.length-1&&1!=e&&(x.beginPath(),x.moveTo(c,u),x.arc(c,u,k*o.devicePixelRatio,l,o.toAngle(e,0)),x.closePath(),x.fill()),0===r&&1!=e&&(x.beginPath(),x.moveTo(c,u),x.arc(c,u,k*o.devicePixelRatio,o.toAngle(e,s),l),x.closePath(),x.fill()),i+a},0)}e.onHover(function(t,e){T.setHover(e),L(0,20)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ln=function(t,e,n,i){var o=0===i?"in":"none";function a(e,o){var a=t[0],r=t[1];e.globalAlpha=i,null!=r&&(e.fillStyle=a.color),(a.isShow||null==r)&&(e.textAlign="left",e.fillText(a.label.toString(),0,o-5)),null!=r&&r.isShow&&(e.fillStyle=r.color,e.textAlign="right",e.fillText(r.label.toString(),n,o-5)),e.beginPath(),e.lineTo(0,o),e.lineTo(n,o),e.stroke()}return{drw:function(t){a(t,e)},hd:function(){o="out"},up:function(t,e){return"in"===o&&1===(i=Math.min(1,i+.1))&&(o="none"),"out"===o&&0===(i=Math.max(0,i-.1))&&(o="none"),0!==i&&a(t,e),i},vl:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1);e.toPiesItemOver=function(t,e){for(var n,a,r=[],s=[],c=[],u=[],l=[],h=1;h<t.columns.length;h++)r.push(e[h]?1:0),s.push("none"),c.push(0),u.push(0),l.push(0);function f(e,o){var a=.02*o.height*i.devicePixelRatio,r=o.width/2*i.devicePixelRatio,s=o.height/2*i.devicePixelRatio;e.font=18*i.devicePixelRatio+"px Arial",n.reduceRight(function(n,o,c){e.fillStyle=t.colors[t.columns[c+1][0]];var l=n+o,h=i.toPieAngle(n+o/2),f=r+Math.cos(h)*a*u[c],m=s+Math.sin(h)*a*u[c];return e.beginPath(),e.moveTo(f,m),e.arc(f,m,s-a,i.toPieAngle(n),i.toPieAngle(l)),e.closePath(),e.fill(),l},0),e.fillStyle="white",n.reduceRight(function(t,n){var o=Math.round(n);if(o){var a=i.toPieAngle(t+n/2);e.fillText(o+"%",r+Math.cos(a)*s/3*2,s+Math.sin(a)*s/3*2+12)}return t+n},0)}function m(){u=u.map(function(){return 0}),l=l.map(function(){return 0})}return{draw:function(e,i,a,s,c,u){n=o.recountPercent(t,a.start,r),f(i,c)},setVisible:function(t){m();for(var e=1;e<t.length;e++)s[e-1]=t[e]?"in":"out"},scale:function(e,a,h,m,d,v){s.some(function(t){return"none"!==t})?(s.forEach(function(t,e){"in"===t&&(r[e]=Math.min(1,r[e]+.1),1===r[e]&&(s[e]="none")),"out"===t&&(r[e]=Math.max(0,r[e]-.1),0===r[e]&&(s[e]="none"))}),n=o.recountPercent(t,h.start,r)):c.some(function(t){return 0!==t})?n=i.map2(n,c,function(t,e){return t+e}):u=i.map2(u,l,function(t,e,n){var i=Math.min(Math.max(t+e,0),1);return 0!==i&&1!==i||(l[n]=0),i}),f(a,d)},setRange:function(e){m(),a=o.recountPercent(t,e.start,r),c=i.map2(a,n,function(t,e){return(t-e)/10})},setHover:function(t){c=c.map(function(){return 0}),t.forEach(function(t,e){t!==u[e]&&(l[e]=t>0?.05:-.05)})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(1),a=n(11);e.toPopUp=function(t,e,n){var r,s=e.viewport,c=s.width,u=s.height,l=i.toDiv(t,"hover");l.style.height=u+"px",l.style.width=c+"px";var h=i.toDiv(l,"pop-up"),f=!1,m=!1;function d(t){return 360*t/100}function v(t,n){var a=e.jsonData,r=e.visibility,s=e.indexRange,c=function(t,n){var i=Math.atan((e.viewport.height/2-n)/(t-e.viewport.width/2))/Math.PI*180;return t>e.viewport.width/2?210-i:n<e.viewport.height/2||i<=30?30-i:390-i}(t,n),u=o.recountPercent(a,s.start,i.toScales(r));if(function(t,n){var i=e.viewport.height/2-n,o=t-e.viewport.width/2;return Math.sqrt(o*o+i*i)>e.viewport.height/2-20}(t,n))return e.hover(u,u.map(function(){return 0}),t,n,!0);var l=[];u.reduceRight(function(t,e){var n=t+e;return l.push(d(t)<c&&c<=d(n)?1:0),t+e},0),e.hover(u,l.reverse(),t,n,!1)}e.onVisibilityChange(function(t){f||r.block.setVisibility(t)}),e.onChangeFactory(function(){C(),S()}),e.onDrawPie(function(){x(),C(),S(),f=!0}),e.onDrawPersent(function(){x(),C(),S(),f=!1}),S(),e.onHover(function(t,e,n,o,a){r.block.setPersent(t,e,n,o),i.toggleClass(h,a,"invisible")});var g,p,R=null,y=function(t,i,a){null!=g&&cancelAnimationFrame(g),g=requestAnimationFrame(function(){if(f)return v(t,i);var s,l,m=c/(e.timeRange.end-e.timeRange.start),d=new Date(e.timeRange.start+Math.round(t/m)),g=e.isZoom?e.isSingleton?(s=d,l=3e5,Math.round(s.getTime()/l)*l):d.setUTCMinutes(0,0,0):d.setUTCHours(0,0,0,0),p=e.jsonData.columns[0].findIndex(function(t){return t===g});if(-1===p)return x();a&&!e.isZoom&&e.loadingData(e.isBars?g+o.day:g),g!==R&&(R=g,function(t,i,a){var s=e.jsonData.columns,c=s[0],l=s.slice(1),f=(t-e.timeRange.start)*i;if(e.isBars){var m=c[a+1];if(!m)return;r.line[0].style.transform="translate(0, 0)",r.line[0].style.width=f+"px",r.line[1].style.transform="translate("+(m-e.timeRange.start)*i+"px, 0)",r.line[1].style.width=(e.timeRange.end-m)*i+"px",r.block.setData(t+(e.isBars&&!e.isZoom?o.day:0),a+1,f)}else r.line[0].style.transform="translate("+f+"px, 0)",r.dots.forEach(function(t,e){var i=u/(n(e+1)[0]-n(e+1)[1]),o=l[e][a]-n(e+1)[1],r=u-o*i,s=r.toString();t.style.transform="translate("+f+"px, "+s+"px)"}),r.block.setData(t,a,f);h.classList.remove("invisible")}(g,m,p))})};function x(){h.classList.add("invisible"),m||l.addEventListener("mousemove",D)}function M(t){t.target===l&&(l.removeEventListener("touchmove",b),P(p,!0))}function P(t,e){t.stopPropagation();var n=t.targetTouches[0],i=n.clientX,o=n.clientY,a=n.target.getBoundingClientRect(),r=i-a.left,s=o-a.top;y(r,s,e)}function b(t){1===t.targetTouches.length&&(P(t,!1),p=t)}function w(t){m=!0,l.removeEventListener("mousemove",D),1===t.targetTouches.length&&t.target===l&&(P(t,!1),l.addEventListener("touchmove",b,{passive:!1}),p=t)}function D(t){if(e.isMove)x();else{var n=t.clientX,i=t.clientY,o=t.currentTarget.getBoundingClientRect(),a=n-o.left,r=i-o.top;y(a,r,!1)}}function T(t){x()}function j(t){f||l.removeEventListener("mousemove",D);var e=t.clientX,n=t.clientY,i=t.currentTarget.getBoundingClientRect(),o=e-i.left,a=n-i.top;y(o,a,!0)}function S(){var t=e.jsonData,n=t.columns,o=(n[0],n.slice(1)),s=t.colors;if(h.classList.add("invisible"),e.isBars)r={line:[i.toDiv(h,"shadow"),i.toDiv(h,"shadow")],dots:[],block:a.toPopUpBlock(e,h)};else{var c=[];e.isPercentage&&e.isZoom||c.push(i.toDiv(h,"line"));var u=e.isPercentage?[]:o.map(function(t){var e=t[0],n=i.toDiv(h,"dot");return n.style.borderColor=s[e],n});r={line:c,dots:u,block:a.toPopUpBlock(e,h)}}}function C(){r.line.forEach(function(t){return h.removeChild(t)}),r.dots.forEach(function(t){return h.removeChild(t)}),r.block.destroy(),h.removeChild(r.block.panel),r=null}l.addEventListener("click",j),l.addEventListener("mousemove",D),l.addEventListener("mouseleave",T),l.addEventListener("touchstart",w,{passive:!1}),l.addEventListener("touchend",M),e.onVisibilityChange(function(t){if(x(),r.dots.length)for(var e=1;e<t.length;e++)i.toggleClass(r.dots[e-1],!t[e],"invisible")}),e.onTimeRangeChange(function(){return x()}),e.onZoomStart(function(){return x()}),e.onDestroy(function(){l.removeEventListener("click",j),l.removeEventListener("mousemove",D),l.removeEventListener("mouseleave",T),l.removeEventListener("touchstart",w),l.removeEventListener("touchend",M)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);function o(t){var e=t.toString();return e.length>6?e.substr(0,e.length-6)+"."+e.substr(e.length-6,1)+"M":e.length>4?e.substr(0,e.length-3)+"K":e}e.toPopUpBlock=function(t,e){var n,a=t.viewport.width,r=i.toDiv(e,"panel");r.onclick=function(e){t.isZoom?t.unzoom():t.zoom(),event.stopPropagation()},t.isZoom&&t.isPercentage||(n=i.toDiv(r,"date"),i.toDiv(r,"icon").innerHTML="&#10095;");var s=t.jsonData,c=s.columns,u=(c[0],c.slice(1)),l=s.names,h=s.colors,f=u.map(function(t){var e=i.toDiv(r,"block"),n=i.toDiv(e,"name"),o=i.toDiv(e,"value");return n.innerHTML=l[t[0]],o.style.color=h[t[0]],{block:e,value:o,num:0,name:n,nameVal:l[t[0]],key:t[0],isShow:!0}});if(t.isBars&&f.length>1){var m=i.toDiv(r,"block"),d=i.toDiv(m,"name"),v=i.toDiv(m,"value");d.innerHTML="All",f.push({block:m,value:v,num:0,name:d,nameVal:"All",key:"all",isShow:!0})}function g(t,e){t.isShow=e,i.toggleClass(t.block,!e,"invisible")}function p(){var t=f.reduce(function(t,e){return e.isShow?t+e.num:t},0);f.forEach(function(e){e.isShow&&(e.name.innerHTML="<b>"+Math.round(e.num/t*100)+"%</b> "+e.nameVal)})}return{setData:function(e,s,c){var u=new Date(e);n.innerHTML=i.days[u.getUTCDay()].slice(0,3)+", "+u.getUTCDate()+" "+i.month[u.getUTCMonth()].slice(0,3),t.isZoom?t.isSingleton?n.innerHTML=("0"+u.getUTCHours()).slice(-2)+":"+("0"+u.getUTCMinutes()).slice(-2):n.innerHTML+=" "+("0"+u.getUTCHours()).slice(-2)+":00":n.innerHTML+=" "+u.getUTCFullYear();var l=t.jsonData.columns,h=(l[0],l.slice(1));if(f.forEach(function(t,e){"all"!==t.key&&(t.num=h[e][s],t.value.innerHTML=o(t.num))}),t.isPercentage&&p(),t.isBars&&f.length>1){var m=f[f.length-1],d=f.filter(function(t){return"all"!==t.key&&t.isShow});d.length>1?(m.num=d.reduce(function(t,e){return t+e.num},0),m.value.innerHTML=o(m.num),g(m,!0)):g(m,!1)}r.style.transform="translate("+(c+(c>a/2?-170:10))+"px, 10px)"},setPersent:function(t,e,n,i){f.forEach(function(n,i){g(n,!!e[i]),n.num=t[i],n.value.innerHTML=n.num+"%"}),r.style.transform="translate("+(n+10)+"px, "+(i-50)+"px)"},setVisibility:function(e){for(var n=1;n<e.length;n++)g(f[n-1],e[n]);t.isPercentage&&p()},destroy:function(){r.onclick=null},panel:r}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.toTimes=function(t,e){var n=e.viewport.width,o=i.drawConvas(t,n,16,"text"),a=o.getContext("2d");a.font=10*i.devicePixelRatio+"px Arial",a.fillStyle=e.style.text;var r,s,c,u=30,l=70,h=20,f=0,m=e.jsonData,d=!1;e.onChangeStyle(function(){a.fillStyle=e.style.text,P()});var v=1;function g(t){c=n/(t.end-t.start),v=Math.min(v+.1,1),P()}function p(t){return void 0!==m.columns[0][t]}function R(t){return p(t)?m.columns[0][t]:null}function y(t){return x(t,e.timeRange)}function x(t,e){return(R(t)-e.start)*(n/(e.end-e.start))}function M(t){var n;a.fillText((n=new Date(R(t)),e.isZoom?("0"+n.getUTCHours()).slice(-2)+":00":n.getUTCDate()+" "+i.month[n.getUTCMonth()].slice(0,3)),y(t)*i.devicePixelRatio,13*i.devicePixelRatio)}function P(){if(!d){a.clearRect(0,0,o.width,o.height),a.globalAlpha=v;for(var t=r;t<=s;t+=f)M(t)}}e.onZoomStart(function(t,e,i){m=t,c=n/(i.end-i.start),v=0,D(e,i)}),e.onZoom(g),e.onPieZoom(g),e.onDrawPie(function(){a.clearRect(0,0,o.width,o.height),d=!0}),e.onDrawPersent(function(){d=!1}),D(e.indexRange,e.timeRange),P();var b=null;function w(t){var i=e.timeRange;c=n/(i.end-i.start),t(),function(){var t=r-f;p(t)&&y(t)>-u&&(r=t),y(r)<-u&&(r+=f);var e=s+f;p(e)&&y(e)<n+u&&(s=e),y(s)>n+u&&(s-=f)}(),P()}function D(t,e){for(c=n/(e.end-e.start),r=t.start;x(r,e)<h;)r++;for(f=1;x(r+f,e)<l+h;)f*=2;for(r-f>t.start&&(r-=f),s=r;p(s+f)&&x(s,e)<=n;)s+=f}return{rdt:function(t){d||(null!==b&&cancelAnimationFrame(b),b=requestAnimationFrame(function(){switch(t){case"left":return w(function(){!function(){if(1!==f){var t=f/2,e=s-t;if(p(e)&&(R(s)-R(e))*c>l){for(var n=e;y(n)>=-u;)n-=t;r=n,f=t}}}(),function(){var t=2*f,e=s-f;if(p(e)&&(R(s)-R(e))*c<l){for(var n=s;y(n)>=-u;)n-=f;r=n,f=t}}()});case"right":return w(function(){!function(){if(1!==f){var t=f/2,e=r+t;if(p(e)&&(R(e)-R(r))*c>l){for(var i=e;y(i)<=n+u;)i+=t;s=i,f=t}}}(),function(){var t=2*f,e=r+f;if(p(e)&&(R(e)-R(r))*c<l){for(var i=r;y(i)<=n+u;)i+=t;s=i,f=t}}()});case"move":return function t(){var e=r-f;p(e)&&y(e)>-u&&(s-=f,r=e,t())}(),function t(){var e=s+f;p(e)&&y(e)<n+u&&(r+=f,s=e,t())}(),void P();default:return}}))}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.toMenu=function(t,e){var n=i.toDiv(t,"menu"),a=[];function r(){e.jsonData.columns.forEach(function(t,r){var s=t[0];"x"===s?a.push(o):a.push(function(t,e,n,o,a,r){var s=i.toDiv(r,"checkbox");s.innerHTML+=o,requestAnimationFrame(function(){s.appendChild(function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.innerHTML+='<circle class="shadow" cx="22" cy="21" r="'+e+'" style="fill: '+t+';"></circle><circle cx="22" cy="21" r="13" style="fill: '+t+';"></circle>',n.innerHTML+='<polyline class="check-mark" points="16,21.5 20,25.5 27,17.5"></polyline><circle class="cover" cx="22" cy="21" r="12"></circle>',n}(n,s.clientWidth))});var c=!1,u=null;function l(t){e=t,i.toggleClass(s,e,"as-check")}return s.onmousedown=s.ontouchstart=function(){u=setTimeout(function(){c=!0,a.uncheckOther(t)},500)},s.onmouseup=s.ontouchend=function(){u&&clearTimeout(u)},s.onclick=function(){c||a.toggleVisibility(t),c=!1},l(e),{setValue:l,destroy:function(){s.onclick=null,s.onmousedown=null,s.onmouseup=null,s.ontouchstart=null,s.ontouchend=null,r.removeChild(s),r=null}}}(r,e.visibility[r],e.jsonData.colors[s],e.jsonData.names[s],e,n))})}e.isSingleton||r(),e.onChangeFactory(function(t){t?r():(a.forEach(function(t){return t.destroy()}),a=[])}),e.onVisibilityChange(function(t){return t.forEach(function(t,e){return a.length&&a[e].setValue(t)})}),e.onDestroy(function(){a.forEach(function(t){return t.destroy()}),t.removeChild(n)})};var o={setValue:function(){},destroy:function(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(15);e.toMiniMap=function(t,e){var n=i.toDiv(t,"mini-map");!function(t,e){var n,o,a,r,s=e.miniMap,c=i.drawConvas(t,s.viewport.width,s.viewport.height),u=c.getContext("2d");function l(t){return n.length>1?n[t-1]:n[0]}n=e.toMaxVisibleValue(s.indexRange);var h=e.cr(e.jsonData,1,1);function f(){var t=e.toMaxVisibleValue(e.miniMap.indexRange);u.clearRect(0,0,c.width,c.height),h.draw(e.useMin,u,e.indexRange,function(e){return t.length>1?t[e-1]:t[0]},s.viewport)}function m(){r&&(cancelAnimationFrame(r),n=i.mapMaxMin(n,function(t){return 10*Math.floor(t/10)})),o=e.toMaxVisibleValue(s.indexRange),a=i.map2MaxMin(o,n,function(t,e){return Math.round((t-e)/10)}),function t(o){r=requestAnimationFrame(function(){if(u.clearRect(0,0,c.width,c.height),h.scale(e.useMin,u,e.indexRange,l,s.viewport),10!==o)return n=i.map2MaxMin(n,a,function(t,e){return t+e}),t(o+1)})}(0)}h.draw(e.useMin,u,e.indexRange,l,s.viewport),e.onZoom(f),e.onPieZoom(f),e.onVisibilityChange(function(t){h.setVisible(t),m()})}(n,e),o.drawLens(n,e),e.onChangeFactory(function(t){i.toggleClass(n,t,"fade")})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.drawLens=function(t,e){var n=i.toDiv(t,"lens"),o=i.toDiv(t,"cover");o.style.left="0px";var a=i.toDiv(t,"cover");a.style.right="0px";var r=document.createElement("span");n.appendChild(r),r.style.left="-5px";var s=document.createElement("span");n.appendChild(s),s.style.right="-5px";var c=e.miniMap,u=e.miniMap.viewport.width,l=u/(c.timeRange.end-c.timeRange.start);function h(t){l=u/(c.timeRange.end-c.timeRange.start),d(t)}e.onZoom(h),e.onPieZoom(h);var f=!1;function m(){f=!f}e.onZoomStart(m),e.onDrawPersent(m),e.onDrawPie(m);var d=function(t){var e=Math.floor((t.end-t.start)*l),i=Math.floor((t.start-c.timeRange.start)*l);n.style.width=e+"px",n.style.left=i+"px",o.style.width=i+"px",a.style.left=i+e+"px"};function v(t,i){e.isMove=!0;var o,a=(e.timeRange.end-e.timeRange.start)*l,h=(e.timeRange.start-c.timeRange.start)*l;function m(n){o&&cancelAnimationFrame(o),o=requestAnimationFrame(function(){return function(n){switch(t){case r:if(f)return;if((m=Math.min(Math.max(h+n-i,0),h+a-20))===h)return;e.setTimeRange("left",{start:Math.floor(c.timeRange.start+m/l),end:e.timeRange.end});break;case s:if(f)return;var o=Math.min(u-h,Math.max(20,a+n-i));if(o===a)return;e.setTimeRange("right",{start:e.timeRange.start,end:Math.floor(c.timeRange.start+(h+o)/l)});break;default:var m;if((m=Math.min(Math.max(h+n-i,0),u-a))===h)return;e.setTimeRange("move",{start:Math.floor(c.timeRange.start+m/l),end:Math.floor(c.timeRange.start+(m+a)/l)})}}(n)})}function d(t){t.stopPropagation(),t.preventDefault(),m(t.clientX)}function v(t){1===t.targetTouches.length&&(t.stopPropagation(),t.preventDefault(),m(t.targetTouches[0].clientX))}function g(){e.isMove=!1,document.removeEventListener("mousemove",d),document.removeEventListener("touchmove",v),document.removeEventListener("mouseup",g),n.removeEventListener("touchend",g)}document.addEventListener("mousemove",d),document.addEventListener("touchmove",v,{passive:!1}),document.addEventListener("mouseup",g),n.addEventListener("touchend",g)}d(e.timeRange),e.onTimeRangeChange(function(t,e){return d(e)}),n.addEventListener("mousedown",function(t){t.stopPropagation(),t.preventDefault(),v(t.target,t.clientX)}),n.addEventListener("touchstart",function(t){1===t.targetTouches.length&&(t.stopPropagation(),t.preventDefault(),v(t.targetTouches[0].target,t.targetTouches[0].clientX))},{passive:!1})}},function(t,e,n){}]);