!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e,n){"use strict";function i(t,e,n){return t.reduce(function(t,i,o){return t.push(n(i,e[o],o)),t},[])}function o(t){return t*Math.PI/180}function r(t,e){return e*t*360/100}function a(t,e){return o(150+r(t,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.month=["January","February","March","April","May","June","July","August","September","October","November","December"],e.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e.day=864e5,e.devicePixelRatio=window.devicePixelRatio,e.drawConvas=function(t,n,i,o){var r=document.createElement("canvas");return o&&r.classList.add(o),r.setAttribute("width",(n*e.devicePixelRatio).toString()),r.setAttribute("height",(i*e.devicePixelRatio).toString()),r.style.height=i+"px",r.style.width=n+"px",t.appendChild(r),r},e.toDiv=function(t,e){var n=document.createElement("div");return e&&n.classList.add(e),t.appendChild(n),n},e.map2=i,e.mapMaxMin=function(t,e){return t.map(function(t){var n=t[0],i=t[1];return[e(n),e(i)]})},e.map2MaxMin=function(t,e,n){return i(t,e,function(t,e){var i=t[0],o=t[1],r=e[0],a=e[1];return[n(i,r),n(o,a)]})},e.toggleClass=function(t,e,n){e?t.classList.add(n):t.classList.remove(n)},e.toRadian=o,e.scaleAngle=r,e.toAngle=a,e.toPieAngle=function(t){return a(1,t)},e.speedTest=function(t,e){var n,i=[];return{start:function(){n=performance.now()},end:function(){var o=performance.now();if(i.push(o-n),i.length>=e){var r=i.reduce(function(t,e){return t+e},0);console.log(t,r/i.length),i=[]}}}},e.toScales=function(t){return t.reduce(function(t,e,n){return 0!==n&&t.push(e?1:0),t},[])},e.roundPercentageTotals=function(t){var e=(t=t.map(function(t){return Math.round(t)})).reduce(function(t,e){return t+e},0);if(100!==e){var n=t.indexOf(Math.max.apply(Math,t));t[n]=t[n]-(e-100)}return t},e.copyRange=function(t){return{start:t.start,end:t.end}},e.findIndex=function(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n;return-1}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.recountAndUseSimplePintsChart=function(t,e,n,i,o,r,a,s,c){for(var u=t.columns[0],l=r.height/(s-a),f=r.width/(o.end-o.start),h=0,d=i.start;d<=i.end;d++){var m=(u[d]-o.start)*f*devicePixelRatio;c(m,(r.height-(t.columns[e][d]-a)*l)*devicePixelRatio,0===h?m:h,r.height*devicePixelRatio),h=m}},e.recountDoubleMax=function(t,e,n){for(var i=[],o=1;o<t.columns.length;o++){for(var r=10,a=t.columns[o][n.start],s=n.start;s<=n.end;s++)r=Math.max(r,t.columns[o][s]),a=Math.min(a,t.columns[o][s]);i.push([10*Math.ceil(r/10),10*Math.floor(a/10)])}var c=i[0],u=c[0],l=c[1],f=i[1],h=f[0],d=f[1];return e[1]&&e[2]&&(u>h?h*=1.2:u*=1.2),[[u,l],[h,d]]},e.recountSimpleMax=function(t,e,n){for(var i=10,o=1;o<t.columns.length;o++)if(e[o])for(var r=n.start;r<=n.end;r++)i=Math.max(i,t.columns[o][r]);return[[10*Math.ceil(i/10),0]]},e.recountSimpleMaxAndMin=function(t,e,n){for(var i=10,o=function(t,e,n){for(var i=1;i<t.columns.length;i++)if(e[i])return t.columns[i][n];return 0}(t,e,n.start),r=1;r<t.columns.length;r++)if(e[r])for(var a=n.start;a<=n.end;a++)i=Math.max(i,t.columns[r][a]),o=Math.min(o,t.columns[r][a]);return[[10*Math.ceil(i/10),10*Math.floor(o/10)]]},e.recountAndUseChartBySumm=function(t,e,n,i,o,r,a,s,c,u){for(var l=t.columns[0],f=r.height/(s-a),h=r.width/(o.end-o.start),d=0,m=i.start;m<=i.end;m++){for(var v=(l[m]-o.start)*h*devicePixelRatio,g=0,p=1;p<e;p++)g+=(t.columns[p][m]-a)*f*u[p-1];var y=g+(t.columns[e][m]-a)*f*u[e-1];c(v,(r.height-y)*devicePixelRatio,0===d?v:d,(r.height-g)*devicePixelRatio),d=v}},e.recountMaxBySumm=function(t,e,n){for(var i=10,o=n.start;o<=n.end;o++){for(var r=0,a=1;a<t.columns.length;a++)e[a]&&(r+=t.columns[a][o]);i=Math.max(i,r)}return[[10*Math.ceil(i/10),0]]},e.recountAndUsePercentChartOver=function(t){return function(e,n,i,o,r,a,s,c,u,l){for(var f=e.columns[0],h=a.width/(r.end-r.start),d=0,m=o.start;m<=o.end;m++){for(var v=(f[m]-r.start)*h*devicePixelRatio,g=0,p=0,y=0,R=1;R<e.columns.length;R++){var x=e.columns[R][m]*l[R-1];R<n&&(g+=x),R<=n&&(y+=x),p+=x}u(v,y/p*a.height*devicePixelRatio,t?v:d,g/p*a.height*devicePixelRatio),d=v}}},e.recountPercent=function(t,e,n){for(var i=[],o=1;o<t.columns.length;o++)i.push(t.columns[o][e+2]*n[o-1]);var r=i.reduce(function(t,e){return t+e},0);return i.map(function(t){return t/r*100})}},function(t,e,n){"use strict";e.a=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toScalableFactory=function(t,e,n){for(var i=[],o=[],r=1;r<t.columns.length;r++){var a=t.columns[r][0];i.push(e(t.colors[a])),o.push("none")}return{draw:function(t,e,o,r,a,s){i.forEach(function(i,o){i.drw(t,e,o+1,r(o+1)[1],r(o+1)[0],a,n,s)})},setVisible:function(t){for(var e=1;e<t.length;e++)o[e-1]=t[e]?"in":"out"},scale:function(t,e,r,a,s,c){o.forEach(function(t,e){"in"===t&&(n[e]=Math.min(1,n[e]+.1),1===n[e]&&(o[e]="none")),"out"===t&&(n[e]=Math.max(0,n[e]-.1),0===n[e]&&(o[e]="none"))}),i.forEach(function(i,o){0!==n[o]&&i.drw(t,e,o+1,a(o+1)[1],a(o+1)[0],s,n,c)})},setRange:function(){},setHover:function(){}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toPoligonItemOver=function(t){return{drw:function(e,n,i,o,r,a,s,c){void 0===c&&(c=1),n.fillStyle=t,n.globalAlpha=c,e(i,a,o,r,function(t,e,i,o){n.beginPath(),n.moveTo(i,o),n.lineTo(i,e),n.lineTo(t,e),n.lineTo(t,o),n.closePath(),n.fill()},s)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toIndexRange=function(t,e){for(var n=t.columns[0],i=1;n[i]<e.start;)i++;i=Math.max(i-1,1);for(var o=n.length-1;n[o]>e.end;)o--;return{start:i,end:o=Math.min(o+1,n.length-1)}}},function(t,e,n){"use strict";(function(t){var i=n(2),o=setTimeout;function r(){}function a(t){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function s(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,a._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void u(e.promise,t)}c(e.promise,i)}else(1===t._state?c:u)(e.promise,t._value)})):t._deferreds.push(e)}function c(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof a)return t._state=3,t._value=e,void l(t);if("function"==typeof n)return void h((i=n,o=e,function(){i.apply(o,arguments)}),t)}t._state=1,t._value=e,l(t)}catch(e){u(t,e)}var i,o}function u(t,e){t._state=2,t._value=e,l(t)}function l(t){2===t._state&&0===t._deferreds.length&&a._immediateFn(function(){t._handled||a._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)s(t,t._deferreds[e]);t._deferreds=null}function f(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function h(t,e){var n=!1;try{t(function(t){n||(n=!0,c(e,t))},function(t){n||(n=!0,u(e,t))})}catch(t){if(n)return;n=!0,u(e,t)}}a.prototype.catch=function(t){return this.then(null,t)},a.prototype.then=function(t,e){var n=new this.constructor(r);return s(this,new f(t,e,n)),n},a.prototype.finally=i.a,a.all=function(t){return new a(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var o=i.length;function r(t,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(e){r(t,e)},n)}i[t]=a,0==--o&&e(i)}catch(t){n(t)}}for(var a=0;a<i.length;a++)r(a,i[a])})},a.resolve=function(t){return t&&"object"==typeof t&&t.constructor===a?t:new a(function(e){e(t)})},a.reject=function(t){return new a(function(e,n){n(t)})},a.race=function(t){return new a(function(e,n){for(var i=0,o=t.length;i<o;i++)t[i].then(e,n)})},a._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){o(t,0)},a._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.a=a}).call(this,n(28).setImmediate)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(9),o=n(21);n(27),n(31),window.onload=function(){var t=Math.min(window.innerWidth,600);i.drawContainer(["1","2","3","4","5"].map(function(e){return new o.DataService(t,e)}),t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(10),r=n(17),a=n(18),s=n(19);e.drawContainer=function(t,e){var n=document.createElement("div");document.body.appendChild(n),n.id="app",n.style.width=e+"px",function(t,e){var n,i=document.createElement("div");function o(){n=!0,document.body.classList.remove("night"),i.innerHTML="Switch to Night Mode",e.map(function(t){return t.changeStyle("day")})}t.appendChild(i),i.classList.add("mode"),o(),i.onclick=function(){n?(n=!1,document.body.classList.add("night"),i.innerHTML="Switch to Day Mode",e.map(function(t){return t.changeStyle("night")})):o()},e[0].onDestroy(function(){i.onclick=null,t.removeChild(i),i=null,t=null})}(n,t),Promise.all(t.map(function(t){return t.asSoonAsReady})).then(function(t){return t.forEach(function(t){return function(t,e,n){r.toHeader(e,t,n);var c=i.toDiv(e,"chart");t.isSingleton&&c.classList.add("as-sg"),o.toChart(c,t),s.toMiniMap(c,t),a.toMenu(c,t)}(t,n,e)})})}},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(11),a=n(12),s=n(13),c=n(14),u=n(16);e.toChart=function(t,e){var n,l,f,h,d,m=[],v=[],g=e.jsonData,p=g.columns,y=g.colors,R=e.viewport,x=o.drawConvas(t,R.width,R.height+2),P=x.getContext("2d"),M=!1;P.textAlign="center",P.lineJoin="bevel",P.lineCap="butt";var w=u.toTimes(t,e),b=o.drawConvas(t,R.width-10,R.height+11,"lines"),T=b.getContext("2d");T.font=10*o.devicePixelRatio+"px Arial",T.fillStyle=e.style.text,T.strokeStyle=e.style.line,e.onChangeStyle(function(){T.fillStyle=e.style.text,T.strokeStyle=e.style.line,M||(T.clearRect(0,0,b.width,b.height),(m=O(n,1)).forEach(function(t){return t.drw(T)}))}),T.lineWidth=o.devicePixelRatio,b.style.zIndex=e.zIndex,n=e.toMaxVisibleValue(e.indexRange),(m=O(n,1)).forEach(function(t){return t.drw(T)});var D=function(t){return n.length>1?n[t-1]:n[0]},S=function(t){void 0===t&&(t=D);var n=e.toFactory(e.jsonData,2,1);return n.draw(e.use,P,e.indexRange,t,R),n},j=S();c.toPopUp(t,e,D),e.onZoomStart(function(t,i,r,a){l=e.adapter.toMax(t,a,i),A(f=o.map2MaxMin(l,n,function(t,e){return(t-e)/10}),10),C(10)}),e.onSingletonZoom(function(){j=S(function(){return l[0]})}),e.onZoom(function(t,n){var i=e.toMaxVisibleValue(e.indexRange);P.clearRect(0,0,x.width,x.height),j.scale(e.use,P,e.indexRange,function(t){return i.length>1?i[t-1]:i[0]},R,n)}),e.onTimeRangeChange(function(t){j.setRange(e.indexRange),E(t)}),e.onVisibilityChange(function(t){j.setVisible(t),E("visible")});var _=null;function C(t){null!=_&&cancelAnimationFrame(_),function t(e,i){_=requestAnimationFrame(function(){n=o.map2MaxMin(n,f,function(t,e){return t+e}),e!==i&&t(e+1,i)})}(1,t)}function E(t){h&&(cancelAnimationFrame(h),n=o.mapMaxMin(n,function(t){return 10*Math.floor(t/10)})),w.rdt(t),l=e.toMaxVisibleValue(e.indexRange),f=o.map2MaxMin(l,n,function(t,e){return Math.round((t-e)/10)}),L(0,10),A(f,10),C(10)}function L(t,n){h=requestAnimationFrame(function(){if(P.clearRect(0,0,x.width,x.height),j.scale(e.use,P,e.indexRange,D,R),t!==n)return L(t+1,n)})}function O(t,n){var r=[],s=t.map(function(t,n){var i=t[0],o=t[1],r=10*Math.floor(i/10);return{dx:R.height/(i-o),lastLine:r,dOneLine:(r-o)/5,color:y[p[n+1][0]],isShow:e.visibility[n+1],label:o,min:o}});do{var c=R.height+10-(s[0].label-s[0].min)*s[0].dx;r.push(a.ln(s,c*o.devicePixelRatio,(R.width-10)*o.devicePixelRatio,n)),s=s.map(function(t){return i({},t,{label:t.label+t.dOneLine})})}while(s[0].label<=s[0].lastLine);return r}function A(t,e){t.every(function(t){var e=t[0],n=t[1];return 0===e&&0===n})||(null!=d&&cancelAnimationFrame(d),m.forEach(function(t){t.hd(),v.push(t)}),m=O(l,0),function t(e,i){d=requestAnimationFrame(function(){T.clearRect(0,0,b.width,b.height);var r=R.height/(n[0][0]-n[0][1]);function a(t){return 0!=t.up(T,(R.height+10-(t.vl[0].label-n[0][1])*r)*o.devicePixelRatio)}m.forEach(a),v=v.filter(a),e>=i||t(e+1,i)})}(0,e))}var I=s.pieAnimator(x,P,R,e.jsonData);function F(t,e){j.setHover(e),L(0,20)}e.onDrawPie(function(t,n){M=!0,T.clearRect(0,0,b.width,b.height),I.drawPie(t).then(function(){(j=r.toPieFactory(e.jsonData,e.visibility)).draw(e.use,P,n,D,R),e.onHover(F)})}),e.onDrawPersent(function(t){e.offHover(F),M=!1,I.drawPersents(t).then(function(){j=S(),m.forEach(function(t){return t.drw(T)})})})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(0);e.toPieFactory=function(t,e){for(var n,r,a=[],s=[],c=[],u=[],l=[],f=1;f<t.columns.length;f++)a.push(e[f]?1:0),s.push("none"),c.push(0),u.push(0),l.push(0);function h(e,i){var r=.02*i.height*o.devicePixelRatio,a=i.width/2*o.devicePixelRatio,s=i.height/2*o.devicePixelRatio;e.font=18*o.devicePixelRatio+"px Arial",n.reduceRight(function(n,i,c){e.fillStyle=t.colors[t.columns[c+1][0]];var l=n+i,f=o.toPieAngle(n+i/2),h=a+Math.cos(f)*r*u[c],d=s+Math.sin(f)*r*u[c];return e.beginPath(),e.moveTo(h,d),e.arc(h,d,s-r,o.toPieAngle(n),o.toPieAngle(l)),e.closePath(),e.fill(),l},0),e.fillStyle="white";var c=o.roundPercentageTotals(n);n.reduceRight(function(t,n,i){if(n){var l=o.toPieAngle(t+n/2);e.fillText(c[i]+"%",a+Math.cos(l)*(s/3*2+r*u[i]),s+Math.sin(l)*(s/3*2+r*u[i])+12)}return t+n},0)}function d(){u=u.map(function(){return 0}),l=l.map(function(){return 0})}return{draw:function(e,o,r,s,c,u){n=i.recountPercent(t,r.start,a),h(o,c)},scale:function(e,r,f,d,m,v){s.some(function(t){return"none"!==t})?(s.forEach(function(t,e){"in"===t&&(a[e]=Math.min(1,a[e]+.1),1===a[e]&&(s[e]="none")),"out"===t&&(a[e]=Math.max(0,a[e]-.1),0===a[e]&&(s[e]="none"))}),n=i.recountPercent(t,f.start,a)):c.some(function(t){return 0!==t})?n=o.map2(n,c,function(t,e){return t+e}):u=o.map2(u,l,function(t,e,n){var i=Math.min(Math.max(t+e,0),1);return 0!==i&&1!==i||(l[n]=0),i}),h(r,m)},setVisible:function(t){d();for(var e=1;e<t.length;e++)s[e-1]=t[e]?"in":"out"},setRange:function(e){d(),r=i.recountPercent(t,e.start,a),c=o.map2(r,n,function(t,e){return(t-e)/10})},setHover:function(t){c=c.map(function(){return 0}),t.forEach(function(t,e){t!==u[e]&&(l[e]=t>0?.05:-.05)})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ln=function(t,e,n,i){var o=0===i?"in":"none";function r(e,o){var r=t[0],a=t[1];e.globalAlpha=i,null!=a&&(e.fillStyle=r.color),(r.isShow||null==a)&&(e.textAlign="left",e.fillText(r.label.toString(),0,o-5)),null!=a&&a.isShow&&(e.fillStyle=a.color,e.textAlign="right",e.fillText(a.label.toString(),n,o-5)),e.beginPath(),e.lineTo(0,o),e.lineTo(n,o),e.stroke()}return{drw:function(t){r(t,e)},hd:function(){o="out"},up:function(t,e){return"in"===o&&1===(i=Math.min(1,i+.1))&&(o="none"),"out"===o&&0===(i=Math.max(0,i-.1))&&(o="none"),0!==i&&r(t,e),i},vl:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.pieAnimator=function(t,e,n,o){var r=o.colors,a=o.columns,s=n.height,c=n.width,u=s/2,l=c/2,f=Math.PI/2,h=s/100;function d(t){e.beginPath(),e.moveTo(c/2*devicePixelRatio,0),t<u?(e.lineTo((c-t)*devicePixelRatio,0),e.arc((c-t)*devicePixelRatio,t*devicePixelRatio,t*devicePixelRatio,-f,0),e.lineTo(c*devicePixelRatio,(s-t)*devicePixelRatio),e.arc((c-t)*devicePixelRatio,(s-t)*devicePixelRatio,t*devicePixelRatio,0,f),e.lineTo(t*devicePixelRatio,s*devicePixelRatio),e.arc(t*devicePixelRatio,(s-t)*devicePixelRatio,t*devicePixelRatio,f,2*f),e.lineTo(0,t*devicePixelRatio),e.arc(t*devicePixelRatio,t*devicePixelRatio,t*devicePixelRatio,2*f,3*f)):(e.arc((c-t)*devicePixelRatio,u*devicePixelRatio,u*devicePixelRatio,-f,f),e.lineTo(t*devicePixelRatio,s*devicePixelRatio),e.arc(t*devicePixelRatio,u*devicePixelRatio,u*devicePixelRatio,f,3*f)),e.closePath(),e.clip()}function m(t){t.reduceRight(function(t,n,i){e.fillStyle=r[a[i+1][0]];var o=t+n;return e.beginPath(),e.moveTo(0,(s-t*h)*devicePixelRatio),e.lineTo(0,(s-o*h)*devicePixelRatio),e.lineTo(c*devicePixelRatio,(s-o*h)*devicePixelRatio),e.lineTo(c*devicePixelRatio,(s-t*h)*devicePixelRatio),e.closePath(),e.fill(),t+n},0)}function v(t){t.reduceRight(function(n,i,o){e.fillStyle=r[a[o+1][0]];var u=n+i;return e.beginPath(),e.moveTo(0,(s-n*h)*devicePixelRatio),e.lineTo(0,(s-u*h)*devicePixelRatio),0===o&&e.lineTo(c*devicePixelRatio,0),e.lineTo(c*devicePixelRatio,s/2*devicePixelRatio),o===t.length-1&&e.lineTo(c*devicePixelRatio,s*devicePixelRatio),e.closePath(),e.fill(),n+i},0)}function g(t,n,o){t.reduceRight(function(u,l,f){e.fillStyle=r[a[f+1][0]];var h=u+l,d=(c-o)*devicePixelRatio,m=s/2*devicePixelRatio;e.beginPath(),e.moveTo(d,m),e.arc(d,m,2*c*devicePixelRatio,i.toAngle(n,u),i.toAngle(n,h)),e.closePath(),e.fill();var v=i.toRadian(150+(360+i.scaleAngle(n,100))/2);return f===t.length-1&&1!==n&&(e.beginPath(),e.moveTo(d,m),e.arc(d,m,c*devicePixelRatio,v,i.toAngle(n,0)),e.closePath(),e.fill()),0===f&&1!==n&&(e.beginPath(),e.moveTo(d,m),e.arc(d,m,c*devicePixelRatio,i.toAngle(n,h),v),e.closePath(),e.fill()),u+l},0)}return{drawPie:function(n){return new Promise(function(i){var o=0,r=l/18,a=0,s=c/2/16,u=60/360,f=(1-u)/16,h=function(c){requestAnimationFrame(function(){e.clearRect(0,0,t.width,t.height),19!==c?(e.save(),d(o),0===c?m(n):1===c?v(n):c<=18&&(g(n,u,a),u+=f,a+=s),e.restore(),o+=r,h(c+1)):i()})};h(0)})},drawPersents:function(n){return new Promise(function(i){var o=l,r=-l/18,a=l,s=-l/16,c=1,u=function(l){requestAnimationFrame(function(){e.clearRect(0,0,t.width,t.height),e.save(),d(o),0===l?m(n):1===l?v(n):l<=18&&(g(n,c,a),c+=-(1-60/360)/16,a+=s),e.restore(),o+=r,0!==l?u(l-1):i()})};u(18)})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(0),r=n(15);e.toPopUp=function(t,e,n){var a,s=e.viewport,c=s.width,u=s.height,l=o.toDiv(t,"hover");l.style.height=u+"px",l.style.width=c+"px";var f=o.toDiv(l,"pop-up"),h=!1,d=!1,m=!1;function v(t){return 360*t/100}function g(t,n){var r=e.jsonData,a=e.visibility,s=e.indexRange,c=function(t,n){var i=Math.atan((e.viewport.height/2-n)/(t-e.viewport.width/2))/Math.PI*180;return t>e.viewport.width/2?210-i:n<e.viewport.height/2||i<=30?30-i:390-i}(t,n),u=i.recountPercent(r,s.start,o.toScales(a));if(function(t,n){var i=e.viewport.height/2-n,o=t-e.viewport.width/2;return Math.sqrt(o*o+i*i)>e.viewport.height/2-20}(t,n))return e.hover(u,u.map(function(){return 0}),t,n,!0);var l=[];u.reduceRight(function(t,e){var n=t+e;return l.push(v(t)<c&&c<=v(n)?1:0),t+e},0),e.hover(u,l.reverse(),t,n,!1)}e.onVisibilityChange(function(t){d||a.block.setVisibility(t)}),e.onSingletonZoom(function(){C(),_()}),e.onDrawPie(function(){P(),C(),_(),d=!0}),e.onDrawPersent(function(){P(),C(),_(),a.block.setVisibility(e.visibility),d=!1}),_(),e.onHover(function(t,e,n,i,o){a.block.setPersent(t,e,n,i),o?L():E()});var p,y,R=null,x=function(t,i,r){null!=p&&cancelAnimationFrame(p),p=requestAnimationFrame(function(){if(d)return g(t,i);var s,l,f=c/(e.timeRange.end-e.timeRange.start),h=new Date(e.timeRange.start+Math.round(t/f)),m=e.isZoom?e.isSingleton?(s=h,l=3e5,Math.round(s.getTime()/l)*l):h.setUTCMinutes(0,0,0):h.setUTCHours(0,0,0,0),v=e.jsonData.columns[0],p=o.findIndex(v,function(t){return t===m});if(-1===p)return P();r&&!e.isZoom&&a.block.setLoading(e.loadingData(e.isBars?m+o.day:m)),m!==R&&(R=m,function(t,i,r){var s=e.jsonData.columns,c=s[0],l=s.slice(1),f=(t-e.timeRange.start)*i;if(e.isBars){var h=c[r+1];if(!h)return;a.line[0].style.transform="translate(0, 0)",a.line[0].style.width=f+"px",a.line[1].style.transform="translate("+(h-e.timeRange.start)*i+"px, 0)",a.line[1].style.width=(e.timeRange.end-h)*i+"px",a.block.setData(t+(e.isBars&&!e.isZoom?o.day:0),r+1,f)}else a.line[0].style.transform="translate("+f+"px, 0)",a.dots.forEach(function(t,e){var i=u/(n(e+1)[0]-n(e+1)[1]),o=l[e][r]-n(e+1)[1],a=u-o*i,s=a.toString();t.style.transform="translate("+f+"px, "+s+"px)"}),a.block.setData(t,r,f);E()}(m,f,p))})};function P(){L(),m||l.addEventListener("mousemove",D)}function M(t){t.target===l&&(l.removeEventListener("touchmove",b),w(y,!0))}function w(t,e){t.stopPropagation();var n=t.targetTouches[0],i=n.clientX,o=n.clientY,r=n.target.getBoundingClientRect(),a=i-r.left,s=o-r.top;x(a,s,e)}function b(t){1===t.targetTouches.length&&(w(t,!1),y=t)}function T(t){m=!0,l.removeEventListener("mousemove",D),1===t.targetTouches.length&&t.target===l&&(w(t,!1),l.addEventListener("touchmove",b,{passive:!1}),y=t)}function D(t){if(e.isMove)P();else{var n=t.clientX,i=t.clientY,o=t.currentTarget.getBoundingClientRect(),r=n-o.left,a=i-o.top;x(r,a,!1)}}function S(t){P()}function j(t){d||l.removeEventListener("mousemove",D);var e=t.clientX,n=t.clientY,i=t.currentTarget.getBoundingClientRect(),o=e-i.left,r=n-i.top;x(o,r,!0)}function _(){var t=e.jsonData,n=t.columns,i=(n[0],n.slice(1)),s=t.colors;if(L(),e.isBars)a={line:[o.toDiv(f,"shadow"),o.toDiv(f,"shadow")],dots:[],block:r.toPopUpBlock(e,f)};else{var c=[];e.isPercentage&&e.isZoom||c.push(o.toDiv(f,"line"));var u=e.isPercentage?[]:i.map(function(t){var e=t[0],n=o.toDiv(f,"dot");return n.style.borderColor=s[e],n});a={line:c,dots:u,block:r.toPopUpBlock(e,f)}}}function C(){a.line.forEach(function(t){return f.removeChild(t)}),a.dots.forEach(function(t){return f.removeChild(t)}),a.block.destroy(),f.removeChild(a.block.panel),a=null}function E(){h||(h=!0,f.classList.remove("invisible"),e.isZoom&&e.isPercentage||f.classList.add("animation"))}function L(){h=!1,f.classList.add("invisible"),f.classList.remove("animation"),!e.isZoom||e.isPercentage}l.addEventListener("click",j),l.addEventListener("mousemove",D),l.addEventListener("mouseleave",S),l.addEventListener("touchstart",T,{passive:!1}),l.addEventListener("touchend",M),e.onVisibilityChange(function(t){if(P(),a.dots.length)for(var e=1;e<t.length;e++)o.toggleClass(a.dots[e-1],!t[e],"invisible")}),e.onTimeRangeChange(function(){return P()}),e.onZoomStart(function(){return P()}),e.onDestroy(function(){l.removeEventListener("click",j),l.removeEventListener("mousemove",D),l.removeEventListener("mouseleave",S),l.removeEventListener("touchstart",T),l.removeEventListener("touchend",M)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);function o(t){var e=i.drawConvas(t,20,20,"icon"),n=e.getContext("2d");n.strokeStyle="#d2d5d7",n.lineWidth=2*i.devicePixelRatio;var o,r=e.width,a=e.height,s=a/2,c=a/2-2*i.devicePixelRatio,u=Math.sqrt(2)/2*c,l=315,f=90;function h(){o=setTimeout(function(){360===(l+=5)&&(l=0),n.clearRect(0,0,r,a),n.beginPath(),n.arc(s,s,c,i.toRadian(l),i.toRadian(l+f)),n.stroke(),h()},20)}function d(){n.clearRect(0,0,r,a),n.beginPath(),n.moveTo(s+u,s-u),n.lineTo(s+c,s),n.lineTo(s+u,s+u),n.stroke()}return d(),{start:function(){h()},end:function(){clearTimeout(o),l=315,d()},destroy:function(){clearTimeout(o),t.removeChild(e),t=null}}}function r(t){var e=t.toString();return e.length>6?e.substr(0,e.length-6)+"."+e.substr(e.length-6,1)+"M":e.length>4?e.substr(0,e.length-3)+"K":e}e.toPopUpBlock=function(t,e){var n,a=t.viewport.width,s=i.toDiv(e,"panel"),c=!1;s.onclick=function(e){t.isZoom?t.unzoom():t.zoom(),e.stopPropagation(),c&&u&&u.start()};var u=null;t.isZoom&&t.isPercentage||(n=i.toDiv(s,"date"),u=o(s));var l=t.jsonData,f=l.columns,h=(f[0],f.slice(1)),d=l.names,m=l.colors,v=h.map(function(t){var e=i.toDiv(s,"block"),n=i.toDiv(e,"name"),o=i.toDiv(e,"value");return n.innerHTML=d[t[0]],o.style.color=m[t[0]],{block:e,value:o,num:0,name:n,nameVal:d[t[0]],key:t[0],isShow:!0}});if(t.isBars&&v.length>1){var g=i.toDiv(s,"block"),p=i.toDiv(g,"name"),y=i.toDiv(g,"value");p.innerHTML="All",v.push({block:g,value:y,num:0,name:p,nameVal:"All",key:"all",isShow:!0})}function R(t,e){t.isShow=e,i.toggleClass(t.block,!e,"invisible")}function x(){var t=v.reduce(function(t,e){return e.isShow?t+e.num:t},0),e=i.roundPercentageTotals(v.map(function(e){return e.isShow?e.num/t*100:0}));v.forEach(function(t,n){t.isShow&&(t.name.innerHTML="<b>"+e[n]+"%</b> "+t.nameVal)})}return{setLoading:function(t){c=!0,t.then(function(){c=!1,u&&u.end()})},setData:function(e,o,c){var u=new Date(e);n.innerHTML=i.days[u.getUTCDay()].slice(0,3)+", "+u.getUTCDate()+" "+i.month[u.getUTCMonth()].slice(0,3),t.isZoom?t.isSingleton?n.innerHTML=("0"+u.getUTCHours()).slice(-2)+":"+("0"+u.getUTCMinutes()).slice(-2):n.innerHTML+=" "+("0"+u.getUTCHours()).slice(-2)+":00":n.innerHTML+=" "+u.getUTCFullYear();var l=t.jsonData.columns,f=(l[0],l.slice(1));if(v.forEach(function(t,e){"all"!==t.key&&(t.num=f[e][o],t.value.innerHTML=r(t.num))}),t.isPercentage&&x(),t.isBars&&v.length>1){var h=v[v.length-1],d=v.filter(function(t){return"all"!==t.key&&t.isShow});d.length>1?(h.num=d.reduce(function(t,e){return t+e.num},0),h.value.innerHTML=r(h.num),R(h,!0)):R(h,!1)}s.style.transform="translate("+(c+(c>a/2?-190:20))+"px, 10px)"},setPersent:function(t,e,n,o){var r=i.roundPercentageTotals(t);v.forEach(function(t,n){R(t,!!e[n]),t.num=r[n],t.value.innerHTML=t.num+"%"}),s.style.transform="translate("+(n-85)+"px, "+(o-70)+"px)"},setVisibility:function(e){for(var n=1;n<e.length;n++)R(v[n-1],e[n]);t.isPercentage&&x()},destroy:function(){s.onclick=null,u&&u.destroy()},panel:s}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.toTimes=function(t,e){var n=e.viewport.width,o=i.drawConvas(t,n,16,"text"),r=o.getContext("2d");r.font=10*i.devicePixelRatio+"px Arial",r.fillStyle=e.style.text;var a,s,c,u=30,l=70,f=20,h=0,d=e.jsonData,m=!1;e.onChangeStyle(function(){r.fillStyle=e.style.text,M()});var v=1;function g(t){c=n/(t.end-t.start),v=Math.min(v+.1,1),M()}function p(t){return void 0!==d.columns[0][t]}function y(t){return p(t)?d.columns[0][t]:null}function R(t){return x(t,e.timeRange)}function x(t,e){return(y(t)-e.start)*(n/(e.end-e.start))}function P(t){var n;r.fillText((n=new Date(y(t)),e.isZoom?("0"+n.getUTCHours()).slice(-2)+":00":n.getUTCDate()+" "+i.month[n.getUTCMonth()].slice(0,3)),R(t)*i.devicePixelRatio,13*i.devicePixelRatio)}function M(){if(!m){r.clearRect(0,0,o.width,o.height),r.globalAlpha=v;for(var t=a;t<=s;t+=h)P(t)}}e.onZoomStart(function(t,e,i){d=t,c=n/(i.end-i.start),v=0,T(e,i)}),e.onZoom(g),e.onPieZoom(g),e.onDrawPie(function(){r.clearRect(0,0,o.width,o.height),m=!0}),e.onDrawPersent(function(){m=!1}),T(e.indexRange,e.timeRange),M();var w=null;function b(t){var i=e.timeRange;c=n/(i.end-i.start),t(),function(){var t=a-h;p(t)&&R(t)>-u&&(a=t),R(a)<-u&&(a+=h);var e=s+h;p(e)&&R(e)<n+u&&(s=e),R(s)>n+u&&(s-=h)}(),M()}function T(t,e){for(c=n/(e.end-e.start),a=t.start;x(a,e)<f;)a++;for(h=1;x(a+h,e)<l+f;)h*=2;for(a-h>t.start&&(a-=h),s=a;p(s+h)&&x(s,e)<=n;)s+=h}return{rdt:function(t){m||(null!==w&&cancelAnimationFrame(w),w=requestAnimationFrame(function(){switch(t){case"left":return b(function(){!function(){if(1!==h){var t=h/2,e=s-t;if(p(e)&&(y(s)-y(e))*c>l){for(var n=e;R(n)>=-u;)n-=t;a=n,h=t}}}(),function(){var t=2*h,e=s-h;if(p(e)&&(y(s)-y(e))*c<l){for(var n=s;R(n)>=-u;)n-=h;a=n,h=t}}()});case"right":return b(function(){!function(){if(1!==h){var t=h/2,e=a+t;if(p(e)&&(y(e)-y(a))*c>l){for(var i=e;R(i)<=n+u;)i+=t;s=i,h=t}}}(),function(){var t=2*h,e=a+h;if(p(e)&&(y(e)-y(a))*c<l){for(var i=a;p(i)&&R(i)<=n+u;)i+=t;s=i,h=t}}()});case"move":return function t(){var e=a-h;p(e)&&R(e)>-u&&(s-=h,a=e,t())}(),function t(){var e=s+h;p(e)&&R(e)<n+u&&(a+=h,s=e,t())}(),void M();default:return}}))}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);function o(t){if(t.isZoom){var e=new Date(t.timeRange.start+(t.isPercentage?i.day:i.day/2));return i.days[e.getUTCDay()]+", "+e.getUTCDate()+" "+i.month[e.getMonth()]+" "+e.getFullYear()}var n=new Date(t.timeRange.start),o=new Date(t.timeRange.end);return n.getUTCDate()+" "+i.month[n.getMonth()]+" "+n.getFullYear()+" - "+o.getUTCDate()+" "+i.month[o.getMonth()]+" "+o.getFullYear()}e.toHeader=function(t,e,n){var r=i.toDiv(t,"header");r.innerHTML="<h1>Chart "+e.url+"</h1>",n<400&&r.classList.add("double");var a=i.toDiv(r,"zoom");a.innerHTML='<svg class="loupe" height="27" width="27"><circle cx="12" cy="12" r="9"></circle><line x1="7" x2="17" y1="12" y2="12"></line><line x1="19" x2="27" y1="19" y2="27"></line></svg><span>Zoom Out</span>';var s=i.toDiv(r,"range");function c(){var t;t=o(e),g!==t&&(p&&clearTimeout(p),p=setTimeout(function(){g=t,m?v=!0:y()},35))}e.onTimeRangeChange(c),e.onZoom(c),e.onPieZoom(c);var u=!1;function l(){u=!0}e.onZoomStart(l),e.onDrawPie(l),e.onDrawPersent(l),a.onclick=function(){u||e.unzoom()},e.onDestroy(function(){a.onclick=null});var f=i.toDiv(s,"changer");f.innerHTML=o(e);var h=i.toDiv(s,"changer");h.classList.add("hide");var d=!0,m=!1,v=!1,g="",p=null;function y(){d?R(f,h):R(h,f)}function R(t,e){m=!0,d=!d,e.innerHTML=g,e.classList.add("animation"),t.classList.add("animation"),e.classList.remove("hide"),t.classList.add("hiding");var n=u;u&&(r.classList.toggle("in-zoom"),u=!1),setTimeout(function(){t.classList.add("hide"),t.classList.remove("hiding","animation"),e.classList.remove("animation"),n&&(e.classList.toggle("reverse"),t.classList.toggle("reverse")),setTimeout(function(){m=!1,v&&(v=!1,y())},50)},300)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.toMenu=function(t,e){var n=i.toDiv(t,"menu"),r=[];function a(){e.jsonData.columns.forEach(function(t,a){var s=t[0];"x"===s?r.push(o):r.push(function(t,e,n,o,r,a){var s=i.toDiv(a,"checkbox"),c=i.toDiv(s,"point");i.toDiv(c,"outer").style.backgroundColor=n,i.toDiv(c,"border").style.borderColor=n,i.toDiv(c,"inner").style.backgroundColor=n,i.toDiv(c,"icon"),s.innerHTML+=o;var u=!1,l=null;function f(t){e=t,i.toggleClass(s,e,"as-check")}return s.onmousedown=s.ontouchstart=function(){l=setTimeout(function(){u=!0,r.uncheckOther(t)},500)},s.onmouseup=s.ontouchend=function(){l&&clearTimeout(l)},s.onclick=function(){u||r.toggleVisibility(t),u=!1},f(e),{setValue:f,destroy:function(){s.onclick=null,s.onmousedown=null,s.onmouseup=null,s.ontouchstart=null,s.ontouchend=null,a.removeChild(s),a=null}}}(a,e.visibility[a],e.jsonData.colors[s],e.jsonData.names[s],e,n))})}e.isSingleton||a(),e.onSingletonZoom(function(t){t?a():(r.forEach(function(t){return t.destroy()}),r=[])}),e.onVisibilityChange(function(t){return t.forEach(function(t,e){return r.length&&r[e].setValue(t)})}),e.onDestroy(function(){r.forEach(function(t){return t.destroy()}),t.removeChild(n)})};var o={setValue:function(){},destroy:function(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(0),r=n(4),a=n(5),s=n(20);e.toMiniMap=function(t,e){var n=o.toDiv(t,"mini-map");!function(t,e){var n,s,c,u,l=e.miniMap,f=o.drawConvas(t,l.viewport.width,l.viewport.height),h=f.getContext("2d");function d(t){return n.length>1?n[t-1]:n[0]}function m(){var t=e.toFactory(e.jsonData,1,1);return t.draw(e.useMin,h,e.indexRange,d,l.viewport),t}n=e.toMaxVisibleValue(l.indexRange);var v=m();function g(){n=e.toMaxVisibleValue(e.miniMap.indexRange),h.clearRect(0,0,f.width,f.height),v.draw(e.useMin,h,e.indexRange,d,l.viewport)}function p(){u&&(cancelAnimationFrame(u),n=o.mapMaxMin(n,function(t){return 10*Math.floor(t/10)})),s=e.toMaxVisibleValue(l.indexRange),c=o.map2MaxMin(s,n,function(t,e){return Math.round((t-e)/10)}),function t(i){u=requestAnimationFrame(function(){if(h.clearRect(0,0,f.width,f.height),v.scale(e.useMin,h,e.indexRange,d,l.viewport),10!==i)return n=o.map2MaxMin(n,c,function(t,e){return t+e}),t(i+1)})}(0)}e.onZoom(g),e.onPieZoom(g),e.onVisibilityChange(function(t){v.setVisible(t),p()}),e.onDrawPie(function(){e.adapter.use=i.recountAndUsePercentChartOver(!1),(v=r.toScalableFactory(e.jsonData,a.toPoligonItemOver,o.toScales(e.visibility))).draw(e.useMin,h,e.indexRange,d,l.viewport)}),e.onDrawPersent(function(){e.adapter.use=i.recountAndUsePercentChartOver(!0),v=m()})}(n,e),s.drawLens(n,e),e.onSingletonZoom(function(t){o.toggleClass(n,t,"fade")})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.drawLens=function(t,e){var n=i.toDiv(t,"lens"),o=i.toDiv(t,"cover");o.style.left="0px";var r=i.toDiv(t,"cover");r.style.right="0px";var a=document.createElement("span");n.appendChild(a),a.style.left="-5px";var s=document.createElement("span");n.appendChild(s),s.style.right="-5px";var c=e.miniMap,u=e.miniMap.viewport.width,l=u/(c.timeRange.end-c.timeRange.start);function f(t){l=u/(c.timeRange.end-c.timeRange.start),m(t)}e.onZoom(f),e.onPieZoom(f);var h=!1;function d(){h=!h}e.onZoomStart(d),e.onDrawPersent(d),e.onDrawPie(d);var m=function(t){var e=Math.floor((t.end-t.start)*l),i=Math.floor((t.start-c.timeRange.start)*l);n.style.width=e+"px",n.style.left=i+"px",o.style.width=i+"px",r.style.left=i+e+"px"};function v(t,i){e.isMove=!0;var o,r=(e.timeRange.end-e.timeRange.start)*l,f=(e.timeRange.start-c.timeRange.start)*l;function d(n){o&&cancelAnimationFrame(o),o=requestAnimationFrame(function(){return function(n){if(t!==a||h)if(t!==s||h){if((d=Math.min(Math.max(f+n-i,0),u-r))===f)return;e.setTimeRange("move",{start:Math.floor(c.timeRange.start+d/l),end:Math.floor(c.timeRange.start+(d+r)/l)})}else{var o=Math.min(u-f,Math.max(20,r+n-i));if(o===r)return;e.setTimeRange("right",{start:e.timeRange.start,end:Math.floor(c.timeRange.start+(f+o)/l)})}else{var d;if((d=Math.min(Math.max(f+n-i,0),f+r-20))===f)return;e.setTimeRange("left",{start:Math.floor(c.timeRange.start+d/l),end:e.timeRange.end})}}(n)})}function m(t){t.stopPropagation(),t.preventDefault(),d(t.clientX)}function v(t){1===t.targetTouches.length&&(t.stopPropagation(),t.preventDefault(),d(t.targetTouches[0].clientX))}function g(){e.isMove=!1,document.removeEventListener("mousemove",m),document.removeEventListener("touchmove",v),document.removeEventListener("mouseup",g),n.removeEventListener("touchend",g)}document.addEventListener("mousemove",m),document.addEventListener("touchmove",v,{passive:!1}),document.addEventListener("mouseup",g),n.addEventListener("touchend",g)}m(e.timeRange),e.onTimeRangeChange(function(t,e){return m(e)}),n.addEventListener("mousedown",function(t){t.stopPropagation(),t.preventDefault(),v(t.target,t.clientX)}),n.addEventListener("touchstart",function(t){1===t.targetTouches.length&&(t.stopPropagation(),t.preventDefault(),v(t.targetTouches[0].target,t.targetTouches[0].clientX))},{passive:!1})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(4),o=n(22),r=n(23),a=n(5),s=n(24),c=n(1),u=n(0),l=n(6),f=n(25),h=n(26),d=function(){function t(t,e){var n=this;this.url=e,this.visibility=[],this.isMove=!1,this.isBars=!1,this.isPercentage=!1,this.isSingleton=!1,this.styleWatchers=[],this.timeChangeWatchers=[],this.visibilityWatchers=[],this.destroyWatchers=[],this.use=function(t,e,i,o,r,a){n.adapter.use(n.jsonData,t,n.visibility,n.indexRange,n.timeRange,e,i,o,r,a)},this.useMin=function(t,e,i,o,r,a){n.adapter.use(n.jsonData,t,n.visibility,n.miniMap.indexRange,n.miniMap.timeRange,e,i,o,r,a)},this.isZoom=!1,this.yearDatas=null,this.zoomWatchers=[],this.zoomStartWatchers=[],this.singletonZoomWatchers=[],this.drawPieWatchers=[],this.drawPersentsWatchers=[],this.pieZoomWatchers=[],this.hoverWatchers=[],this.asSoonAsReady=p("./json/"+e+"/overview.json").then(function(e){return n.setDate(t,e)}).then(function(){return n})}return t.prototype.changeStyle=function(t){this.style="day"===t?h.dayStyle:h.nightStyle,this.styleWatchers.forEach(function(t){return t()})},t.prototype.onChangeStyle=function(t){this.styleWatchers.push(t)},t.prototype.setDate=function(t,e){var n=this;this.changeStyle("day"),this.jsonData=e;var f=e.columns[0];this.timeRange={start:f[Math.max(Math.round(.8*f.length),1)],end:f[f.length-1]},this.indexRange=l.toIndexRange(this.jsonData,this.timeRange),this.viewport={width:t,height:Math.round(t*(e.percentage?.7:.6))},this.miniMap={viewport:{width:t-10,height:46},indexRange:{start:1,end:f.length-1},timeRange:{start:f[1]-2*u.day,end:f[f.length-1]+2*u.day}},this.visibility=e.columns.map(function(){return!0}),this.isBars=("bar"===e.types[e.columns[1][0]]||e.stacked)&&!e.percentage,this.isPercentage=e.percentage,this.isSingleton=2===e.columns.length,e.y_scaled?(this.zIndex="-1",this.toFactory=function(t,e,n){return o.toChartItemsFactory(t,s.toPolylineItemOver,e,n)},this.adapter={use:c.recountAndUseSimplePintsChart,toMax:c.recountDoubleMax}):e.percentage?(this.zIndex="1",this.toFactory=function(t){return i.toScalableFactory(t,r.toAreaItemOver,u.toScales(n.visibility))},this.adapter={use:c.recountAndUsePercentChartOver(!0),toMax:function(){return[[100,0]]}}):e.stacked?(this.zIndex="1",this.toFactory=function(t){return i.toScalableFactory(t,a.toPoligonItemOver,u.toScales(n.visibility))},this.adapter={use:c.recountAndUseChartBySumm,toMax:c.recountMaxBySumm}):this.isSingleton?(this.zIndex="1",this.toFactory=function(t){return i.toScalableFactory(t,a.toPoligonItemOver,u.toScales(n.visibility))},this.adapter={use:c.recountAndUseSimplePintsChart,toMax:c.recountSimpleMax}):(this.zIndex="-1",this.toFactory=function(t,e,n){return o.toChartItemsFactory(t,s.toPolylineItemOver,e,n)},this.adapter={use:c.recountAndUseSimplePintsChart,toMax:c.recountSimpleMaxAndMin})},t.prototype.onTimeRangeChange=function(t){this.timeChangeWatchers.push(t)},t.prototype.setTimeRange=function(t,e){this.indexRange=l.toIndexRange(this.jsonData,e),this.timeRange=e,this.timeChangeWatchers.forEach(function(n){return n(t,e)})},t.prototype.uncheckOther=function(t){var e=this;this.visibility=this.visibility.map(function(e,n){return n===t}),this.visibilityWatchers.forEach(function(t){return t(e.visibility)})},t.prototype.toggleVisibility=function(t){var e=this;this.visibility[t]=!this.visibility[t],this.visibilityWatchers.forEach(function(t){return t(e.visibility)})},t.prototype.onVisibilityChange=function(t){this.visibilityWatchers.push(t)},t.prototype.onDestroy=function(t){this.destroyWatchers.push(t)},t.prototype.toMaxVisibleValue=function(t){return this.adapter.toMax(this.jsonData,this.visibility,t)},t.prototype.loadingData=function(t){return this.zoomedTime=t,this.isPercentage?Promise.resolve():this.asSoonAsLoading=p(function(t,e){var n=new Date(e);return"./json/"+t+"/"+n.getUTCFullYear()+"-"+("0"+(n.getMonth()+1)).slice(-2)+"/"+("0"+n.getDate()).slice(-2)+".json"}(this.url,t))},t.prototype.storeYearsDatas=function(){this.yearDatas={yearData:this.jsonData,indexRange:u.copyRange(this.indexRange),timeRange:u.copyRange(this.timeRange),miniMapIndexRange:u.copyRange(this.miniMap.indexRange),miniMapTimeRange:u.copyRange(this.miniMap.timeRange)}},t.prototype.unzoom=function(){if(this.isPercentage)return this.percentageUnZoom();this.isZoom=!1;var t=this.yearDatas,e=t.yearData,n=t.miniMapTimeRange,i=t.timeRange,o=t.indexRange,r=this.zommingTimesOver(i,n,16);this.isSingleton?(this.zoomStart(e,o,i,e.columns.map(function(){return!0})),this.singletonUnzooming(16,e,r)):(this.zoomStart(e,o,i,this.visibility),this.simpleUnzooming(e,this.jsonData,r))},t.prototype.singletonUnzooming=function(t,e,n){var o=this;g(t,v,function(r){if(n(),16===r)o.jsonData=e,o.indexRange=l.toIndexRange(o.jsonData,o.timeRange),o.miniMap.indexRange=l.toIndexRange(o.jsonData,o.miniMap.timeRange),o.visibility=e.columns.map(function(){return!0}),o.isBars=!0,o.toFactory=function(t){return i.toScalableFactory(t,a.toPoligonItemOver,u.toScales(o.visibility))},o.singletonZoomWatchers.forEach(function(t){return t(!1)});else if(o.indexRange=l.toIndexRange(o.jsonData,o.timeRange),o.miniMap.indexRange=l.toIndexRange(o.jsonData,o.miniMap.timeRange),o.zoomWatchers.forEach(function(e){return e(o.timeRange,(t-r)/10)}),1===r)return!0})},t.prototype.simpleUnzooming=function(t,e,n){var i=this,o=u.copyRange(this.miniMap.timeRange),r=f.mergeJsonForSimpleZoomOver(t,e,this.miniMap.timeRange,o);g(20,v,function(e){if(n(e>14?3:1),19===e&&(i.jsonData=r(3)),16===e&&(i.jsonData=r(6)),14===e&&(i.jsonData=r(12)),10===e&&(i.jsonData=t),i.indexRange=l.toIndexRange(i.jsonData,i.timeRange),i.miniMap.indexRange=l.toIndexRange(i.jsonData,i.miniMap.timeRange),i.zoomWatchers.forEach(function(t){return t(i.timeRange)}),1===e)return!0})},t.prototype.zommingTimesOver=function(t,e,n){var i=this,o=(t.start-this.timeRange.start)/n,r=(t.end-this.timeRange.end)/n,a=(e.start-this.miniMap.timeRange.start)/n,s=(e.end-this.miniMap.timeRange.end)/n;return function(t){void 0===t&&(t=1),i.timeRange.start+=o/t,i.timeRange.end+=r/t,i.miniMap.timeRange.start+=a/t,i.miniMap.timeRange.end+=s/t}},t.prototype.zoom=function(){var t=this;if(this.isPercentage)return this.percentageZoom();this.storeYearsDatas(),this.asSoonAsLoading.then(function(e){t.isZoom=!0;var n=e.columns[0],i={start:t.zoomedTime,end:t.zoomedTime+u.day},o=l.toIndexRange(e,i),r={start:n[1],end:n[n.length-1]},a=t.zommingTimesOver(i,r,16);t.isSingleton?(t.zoomStart(e,o,i,e.columns.map(function(){return!0})),t.singletonZoomin(e,a)):(t.zoomStart(e,o,i,t.visibility),t.simpleZooming(i,t.jsonData,e,a))})},t.prototype.singletonZoomin=function(t,e){var n=this;g(1,m,function(i){if(e(),n.indexRange=l.toIndexRange(n.jsonData,n.timeRange),n.miniMap.indexRange=l.toIndexRange(n.jsonData,n.miniMap.timeRange),n.zoomWatchers.forEach(function(t){return t(n.timeRange,(16-i)/10)}),16===i)return n.jsonData=t,n.visibility=t.columns.map(function(){return!0}),n.indexRange=l.toIndexRange(n.jsonData,n.timeRange),n.miniMap.indexRange=l.toIndexRange(n.jsonData,n.miniMap.timeRange),n.isBars=!1,n.toFactory=function(t,e,n){return o.toChartItemsFactory(t,s.toPolylineItemOver,e,n)},n.singletonZoomWatchers.forEach(function(t){return t(!0)}),!0})},t.prototype.simpleZooming=function(t,e,n,i){var o=this,r=f.mergeJsonForSimpleZoomOver(e,n,this.miniMap.timeRange,t);g(1,m,function(t){if(i(t>14?3:1),11===t&&(o.jsonData=r(12)),14===t&&(o.jsonData=r(6)),17===t&&(o.jsonData=r(3)),20===t&&(o.jsonData=n),o.indexRange=l.toIndexRange(o.jsonData,o.timeRange),o.miniMap.indexRange=l.toIndexRange(o.jsonData,o.miniMap.timeRange),o.zoomWatchers.forEach(function(t){return t(o.timeRange)}),20===t)return!0})},t.prototype.onZoom=function(t){this.zoomWatchers.push(t)},t.prototype.onZoomStart=function(t){this.zoomStartWatchers.push(t)},t.prototype.onSingletonZoom=function(t){this.singletonZoomWatchers.push(t)},t.prototype.zoomStart=function(t,e,n,i){this.zoomStartWatchers.forEach(function(o){return o(t,e,n,i)})},t.prototype.percentageZoom=function(){this.storeYearsDatas(),this.isZoom=!0,this.zoomedTime=this.zoomedTime-u.day;var t={start:this.zoomedTime,end:this.zoomedTime+u.day},e=l.toIndexRange(this.jsonData,t),n=this.jsonData.columns[0],i={start:Math.max(this.zoomedTime-3*u.day,n[1]),end:Math.min(this.zoomedTime+4*u.day,n[n.length-1])},o=c.recountPercent(this.jsonData,e.start,u.toScales(this.visibility));this.drawPieWatchers.forEach(function(t){return t(o,e)}),this.pieZoomingMiniMap(t,i)},t.prototype.pieZoomingMiniMap=function(t,e){var n=this,i=this.zommingTimesOver(t,e,16);g(1,m,function(t){if(i(),n.indexRange=l.toIndexRange(n.jsonData,n.timeRange),n.miniMap.indexRange=l.toIndexRange(n.jsonData,n.miniMap.timeRange),n.pieZoomWatchers.forEach(function(t){return t(n.timeRange)}),16===t)return!0})},t.prototype.onDrawPie=function(t){this.drawPieWatchers.push(t)},t.prototype.onDrawPersent=function(t){this.drawPersentsWatchers.push(t)},t.prototype.percentageUnZoom=function(){this.isZoom=!1;var t=c.recountPercent(this.jsonData,this.indexRange.start,u.toScales(this.visibility));this.drawPersentsWatchers.forEach(function(e){return e(t)}),this.pieZoomingMiniMap(this.yearDatas.timeRange,this.yearDatas.miniMapTimeRange)},t.prototype.onPieZoom=function(t){this.pieZoomWatchers.push(t)},t.prototype.hover=function(t,e,n,i,o){this.hoverWatchers.forEach(function(r){return r(t,e,n,i,o)})},t.prototype.onHover=function(t){this.hoverWatchers.push(t)},t.prototype.offHover=function(t){this.hoverWatchers=this.hoverWatchers.filter(function(e){return e!==t})},t}();function m(t){return t+1}function v(t){return t-1}function g(t,e,n){!function t(i){requestAnimationFrame(function(){n(i)||t(e(i))})}(t)}function p(t){return new Promise(function(e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==this.readyState&&200==this.status&&e(JSON.parse(this.responseText))},n.open("GET",t,!0),n.send()})}e.DataService=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toChartItemsFactory=function(t,e,n,i){for(var o=[],r=1;r<t.columns.length;r++){var a=t.columns[r][0];o.push(e(t.colors[a],n,i))}return{draw:function(t,e,n,i,r){o.forEach(function(n,o){n.drw(t,e,o+1,i(o+1)[1],i(o+1)[0],r)})},setVisible:function(t){for(var e=1;e<t.length;e++)o[e-1].set(t[e])},scale:function(t,e,n,i,r){o.forEach(function(n,o){n.sc(t,e,o+1,i(o+1)[1],i(o+1)[0],r)})},setRange:function(){},setHover:function(){}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toAreaItemOver=function(t){return{drw:function(e,n,i,o,r,a,s){n.fillStyle=t,n.beginPath();var c=[];e(i,a,o,r,function(t,e,i,o){n.lineTo(t,e),c.push([i,o])},s);for(var u=c.length-1;u>=0;u--){var l=c[u],f=l[0],h=l[1];n.lineTo(f,h)}n.closePath(),n.fill()}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.toPolylineItemOver=function(t,e,n){var o=1===n?"none":"in";function r(o,r,a,s,c,u){r.lineWidth=e*i.devicePixelRatio,r.globalAlpha=n,r.strokeStyle=t,r.beginPath(),o(a,u,s,c,function(t,e){return r.lineTo(t,e)}),r.stroke()}return{drw:r,set:function(t){o=t?"in":"out"},sc:function(t,e,i,a,s,c){"in"===o&&1===(n=Math.min(1,n+.1))&&(o="none"),"out"===o&&0===(n=Math.max(0,n-.1))&&(o="none"),0!==n&&r(t,e,i,a,s,c)}}}},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(6);e.mergeJsonForSimpleZoomOver=function(t,e,n,r){return function(a){var s=o.toIndexRange(t,n),c=s.start,u=s.end,l=t.columns.map(function(t){return t.slice(c,u)}),f=function(t,e){for(var n=1;t[n]<e.start;)n++;n=Math.max(n-2,1);for(var i=t.length-1;t[i]>e.end;)i--;return i=Math.min(i+3,t.length-1),{start:n,end:i}}(l[0],r);return i({},e,{columns:l.map(function(t,n){var i=e.columns[n],o=i[0],r=i.slice(1);if("x"===o){var s=r.reduce(function(t,e,n){return n%a==0&&t.push(e),t},[]);return[o].concat(t.slice(0,f.start),s,t.slice(f.end,t.length-1))}var c=function(t){return 12===t?2:6===t?4:8}(a);if(s=r.reduce(function(t,e,n){return n%a==0?t.push(e):t[t.length-1]+=e,t},[]),12===a){var u=t[f.start]/c;s=s.map(function(t){return t>u?t/1.5:1.5*t})}return[o].concat(t.slice(0,f.start).map(function(t){return t/c}),s,t.slice(f.end,t.length-1).map(function(t){return t/c}))})})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dayStyle={text:"rgba(37, 37, 41, 0.5)",line:"rgba(24, 45, 59, 0.1)"},e.nightStyle={text:"rgba(163, 177, 194, 0.6)",line:"rgba(255, 255, 255, 0.1)"}},function(t,e,n){"use strict";n.r(e),function(t){var e=n(7),i=n(2),o=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==t)return t;throw new Error("unable to locate global object")}();"Promise"in o?o.Promise.prototype.finally||(o.Promise.prototype.finally=i.a):o.Promise=e.a}.call(this,n(3))},function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,o=Function.prototype.apply;function r(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new r(o.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(29),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(3))},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,o,r,a,s,c=1,u={},l=!1,f=t.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(t);h=h&&h.setTimeout?h:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){m(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((r=new MessageChannel).port1.onmessage=function(t){m(t.data)},i=function(t){r.port2.postMessage(t)}):f&&"onreadystatechange"in f.createElement("script")?(o=f.documentElement,i=function(t){var e=f.createElement("script");e.onreadystatechange=function(){m(t),e.onreadystatechange=null,o.removeChild(e),e=null},o.appendChild(e)}):i=function(t){setTimeout(m,0,t)}:(a="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(a)&&m(+e.data.slice(a.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),i=function(e){t.postMessage(a+e,"*")}),h.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return u[c]=o,i(c),c++},h.clearImmediate=d}function d(t){delete u[t]}function m(t){if(l)setTimeout(m,0,t);else{var e=u[t];if(e){l=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{d(t),l=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(3),n(30))},function(t,e){var n,i,o=t.exports={};function r(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===r||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:r}catch(t){n=r}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(t){i=a}}();var c,u=[],l=!1,f=-1;function h(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&d())}function d(){if(!l){var t=s(h);l=!0;for(var e=u.length;e;){for(c=u,u=[];++f<e;)c&&c[f].run();f=-1,e=u.length}c=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function v(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new m(t,e)),1!==u.length||l||s(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=v,o.addListener=v,o.once=v,o.off=v,o.removeListener=v,o.removeAllListeners=v,o.emit=v,o.prependListener=v,o.prependOnceListener=v,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,n){}]);