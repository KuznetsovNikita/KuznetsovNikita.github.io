!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.month=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e.drawConvas=function(t,e,n,i){var o=document.createElement("canvas");return i&&o.classList.add(i),o.setAttribute("width",(e*window.devicePixelRatio).toString()),o.setAttribute("height",(n*window.devicePixelRatio).toString()),o.style.height=n+"px",o.style.width=e+"px",t.appendChild(o),o},e.toDiv=function(t,e){var n=document.createElement("div");return e&&n.classList.add(e),t.appendChild(n),n},e.map2=function(t,e,n){return t.reduce(function(t,i,o){return t.push(n(i,e[o])),t},[])}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(11);n(15),window.onload=function(){var t=Math.min(window.innerWidth,500),e=[new o.DataService(t,"1"),new o.DataService(t,"2"),new o.DataService(t,"3"),new o.DataService(t,"4"),new o.DataService(t,"5")];i.drawContainer(e,t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(3),o=n(8),r=n(9);e.drawContainer=function(t,e){var n=document.createElement("div");document.body.append(n),n.id="app",n.style.width=e+"px",Promise.all(t.map(function(t){return t.asSoonAsReady})).then(function(t){t.forEach(function(t){var e=document.createElement("div");n.appendChild(e),e.id="header",e.innerHTML="<h1>Chart #"+t.url+"</h1>";var a=document.createElement("div");a.classList.add("chart"),n.appendChild(a),i.toChart(a,t),r.toMiniMap(a,t),o.toMenu(a,t)})}),function(t,e){var n,i=document.createElement("div");function o(){n=!0,document.body.classList.remove("night"),i.innerHTML="Switch to Night Mode",e.map(function(t){return t.changeStyle("day")})}t.appendChild(i),i.classList.add("mode"),o(),i.onclick=function(){n?(n=!1,document.body.classList.add("night"),i.innerHTML="Switch to Day Mode",e.map(function(t){return t.changeStyle("night")})):o()},e[0].onDestroy(function(){i.onclick=null,t.removeChild(i),i=null,t=null})}(n,t)}},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),r=n(4),a=n(5),s=n(7);e.toChart=function(t,e){var n,c,u,l,h,f=[],d=[],v=e.jsonData,m=v.columns,p=v.colors,g=e.viewport,y=g.width,b=g.height,M=e.indexRange,w=e.viewport,x=e.min,L=window.devicePixelRatio,E=o.drawConvas(t,y,b+20),D=E.getContext("2d");D.textAlign="center",D.lineJoin="bevel",D.lineCap="butt";var R=s.toTimes(D,e),S=o.drawConvas(t,y-10,b+11,"lines"),T=S.getContext("2d");T.font=10*L+"px Arial",T.fillStyle=e.style.text,T.strokeStyle=e.style.line,e.onChangeStyle(function(){T.fillStyle=e.style.text,T.strokeStyle=e.style.line,T.clearRect(0,0,S.width,S.height),(f=_(n,1)).forEach(function(t){return t.drw(T)})}),T.lineWidth=L,S.style.zIndex=e.zIndex,n=e.toMaxVisibleValue(M),(f=_(n,1)).forEach(function(t){return t.drw(T)});var C=function(t){return n.length>1?n[t-1]:n[0]},P=e.cr(e.jsonData,2);function k(t){l&&(cancelAnimationFrame(l),n=n.map(function(t){return 10*Math.floor(t/10)})),R.rdt(t),c=e.toMaxVisibleValue(e.indexRange),u=o.map2(c,n,function(t,e){return Math.round((t-e)/10)}),function t(i){l=requestAnimationFrame(function(){if(D.clearRect(0,0,E.width,E.height-20*L),P.sc(e.use,D,x,C,w),10!==i)return n=o.map2(n,u,function(t,e){return t+e}),t(i+1)})}(0),function(t){t.every(function(t){return 0===t})||(null!=h&&cancelAnimationFrame(h),f.forEach(function(t){t.hd(),d.push(t)}),f=_(c,0),function t(e){h=requestAnimationFrame(function(){T.clearRect(0,0,S.width,S.height);var i=b/(n[0]-x);function o(t){return 0!=t.up(T,(b+10-(t.vl[0].label-x)*i)*L)}f.forEach(o),d=d.filter(o),e>10||t(e+1)})}(0))}(u)}function _(t,n){var o=[],a=t.map(function(t,n){var i=10*Math.floor(t/10);return{dx:b/(t-x),lastLine:i,dOneLine:(i-x)/e.lines,color:p[m[n+1][0]],isShow:e.visibility[m[n+1][0]],label:x}});do{var s=b+10-(a[0].label-x)*a[0].dx;o.push(r.ln(a,s*L,(y-10)*L,n)),a=a.map(function(t){return i({},t,{label:t.label+t.dOneLine})})}while(a[0].label<=a[0].lastLine);return o}P.drw(e.use,D,x,C,w),a.toPopUp(t,D,e,C),e.onTimeRangeChange(function(t){k(t)}),e.onVisibilityChange(function(t,e){P.set(t,e),k("visible")})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ln=function(t,e,n,i){var o=0===i?"in":"none";function r(e,o){var r=t[0],a=t[1];e.globalAlpha=i,null!=a&&(e.fillStyle=r.color),(r.isShow||null==a)&&(e.textAlign="left",e.fillText(r.label.toString(),0,o-5)),null!=a&&a.isShow&&(e.fillStyle=a.color,e.textAlign="right",e.fillText(a.label.toString(),n,o-5)),e.beginPath(),e.lineTo(0,o),e.lineTo(n,o),e.stroke()}return{drw:function(t){r(t,e)},hd:function(){o="out"},up:function(t,e){return"in"===o&&1===(i=Math.min(1,i+.1))&&(o="none"),"out"===o&&0===(i=Math.max(0,i-.1))&&(o="none"),0!==i&&r(t,e),i},vl:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(6);e.toPopUp=function(t,e,n,r){var a,s=null,c=n.viewport,u=c.width,l=c.height,h=n.jsonData,f=h.columns,d=h.colors,v=i.toDiv(t,"hover");v.style.height=l+"px",v.style.width=u+"px";var m,p=i.toDiv(v,"pop-up");!function(){f[0];var t=f.slice(1);if(p.classList.add("invisible"),n.isBars)a={line:[i.toDiv(p,"shadow"),i.toDiv(p,"shadow")],dots:[],block:o.toPopUpBlock(n,p)};else{var e=i.toDiv(p,"line"),r=n.isPercentage?[]:t.map(function(t){var e=i.toDiv(p,"dot");return e.style.borderColor=d[t[0]],e});a={line:[e],dots:r,block:o.toPopUpBlock(n,p)}}}();var g=function(t,e){null!=m&&cancelAnimationFrame(m),m=requestAnimationFrame(function(){var e=n.indexRange,i=e.start,o=e.end,c=u/(o-i),h=i+Math.round(t/c);h!==s&&(s=h,function(t,e){var i=n.timeRange,o=i.start,s=i.end,c=f[0],h=f.slice(1),d=c[t],v=u/(s-o),m=(d-o)*v;if(n.isBars){var g=c[t+1];if(!g)return;a.line[0].style.transform="translate(0, 0)",a.line[0].style.width=m+"px",a.line[1].style.transform="translate("+(g-o)*v+"px, 0)",a.line[1].style.width=(s-g)*v+"px",a.block.setData(d,t+1,m)}else a.line[0].style.transform="translate("+m+"px, 0)",a.dots.forEach(function(e,i){var o=l/(r(i+1)-n.min),a=h[i][t]-n.min,s=l-a*o,c=s.toString();e.style.transform="translate("+m+"px, "+c+"px)"}),a.block.setData(d,t,m);p.classList.remove("invisible")}(h))})};function y(){p.classList.add("invisible"),v.addEventListener("mousemove",L)}function b(){v.removeEventListener("touchmove",w),y()}function M(t){t.preventDefault(),t.stopPropagation();var e=t.targetTouches[0],n=e.clientX,i=e.clientY,o=e.target.getBoundingClientRect(),r=n-o.left,a=i-o.top;g(r,a)}function w(t){1===t.targetTouches.length&&M(t)}function x(t){1===t.targetTouches.length&&(M(t),v.addEventListener("touchmove",w,{passive:!1}))}function L(t){if(n.isMove)y();else{var e=t.clientX,i=t.clientY,o=t.currentTarget.getBoundingClientRect(),r=e-o.left,a=i-o.top;g(r,a)}}function E(t){y()}function D(t){v.removeEventListener("mousemove",L);var e=t.clientX,n=t.clientY,i=t.currentTarget.getBoundingClientRect(),o=e-i.left,r=n-i.top;g(o,r)}v.addEventListener("click",D),v.addEventListener("mousemove",L),v.addEventListener("mouseleave",E),v.addEventListener("touchstart",x,{passive:!1}),v.addEventListener("touchend",b),n.onVisibilityChange(function(t){a.dots.forEach(function(e,i){n.jsonData.columns[i+1][0]===t&&e.classList.toggle("invisible")})}),n.onTimeRangeChange(function(){return y()}),n.onDestroy(function(){v.removeEventListener("click",D),v.removeEventListener("mousemove",L),v.removeEventListener("mouseleave",E),v.removeEventListener("touchstart",x),v.removeEventListener("touchend",b)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.toPopUpBlock=function(t,e){var n=t.jsonData,o=n.columns,r=n.colors,a=n.names,s=t.viewport.width,c=i.toDiv(e,"panel"),u=i.toDiv(c,"date"),l=(o[0],o.slice(1)),h=l.map(function(t){var e=i.toDiv(c,"block"),n=i.toDiv(e,"name"),o=i.toDiv(e,"value");return n.innerHTML=a[t[0]],o.style.color=r[t[0]],{block:e,value:o,num:0,name:n,nameVal:a[t[0]],key:t[0],isShow:!0}});if(t.isBars&&h.length>1){var f=i.toDiv(c,"block"),d=i.toDiv(f,"name"),v=i.toDiv(f,"value");d.innerHTML="All",h.push({block:f,value:v,num:0,name:d,nameVal:"All",key:"all",isShow:!0})}function m(){var t=h.filter(function(t){return t.isShow}).map(function(t){return t.num}).reduce(function(t,e){return t+e},0);h.forEach(function(e){e.isShow&&(e.name.innerHTML="<b>"+Math.round(e.num/t*100)+"%</b> "+e.nameVal)})}function p(t){var e=t.toString();return e.length>6?e.substr(0,e.length-6)+"."+e.substr(e.length-6,1)+"M":e.length>4?e.substr(0,e.length-3)+"K":e}return t.onVisibilityChange(function(e){h.forEach(function(t){t.key===e&&(t.isShow=!t.isShow,t.block.classList.toggle("invisible"))}),t.isPercentage&&m()}),{setData:function(e,n,o){var r=new Date(e);if(u.innerHTML=i.days[r.getDay()]+", "+r.getDate()+" "+i.month[r.getMonth()],h.forEach(function(t,e){"all"!==t.key&&(t.num=l[e][n],t.value.innerHTML=p(t.num))}),t.isPercentage&&m(),t.isBars&&h.length>1){var a=h[h.length-1],f=h.filter(function(t){return"all"!==t.key&&t.isShow});f.length>1?(a.isShow=!0,a.num=f.map(function(t){return t.num}).reduce(function(t,e){return t+e},0),a.value.innerHTML=p(a.num),a.block.classList.remove("invisible")):(a.isShow=!1,a.block.classList.add("invisible"))}c.style.transform="translate("+(o+(o>s/2?-160:10))+"px, 10px)"}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.toTimes=function(t,e){var n=window.devicePixelRatio;t.font=10*n+"px Arial";var o,r,a,s=30,c=70,u=20,l=0,h=e.viewport,f=h.height,d=h.width;function v(t){return void 0!==e.jsonData.columns[0][t]}function m(t){return e.jsonData.columns[0][t]}function p(t){return(m(t)-e.timeRange.start)*a}function g(){t.clearRect(0,f*n,d*n,20*n),t.fillStyle=e.style.text;for(var a=o;a<=r;a+=l)s=a,c=void 0,c=new Date(m(s)),t.fillText(c.getDate()+" "+i.month[c.getMonth()],p(s)*n,(f+15)*n);var s,c}e.onChangeStyle(function(){return g()}),function(){var t=e.indexRange,n=e.timeRange;for(a=d/(n.end-n.start),o=t.start;p(o)<u;)o++;for(var i=-1;p(o+l)<c+u;)i++,l=Math.pow(2,i);for(r=o-=l;v(r+l)&&p(r)<=d;)r+=l;g()}();var y=null;function b(t){var n=e.timeRange;a=d/(n.end-n.start),t(),function(){var t=o-l;v(t)&&p(t)>-s&&(o=t),p(o)<-s&&(o+=l);var e=r+l;v(e)&&p(e)<d+s&&(r=e),p(r)>d+s&&(r-=l)}(),g()}return{rdt:function(t){null!==y&&cancelAnimationFrame(y),y=requestAnimationFrame(function(){switch(t){case"left":return b(function(){!function(){if(1!==l){var t=l/2,e=r-t;if(v(e)&&(m(r)-m(e))*a>c){for(var n=e;p(n)>=-s;)n-=t;o=n,l=t}}}(),function(){var t=2*l,e=r-l;if(v(e)&&(m(r)-m(e))*a<c){for(var n=r;p(n)>=-s;)n-=l;o=n,l=t}}()});case"right":return b(function(){!function(){if(1!==l){var t=l/2,e=o+t;if(v(e)&&(m(e)-m(o))*a>c){for(var n=e;p(n)<=d+s;)n+=t;r=n,l=t}}}(),function(){var t=2*l,e=o+l;if(v(e)&&(m(e)-m(o))*a<c){for(var n=o;p(n)<=d+s;)n+=t;r=n,l=t}}()});case"move":return function t(){var e=o-l;v(e)&&p(e)>-s&&(r-=l,o=e,t())}(),function t(){var e=r+l;v(e)&&p(e)<d+s&&(o+=l,r=e,t())}(),void g();default:return}})}}}},function(t,e,n){"use strict";function i(t,e,n,i,o){var r,a=document.createElement("div");return a.classList.add("checkbox"),e&&a.classList.add("as-check"),a.innerHTML+=i,requestAnimationFrame(function(){a.appendChild(function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.innerHTML+='<circle class="shadow" cx="22" cy="21" r="'+e+'"></circle><circle cx="22" cy="21" r="13" style="fill: '+t+';"></circle>',n.innerHTML+='<polyline class="check-mark" points="16,21.5 20,25.5 27,17.5"></polyline><circle class="cover" cx="22" cy="21" r="12"></circle>',n}(n,a.clientWidth))}),a.onclick=function(){o.toggleVisibility(t),a.classList.add("as-click"),r&&clearTimeout(r),r=setTimeout(function(){a.classList.remove("as-click")},300)},o.onVisibilityChange(function(e){e===t&&a.classList.toggle("as-check")}),o.onDestroy(function(){a.onclick=null}),a}Object.defineProperty(e,"__esModule",{value:!0}),e.toMenu=function(t,e){if(e.jsonData.columns.length>2){var n=document.createElement("div");for(var o in t.appendChild(n),n.classList.add("menu"),e.visibility)n.appendChild(i(o,e.visibility[o],e.jsonData.colors[o],e.jsonData.names[o],e));e.onDestroy(function(){t.removeChild(n)})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(10);e.toMiniMap=function(t,e){var n=document.createElement("div");t.appendChild(n),n.classList.add("mini-map"),function(t,e){var n,o,r,a,s=e.miniMap,c=s.viewport,u=s.indexRange,l=e.min,h=i.drawConvas(t,c.width,c.height),f=h.getContext("2d");function d(t){return n.length>1?n[t-1]:n[0]}n=e.toMaxVisibleValue(u);var v=e.cr(e.jsonData,1);function m(){a&&(cancelAnimationFrame(a),n=n.map(function(t){return 10*Math.floor(t/10)})),o=e.toMaxVisibleValue(u),r=i.map2(o,n,function(t,e){return Math.round((t-e)/10)}),function t(o){a=requestAnimationFrame(function(){if(f.clearRect(0,0,h.width,h.height),v.sc(e.useMin,f,l,d,c),10!==o)return n=i.map2(n,r,function(t,e){return t+e}),t(o+1)})}(0)}v.drw(e.useMin,f,l,d,c),e.onVisibilityChange(function(t,e){v.set(t,e),m()})}(n,e),o.drawLens(n,e)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.drawLens=function(t,e){var n=document.createElement("div");t.appendChild(n),n.className="lens";var i=document.createElement("div");t.appendChild(i),i.className="cover",i.style.left="0px";var o=document.createElement("div");t.appendChild(o),o.className="cover",o.style.right="0px";var r=document.createElement("span");n.appendChild(r),r.style.left="-5px";var a=document.createElement("span");n.appendChild(a),a.style.right="-5px";var s=e.miniMap,c=s.viewport.width,u=s.timeRange,l=u.start,h=u.end,f=e.timeRange,d=c/(h-l),v=function(t){var e=Math.floor((t.end-t.start)*d),r=Math.floor((t.start-l)*d);n.style.width=e+"px",n.style.left=r+"px",i.style.width=r+"px",o.style.left=r+e+"px"};function m(t,i){e.isMove=!0;var o,s=(e.timeRange.end-e.timeRange.start)*d,u=(e.timeRange.start-l)*d;function h(n){o&&cancelAnimationFrame(o),o=requestAnimationFrame(function(){return function(n){switch(t){case r:if((h=Math.min(Math.max(u+n-i,0),u+s-20))===u)return;e.setTimeRange("left",{start:Math.floor(l+h/d),end:e.timeRange.end});break;case a:var o=Math.min(c-u,Math.max(20,s+n-i));if(o===s)return;e.setTimeRange("right",{start:e.timeRange.start,end:Math.floor(l+(u+o)/d)});break;default:var h;if((h=Math.min(Math.max(u+n-i,0),c-s))===u)return;e.setTimeRange("move",{start:Math.floor(l+h/d),end:Math.floor(l+(h+s)/d)})}}(n)})}function f(t){t.stopPropagation(),t.preventDefault(),h(t.clientX)}function v(t){1===t.targetTouches.length&&(t.stopPropagation(),t.preventDefault(),h(t.targetTouches[0].clientX))}function m(){e.isMove=!1,document.removeEventListener("mousemove",f),document.removeEventListener("touchmove",v),document.removeEventListener("mouseup",m),n.removeEventListener("touchend",m)}document.addEventListener("mousemove",f),document.addEventListener("touchmove",v,{passive:!1}),document.addEventListener("mouseup",m),n.addEventListener("touchend",m)}v(f),e.onTimeRangeChange(function(t,e){return v(e)}),n.addEventListener("mousedown",function(t){t.stopPropagation(),t.preventDefault(),m(t.target,t.clientX)}),n.addEventListener("touchstart",function(t){1===t.targetTouches.length&&(t.stopPropagation(),t.preventDefault(),m(t.targetTouches[0].target,t.targetTouches[0].clientX))},{passive:!1})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(12),o=n(13),r=n(14);function a(t,e,n){for(var i=[],o=1;o<t.columns.length;o++){var r=t.columns[o][0];i.push(e(t.colors[r],n))}return{drw:function(t,e,n,o,r){i.forEach(function(i,a){i.drw(t,e,a+1,n,o(a+1),r)})},set:function(e,n){t.columns.forEach(function(t,o){t[0]===e&&i[o-1].set(n)})},sc:function(t,e,n,o,r){i.forEach(function(i,a){i.sc(t,e,a+1,n,o(a+1),r)})}}}function s(t,e){var n=window.devicePixelRatio,i=e.columns[0];function o(t,o,r,a,s,c,u,l){for(var h=s.height/(u-c),f=s.width/(a.end-a.start),d=0,v=r.start;v<=r.end;v++){var m=(i[v]-a.start)*f*n;l(m,(s.height-(e.columns[t][v]-c)*h)*n,d,s.height*n),d=m}}switch(t){case"point":return{use:o,toMax:function(t,n){for(var i=10,o=1;o<e.columns.length;o++)if(t[e.columns[o][0]])for(var r=n.start;r<=n.end;r++)i=Math.max(i,e.columns[o][r]);return[10*Math.ceil(i/10)]}};case"y_scaled":return{use:o,toMax:function(t,n){for(var i=[],o=1;o<e.columns.length;o++){var r=10;if(t[e.columns[o][0]])for(var a=n.start;a<=n.end;a++)r=Math.max(r,e.columns[o][a]);i.push(10*Math.ceil(r/10))}return i}};case"stacked":return{use:function(t,o,r,a,s,c,u,l,h){for(var f=s.height/(u-c),d=s.width/(a.end-a.start),v=0,m=r.start;m<=r.end;m++){for(var p=(i[m]-a.start)*d*n,g=0,y=1;y<t;y++)g+=(e.columns[y][m]-c)*f*h[y-1];var b=g+(e.columns[t][m]-c)*f*h[t-1];l(p,(s.height-b)*n,v,(s.height-g)*n),v=p}},toMax:function(t,n){for(var i=10,o=n.start;o<=n.end;o++){for(var r=0,a=1;a<e.columns.length;a++)t[e.columns[a][0]]&&(r+=e.columns[a][o]);i=Math.max(i,r)}return[10*Math.ceil(i/10)]}};case"percentage":return{use:function(t,o,r,a,s,c,u,l){for(var h=s.width/(a.end-a.start),f=r.start;f<=r.end;f++){for(var d=(i[f]-a.start)*h*n,v=0,m=0,p=0,g=1;g<e.columns.length;g++)if(o[e.columns[g][0]]){var y=e.columns[g][f];g<t&&(v+=y),g<=t&&(p+=y),m+=y}l(d,p/m*s.height*n,d,v/m*s.height*n)}},toMax:function(){return[100]}}}}var c={text:"rgba(37, 37, 41, 0.5)",line:"rgba(24, 45, 59, 0.1)"},u={text:"rgba(163, 177, 194, 0.6)",line:"rgba(255, 255, 255, 0.1)"},l=function(){function t(t,e){var n=this;this.url=e,this.lines=5,this.visibility={},this.isMove=!1,this.isBars=!1,this.isPercentage=!1,this.styleWatchers=[],this.timeChangeWatchers=[],this.visibilityWatchers=[],this.destroyWatchers=[],this.use=function(t,e,i,o,r,a){n.adapter.use(t,n.visibility,n.indexRange,n.timeRange,e,i,o,r,a)},this.useMin=function(t,e,i,o,r,a){n.adapter.use(t,n.visibility,n.miniMap.indexRange,n.miniMap.timeRange,e,i,o,r,a)},this.asSoonAsReady=fetch("./json/"+e+"/overview.json").then(function(t){return t.json()}).then(function(e){return n.setDate(t,e)}).then(function(){return n})}return t.prototype.changeStyle=function(t){this.style="day"===t?c:u,this.styleWatchers.forEach(function(t){return t()})},t.prototype.onChangeStyle=function(t){this.styleWatchers.push(t)},t.prototype.setDate=function(t,e){this.changeStyle("day"),this.jsonData=e;var n=e.columns[0];for(var c in this.timeRange={start:n[Math.max(Math.round(.8*n.length),1)],end:n[n.length-1]},this.indexRange=this.toIndexRange(this.timeRange),this.viewport={width:t,height:Math.round(.6*t)},this.miniMap={viewport:{width:t-10,height:46},indexRange:{start:1,end:n.length-1},timeRange:{start:n[1],end:n[n.length-1]}},e.names)this.visibility[c]=!0;this.min=this.toMinValue(),this.isBars=("bar"===e.types[e.columns[1][0]]||e.stacked)&&!e.percentage,this.isPercentage=e.percentage,e.y_scaled?(this.zIndex="-1",this.cr=function(t,e){return a(t,r.pl,e)},this.adapter=s("y_scaled",e)):e.percentage?(this.zIndex="1",this.cr=function(t,e){return a(t,i.ar,e)},this.adapter=s("percentage",e)):e.stacked?(this.zIndex="1",this.cr=o.plgs,this.adapter=s("stacked",e)):"bar"===e.types[e.columns[1][0]]?(this.zIndex="1",this.cr=o.plgs,this.adapter=s("point",e)):(this.zIndex="-1",this.cr=function(t,e){return a(t,r.pl,e)},this.adapter=s("point",e))},t.prototype.onTimeRangeChange=function(t){this.timeChangeWatchers.push(t)},t.prototype.setTimeRange=function(t,e){this.timeRange=e,this.indexRange=this.toIndexRange(e),this.timeChangeWatchers.forEach(function(n){return n(t,e)})},t.prototype.toIndexRange=function(t){for(var e=this.jsonData.columns[0],n=1;e[n]<t.start;)n++;n=Math.max(n-1,1);for(var i=e.length-1;e[i]>t.end;)i--;return{start:n,end:i=Math.min(i+1,e.length-1)}},t.prototype.toggleVisibility=function(t){var e=this;this.visibility[t]=!this.visibility[t],this.visibilityWatchers.forEach(function(n){return n(t,e.visibility[t])})},t.prototype.onVisibilityChange=function(t){this.visibilityWatchers.push(t)},t.prototype.onDestroy=function(t){this.destroyWatchers.push(t)},t.prototype.toMaxVisibleValue=function(t){return this.adapter.toMax(this.visibility,t)},t.prototype.toMinValue=function(){return 0},t}();e.DataService=l},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ar=function(t){var e=1;function n(e,n,i,o,r,a){n.fillStyle=t,n.beginPath();var s=[];e(i,a,o,r,function(t,e,i,o){n.lineTo(t,e),s.push([i,o])});for(var c=s.length-1;c>=0;c--){var u=s[c],l=u[0],h=u[1];n.lineTo(l,h)}n.closePath(),n.fill()}return{drw:n,set:function(t){e=t?1:0},sc:function(t,i,o,r,a,s){0!==e&&n(t,i,o,r,a,s)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.plgs=function(t){for(var e=[],n=[],i=[],o=1;o<t.columns.length;o++){var r=t.columns[o][0];e.push(a(t.colors[r])),n.push(1),i.push("none")}function a(t){return{draw:function(e,n,i,o,r,a,s){n.fillStyle=t,e(i,a,o,r,function(t,e,i,o){n.beginPath(),n.moveTo(i,o),n.lineTo(i,e),n.lineTo(t,e),n.lineTo(t,o),n.closePath(),n.fill()},s)}}}return{drw:function(t,i,o,r,a){e.forEach(function(e,s){e.draw(t,i,s+1,o,r(s+1),a,n)})},set:function(e,n){t.columns.forEach(function(t,o){t[0]===e&&(i[o-1]=n?"in":"out")})},sc:function(t,o,r,a,s){i.forEach(function(t,e){"in"===t&&(n[e]=Math.min(1,n[e]+.1),1===n[e]&&(t="none")),"out"===t&&(n[e]=Math.max(0,n[e]-.1),0===n[e]&&(t="none"))}),e.forEach(function(e,i){0!==n[i]&&e.draw(t,o,i+1,r,a(i+1),s,n)})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.pl=function(t,e){var n=window.devicePixelRatio,i="none",o=1;function r(i,r,a,s,c,u){r.lineWidth=e*n,r.globalAlpha=o,r.strokeStyle=t,r.beginPath(),i(a,u,s,c,function(t,e){return r.lineTo(t,e)}),r.stroke()}return{drw:r,set:function(t){i=t?"in":"out"},sc:function(t,e,n,a,s,c){"in"===i&&1===(o=Math.min(1,o+.1))&&(i="none"),"out"===i&&0===(o=Math.max(0,o-.1))&&(i="none"),0!==o&&r(t,e,n,a,s,c)}}}},function(t,e,n){}]);