!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=5)}([function(t,e,n){"use strict";function i(t,e,n){return t.reduce(function(t,i,o){return t.push(n(i,e[o],o)),t},[])}function o(t){return t*Math.PI/180}function a(t,e){return e*t*360/100}function r(t,e){return o(150+a(t,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.month=["January","February","March","April","May","June","July","August","September","October","November","December"],e.days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e.day=864e5,e.devicePixelRatio=window.devicePixelRatio,e.drawConvas=function(t,n,i,o){var a=document.createElement("canvas");return o&&a.classList.add(o),a.setAttribute("width",(n*e.devicePixelRatio).toString()),a.setAttribute("height",(i*e.devicePixelRatio).toString()),a.style.height=i+"px",a.style.width=n+"px",t.appendChild(a),a},e.toDiv=function(t,e){var n=document.createElement("div");return e&&n.classList.add(e),t.appendChild(n),n},e.map2=i,e.mapMaxMin=function(t,e){return t.map(function(t){var n=t[0],i=t[1];return[e(n),e(i)]})},e.map2MaxMin=function(t,e,n){return i(t,e,function(t,e){var i=t[0],o=t[1],a=e[0],r=e[1];return[n(i,a),n(o,r)]})},e.toggleClass=function(t,e,n){e?t.classList.add(n):t.classList.remove(n)},e.toRadian=o,e.scaleAngle=a,e.toAngle=r,e.toPieAngle=function(t){return r(1,t)},e.speedTest=function(t,e){var n,i=[];return{start:function(){n=performance.now()},end:function(){var o=performance.now();if(i.push(o-n),i.length>=e){var a=i.reduce(function(t,e){return t+e},0);console.log(t,a/i.length),i=[]}}}},e.toScales=function(t){return t.reduce(function(t,e,n){return 0!==n&&t.push(e?1:0),t},[])},e.roundPercentageTotals=function(t){var e=(t=t.map(function(t){return Math.round(t)})).reduce(function(t,e){return t+e},0);if(100!==e){var n=t.indexOf(Math.max.apply(Math,t));t[n]=t[n]-(e-100)}return t},e.copyRange=function(t){return{start:t.start,end:t.end}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.recountAndUseSimplePintsChart=function(t,e,n,i,o,a,r,s,c){for(var u=t.columns[0],l=a.height/(s-r),h=a.width/(o.end-o.start),f=0,d=i.start;d<=i.end;d++){var m=(u[d]-o.start)*h*devicePixelRatio;c(m,(a.height-(t.columns[e][d]-r)*l)*devicePixelRatio,0===f?m:f,a.height*devicePixelRatio),f=m}},e.recountDoubleMax=function(t,e,n){for(var i=[],o=1;o<t.columns.length;o++){for(var a=10,r=t.columns[o][n.start],s=n.start;s<=n.end;s++)a=Math.max(a,t.columns[o][s]),r=Math.min(r,t.columns[o][s]);i.push([10*Math.ceil(a/10),10*Math.floor(r/10)])}var c=i[0],u=c[0],l=c[1],h=i[1],f=h[0],d=h[1];return e[1]&&e[2]&&(u>f?f*=1.2:u*=1.2),[[u,l],[f,d]]},e.recountSimpleMax=function(t,e,n){for(var i=10,o=1;o<t.columns.length;o++)if(e[o])for(var a=n.start;a<=n.end;a++)i=Math.max(i,t.columns[o][a]);return[[10*Math.ceil(i/10),0]]},e.recountSimpleMaxAndMin=function(t,e,n){for(var i=10,o=function(t,e,n){for(var i=1;i<t.columns.length;i++)if(e[i])return t.columns[i][n];return 0}(t,e,n.start),a=1;a<t.columns.length;a++)if(e[a])for(var r=n.start;r<=n.end;r++)i=Math.max(i,t.columns[a][r]),o=Math.min(o,t.columns[a][r]);return[[10*Math.ceil(i/10),10*Math.floor(o/10)]]},e.recountAndUseChartBySumm=function(t,e,n,i,o,a,r,s,c,u){for(var l=t.columns[0],h=a.height/(s-r),f=a.width/(o.end-o.start),d=0,m=i.start;m<=i.end;m++){for(var v=(l[m]-o.start)*f*devicePixelRatio,g=0,p=1;p<e;p++)g+=(t.columns[p][m]-r)*h*u[p-1];var y=g+(t.columns[e][m]-r)*h*u[e-1];c(v,(a.height-y)*devicePixelRatio,0===d?v:d,(a.height-g)*devicePixelRatio),d=v}},e.recountMaxBySumm=function(t,e,n){for(var i=10,o=n.start;o<=n.end;o++){for(var a=0,r=1;r<t.columns.length;r++)e[r]&&(a+=t.columns[r][o]);i=Math.max(i,a)}return[[10*Math.ceil(i/10),0]]},e.recountAndUsePercentChartOver=function(t){return function(e,n,i,o,a,r,s,c,u,l){for(var h=e.columns[0],f=r.width/(a.end-a.start),d=0,m=o.start;m<=o.end;m++){for(var v=(h[m]-a.start)*f*devicePixelRatio,g=0,p=0,y=0,x=1;x<e.columns.length;x++){var R=e.columns[x][m]*l[x-1];x<n&&(g+=R),x<=n&&(y+=R),p+=R}u(v,y/p*r.height*devicePixelRatio,t?v:d,g/p*r.height*devicePixelRatio),d=v}}},e.recountPercent=function(t,e,n){for(var i=[],o=1;o<t.columns.length;o++)i.push(t.columns[o][e]*n[o-1]);var a=i.reduce(function(t,e){return t+e},0);return i.map(function(t){return t/a*100})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toScalableFactory=function(t,e,n){for(var i=[],o=[],a=1;a<t.columns.length;a++){var r=t.columns[a][0];i.push(e(t.colors[r])),o.push("none")}return{draw:function(t,e,o,a,r,s){i.forEach(function(i,o){i.drw(t,e,o+1,a(o+1)[1],a(o+1)[0],r,n,s)})},setVisible:function(t){for(var e=1;e<t.length;e++)o[e-1]=t[e]?"in":"out"},scale:function(t,e,a,r,s,c){o.forEach(function(t,e){"in"===t&&(n[e]=Math.min(1,n[e]+.1),1===n[e]&&(o[e]="none")),"out"===t&&(n[e]=Math.max(0,n[e]-.1),0===n[e]&&(o[e]="none"))}),i.forEach(function(i,o){0!==n[o]&&i.drw(t,e,o+1,r(o+1)[1],r(o+1)[0],s,n,c)})},setRange:function(){},setHover:function(){}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toPoligonItemOver=function(t){return{drw:function(e,n,i,o,a,r,s,c){void 0===c&&(c=1),n.fillStyle=t,n.globalAlpha=c,e(i,r,o,a,function(t,e,i,o){n.beginPath(),n.moveTo(i,o),n.lineTo(i,e),n.lineTo(t,e),n.lineTo(t,o),n.closePath(),n.fill()},s)}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toIndexRange=function(t,e){for(var n=t.columns[0],i=1;n[i]<e.start;)i++;i=Math.max(i-1,1);for(var o=n.length-1;n[o]>e.end;)o--;return{start:i,end:o=Math.min(o+1,n.length-1)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(6),o=n(18);n(24),window.onload=function(){var t=Math.min(window.innerWidth,600);i.drawContainer(["1","2","3","4","5"].map(function(e){return new o.DataService(t,e)}),t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=n(7),a=n(14),r=n(15),s=n(16);e.drawContainer=function(t,e){var n=document.createElement("div");document.body.append(n),n.id="app",n.style.width=e+"px",function(t,e){var n,i=document.createElement("div");function o(){n=!0,document.body.classList.remove("night"),i.innerHTML="Switch to Night Mode",e.map(function(t){return t.changeStyle("day")})}t.appendChild(i),i.classList.add("mode"),o(),i.onclick=function(){n?(n=!1,document.body.classList.add("night"),i.innerHTML="Switch to Day Mode",e.map(function(t){return t.changeStyle("night")})):o()},e[0].onDestroy(function(){i.onclick=null,t.removeChild(i),i=null,t=null})}(n,t),Promise.all(t.map(function(t){return t.asSoonAsReady})).then(function(t){return t.forEach(function(t){return function(t,e,n){a.toHeader(e,t,n);var c=i.toDiv(e,"chart");t.isSingleton&&c.classList.add("as-sg"),o.toChart(c,t),s.toMiniMap(c,t),r.toMenu(c,t)}(t,n,e)})})}},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),a=n(8),r=n(9),s=n(10),c=n(11),u=n(13);e.toChart=function(t,e){var n,l,h,f,d,m=[],v=[],g=e.jsonData,p=g.columns,y=g.colors,x=e.viewport,R=o.drawConvas(t,x.width,x.height+2),M=R.getContext("2d"),P=!1;M.textAlign="center",M.lineJoin="bevel",M.lineCap="butt";var b=u.toTimes(t,e),w=o.drawConvas(t,x.width-10,x.height+11,"lines"),D=w.getContext("2d");D.font=10*o.devicePixelRatio+"px Arial",D.fillStyle=e.style.text,D.strokeStyle=e.style.line,e.onChangeStyle(function(){D.fillStyle=e.style.text,D.strokeStyle=e.style.line,P||(D.clearRect(0,0,w.width,w.height),(m=A(n,1)).forEach(function(t){return t.drw(D)}))}),D.lineWidth=o.devicePixelRatio,w.style.zIndex=e.zIndex,n=e.toMaxVisibleValue(e.indexRange),(m=A(n,1)).forEach(function(t){return t.drw(D)});var T=function(t){return n.length>1?n[t-1]:n[0]},S=function(t){void 0===t&&(t=T);var n=e.toFactory(e.jsonData,2,1);return n.draw(e.use,M,e.indexRange,t,x),n},j=S();c.toPopUp(t,e,T),e.onZoomStart(function(t,i,a,r){l=e.adapter.toMax(t,r,i),_(h=o.map2MaxMin(l,n,function(t,e){return(t-e)/10}),10),L(10)}),e.onSingletonZoom(function(){j=S(function(){return l[0]})}),e.onZoom(function(t,n){var i=e.toMaxVisibleValue(e.indexRange);M.clearRect(0,0,R.width,R.height),j.scale(e.use,M,e.indexRange,function(t){return i.length>1?i[t-1]:i[0]},x,n)}),e.onTimeRangeChange(function(t){j.setRange(e.indexRange),E(t)}),e.onVisibilityChange(function(t){j.setVisible(t),E("visible")});var C=null;function L(t){null!=C&&cancelAnimationFrame(C),function t(e,i){C=requestAnimationFrame(function(){n=o.map2MaxMin(n,h,function(t,e){return t+e}),e!==i&&t(e+1,i)})}(1,t)}function E(t){f&&(cancelAnimationFrame(f),n=o.mapMaxMin(n,function(t){return 10*Math.floor(t/10)})),b.rdt(t),l=e.toMaxVisibleValue(e.indexRange),h=o.map2MaxMin(l,n,function(t,e){return Math.round((t-e)/10)}),O(0,10),_(h,10),L(10)}function O(t,n){f=requestAnimationFrame(function(){if(M.clearRect(0,0,R.width,R.height),j.scale(e.use,M,e.indexRange,T,x),t!==n)return O(t+1,n)})}function A(t,n){var a=[],s=t.map(function(t,n){var i=t[0],o=t[1],a=10*Math.floor(i/10);return{dx:x.height/(i-o),lastLine:a,dOneLine:(a-o)/5,color:y[p[n+1][0]],isShow:e.visibility[n+1],label:o,min:o}});do{var c=x.height+10-(s[0].label-s[0].min)*s[0].dx;a.push(r.ln(s,c*o.devicePixelRatio,(x.width-10)*o.devicePixelRatio,n)),s=s.map(function(t){return i({},t,{label:t.label+t.dOneLine})})}while(s[0].label<=s[0].lastLine);return a}function _(t,e){t.every(function(t){var e=t[0],n=t[1];return 0===e&&0===n})||(null!=d&&cancelAnimationFrame(d),m.forEach(function(t){t.hd(),v.push(t)}),m=A(l,0),function t(e,i){d=requestAnimationFrame(function(){D.clearRect(0,0,w.width,w.height);var a=x.height/(n[0][0]-n[0][1]);function r(t){return 0!=t.up(D,(x.height+10-(t.vl[0].label-n[0][1])*a)*o.devicePixelRatio)}m.forEach(r),v=v.filter(r),e>=i||t(e+1,i)})}(0,e))}var Z=s.pieAnimator(R,M,x,e.jsonData);e.onDrawPie(function(t,n){P=!0,D.clearRect(0,0,w.width,w.height),Z.drawPie(t).then(function(){(j=a.toPieFactory(e.jsonData,e.visibility)).draw(e.use,M,n,T,x)})}),e.onDrawPersent(function(t){P=!1,Z.drawPersents(t).then(function(){j=S(),m.forEach(function(t){return t.drw(D)})})}),e.onHover(function(t,e){j.setHover(e),O(0,20)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(0);e.toPieFactory=function(t,e){for(var n,a,r=[],s=[],c=[],u=[],l=[],h=1;h<t.columns.length;h++)r.push(e[h]?1:0),s.push("none"),c.push(0),u.push(0),l.push(0);function f(e,i){var a=.02*i.height*o.devicePixelRatio,r=i.width/2*o.devicePixelRatio,s=i.height/2*o.devicePixelRatio;e.font=18*o.devicePixelRatio+"px Arial",n.reduceRight(function(n,i,c){e.fillStyle=t.colors[t.columns[c+1][0]];var l=n+i,h=o.toPieAngle(n+i/2),f=r+Math.cos(h)*a*u[c],d=s+Math.sin(h)*a*u[c];return e.beginPath(),e.moveTo(f,d),e.arc(f,d,s-a,o.toPieAngle(n),o.toPieAngle(l)),e.closePath(),e.fill(),l},0),e.fillStyle="white";var c=o.roundPercentageTotals(n);n.reduceRight(function(t,n,i){if(n){var l=o.toPieAngle(t+n/2);e.fillText(c[i]+"%",r+Math.cos(l)*(s/3*2+a*u[i]),s+Math.sin(l)*(s/3*2+a*u[i])+12)}return t+n},0)}function d(){u=u.map(function(){return 0}),l=l.map(function(){return 0})}return{draw:function(e,o,a,s,c,u){n=i.recountPercent(t,a.start,r),f(o,c)},scale:function(e,a,h,d,m,v){s.some(function(t){return"none"!==t})?(s.forEach(function(t,e){"in"===t&&(r[e]=Math.min(1,r[e]+.1),1===r[e]&&(s[e]="none")),"out"===t&&(r[e]=Math.max(0,r[e]-.1),0===r[e]&&(s[e]="none"))}),n=i.recountPercent(t,h.start,r)):c.some(function(t){return 0!==t})?n=o.map2(n,c,function(t,e){return t+e}):u=o.map2(u,l,function(t,e,n){var i=Math.min(Math.max(t+e,0),1);return 0!==i&&1!==i||(l[n]=0),i}),f(a,m)},setVisible:function(t){d();for(var e=1;e<t.length;e++)s[e-1]=t[e]?"in":"out"},setRange:function(e){d(),a=i.recountPercent(t,e.start,r),c=o.map2(a,n,function(t,e){return(t-e)/10})},setHover:function(t){c=c.map(function(){return 0}),t.forEach(function(t,e){t!==u[e]&&(l[e]=t>0?.05:-.05)})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ln=function(t,e,n,i){var o=0===i?"in":"none";function a(e,o){var a=t[0],r=t[1];e.globalAlpha=i,null!=r&&(e.fillStyle=a.color),(a.isShow||null==r)&&(e.textAlign="left",e.fillText(a.label.toString(),0,o-5)),null!=r&&r.isShow&&(e.fillStyle=r.color,e.textAlign="right",e.fillText(r.label.toString(),n,o-5)),e.beginPath(),e.lineTo(0,o),e.lineTo(n,o),e.stroke()}return{drw:function(t){a(t,e)},hd:function(){o="out"},up:function(t,e){return"in"===o&&1===(i=Math.min(1,i+.1))&&(o="none"),"out"===o&&0===(i=Math.max(0,i-.1))&&(o="none"),0!==i&&a(t,e),i},vl:t}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.pieAnimator=function(t,e,n,o){var a=o.colors,r=o.columns,s=n.height,c=n.width,u=s/2,l=c/2,h=Math.PI/2,f=s/100;function d(t){e.beginPath(),e.moveTo(c/2*devicePixelRatio,0),t<u?(e.lineTo((c-t)*devicePixelRatio,0),e.arc((c-t)*devicePixelRatio,t*devicePixelRatio,t*devicePixelRatio,-h,0),e.lineTo(c*devicePixelRatio,(s-t)*devicePixelRatio),e.arc((c-t)*devicePixelRatio,(s-t)*devicePixelRatio,t*devicePixelRatio,0,h),e.lineTo(t*devicePixelRatio,s*devicePixelRatio),e.arc(t*devicePixelRatio,(s-t)*devicePixelRatio,t*devicePixelRatio,h,2*h),e.lineTo(0,t*devicePixelRatio),e.arc(t*devicePixelRatio,t*devicePixelRatio,t*devicePixelRatio,2*h,3*h)):(e.arc((c-t)*devicePixelRatio,u*devicePixelRatio,u*devicePixelRatio,-h,h),e.lineTo(t*devicePixelRatio,s*devicePixelRatio),e.arc(t*devicePixelRatio,u*devicePixelRatio,u*devicePixelRatio,h,3*h)),e.closePath(),e.clip()}function m(t){t.reduceRight(function(t,n,i){e.fillStyle=a[r[i+1][0]];var o=t+n;return e.beginPath(),e.moveTo(0,(s-t*f)*devicePixelRatio),e.lineTo(0,(s-o*f)*devicePixelRatio),e.lineTo(c*devicePixelRatio,(s-o*f)*devicePixelRatio),e.lineTo(c*devicePixelRatio,(s-t*f)*devicePixelRatio),e.closePath(),e.fill(),t+n},0)}function v(t){t.reduceRight(function(n,i,o){e.fillStyle=a[r[o+1][0]];var u=n+i;return e.beginPath(),e.moveTo(0,(s-n*f)*devicePixelRatio),e.lineTo(0,(s-u*f)*devicePixelRatio),0===o&&e.lineTo(c*devicePixelRatio,0),e.lineTo(c*devicePixelRatio,s/2*devicePixelRatio),o===t.length-1&&e.lineTo(c*devicePixelRatio,s*devicePixelRatio),e.closePath(),e.fill(),n+i},0)}function g(t,n,o){t.reduceRight(function(u,l,h){e.fillStyle=a[r[h+1][0]];var f=u+l,d=(c-o)*devicePixelRatio,m=s/2*devicePixelRatio;e.beginPath(),e.moveTo(d,m),e.arc(d,m,2*c*devicePixelRatio,i.toAngle(n,u),i.toAngle(n,f)),e.closePath(),e.fill();var v=i.toRadian(150+(360+i.scaleAngle(n,100))/2);return h===t.length-1&&1!==n&&(e.beginPath(),e.moveTo(d,m),e.arc(d,m,c*devicePixelRatio,v,i.toAngle(n,0)),e.closePath(),e.fill()),0===h&&1!==n&&(e.beginPath(),e.moveTo(d,m),e.arc(d,m,c*devicePixelRatio,i.toAngle(n,f),v),e.closePath(),e.fill()),u+l},0)}return{drawPie:function(n){return new Promise(function(i){var o=0,a=l/18,r=0,s=c/2/16,u=60/360,h=(1-u)/16,f=function(c){requestAnimationFrame(function(){if(e.clearRect(0,0,t.width,t.height),19===c)return i();e.save(),d(o),0===c?m(n):1===c?v(n):c<=18&&(g(n,u,r),u+=h,r+=s),e.restore(),o+=a,f(c+1)})};f(0)})},drawPersents:function(n){return new Promise(function(i){var o=l,a=-l/18,r=l,s=-l/16,c=1,u=function(l){requestAnimationFrame(function(){if(e.clearRect(0,0,t.width,t.height),e.save(),d(o),0===l?m(n):1===l?v(n):l<=18&&(g(n,c,r),c+=-(1-60/360)/16,r+=s),e.restore(),o+=a,0===l)return i();u(l-1)})};u(18)})}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(0),a=n(12);e.toPopUp=function(t,e,n){var r,s=e.viewport,c=s.width,u=s.height,l=o.toDiv(t,"hover");l.style.height=u+"px",l.style.width=c+"px";var h=o.toDiv(l,"pop-up"),f=!1,d=!1;function m(t){return 360*t/100}function v(t,n){var a=e.jsonData,r=e.visibility,s=e.indexRange,c=function(t,n){var i=Math.atan((e.viewport.height/2-n)/(t-e.viewport.width/2))/Math.PI*180;return t>e.viewport.width/2?210-i:n<e.viewport.height/2||i<=30?30-i:390-i}(t,n),u=i.recountPercent(a,s.start,o.toScales(r));if(function(t,n){var i=e.viewport.height/2-n,o=t-e.viewport.width/2;return Math.sqrt(o*o+i*i)>e.viewport.height/2-20}(t,n))return e.hover(u,u.map(function(){return 0}),t,n,!0);var l=[];u.reduceRight(function(t,e){var n=t+e;return l.push(m(t)<c&&c<=m(n)?1:0),t+e},0),e.hover(u,l.reverse(),t,n,!1)}e.onVisibilityChange(function(t){f||r.block.setVisibility(t)}),e.onSingletonZoom(function(){C(),j()}),e.onDrawPie(function(){R(),C(),j(),f=!0}),e.onDrawPersent(function(){R(),C(),j(),f=!1}),j(),e.onHover(function(t,e,n,i,a){r.block.setPersent(t,e,n,i),o.toggleClass(h,a,"invisible")});var g,p,y=null,x=function(t,i,a){null!=g&&cancelAnimationFrame(g),g=requestAnimationFrame(function(){if(f)return v(t,i);var s,l,d=c/(e.timeRange.end-e.timeRange.start),m=new Date(e.timeRange.start+Math.round(t/d)),g=e.isZoom?e.isSingleton?(s=m,l=3e5,Math.round(s.getTime()/l)*l):m.setUTCMinutes(0,0,0):m.setUTCHours(0,0,0,0),p=e.jsonData.columns[0].findIndex(function(t){return t===g});if(-1===p)return R();a&&!e.isZoom&&r.block.setLoading(e.loadingData(e.isBars?g+o.day:g)),g!==y&&(y=g,function(t,i,a){var s=e.jsonData.columns,c=s[0],l=s.slice(1),f=(t-e.timeRange.start)*i;if(e.isBars){var d=c[a+1];if(!d)return;r.line[0].style.transform="translate(0, 0)",r.line[0].style.width=f+"px",r.line[1].style.transform="translate("+(d-e.timeRange.start)*i+"px, 0)",r.line[1].style.width=(e.timeRange.end-d)*i+"px",r.block.setData(t+(e.isBars&&!e.isZoom?o.day:0),a+1,f)}else r.line[0].style.transform="translate("+f+"px, 0)",r.dots.forEach(function(t,e){var i=u/(n(e+1)[0]-n(e+1)[1]),o=l[e][a]-n(e+1)[1],r=u-o*i,s=r.toString();t.style.transform="translate("+f+"px, "+s+"px)"}),r.block.setData(t,a,f);h.classList.remove("invisible")}(g,d,p))})};function R(){h.classList.add("invisible"),d||l.addEventListener("mousemove",D)}function M(t){t.target===l&&(l.removeEventListener("touchmove",b),P(p,!0))}function P(t,e){t.stopPropagation();var n=t.targetTouches[0],i=n.clientX,o=n.clientY,a=n.target.getBoundingClientRect(),r=i-a.left,s=o-a.top;x(r,s,e)}function b(t){1===t.targetTouches.length&&(P(t,!1),p=t)}function w(t){d=!0,l.removeEventListener("mousemove",D),1===t.targetTouches.length&&t.target===l&&(P(t,!1),l.addEventListener("touchmove",b,{passive:!1}),p=t)}function D(t){if(e.isMove)R();else{var n=t.clientX,i=t.clientY,o=t.currentTarget.getBoundingClientRect(),a=n-o.left,r=i-o.top;x(a,r,!1)}}function T(t){R()}function S(t){f||l.removeEventListener("mousemove",D);var e=t.clientX,n=t.clientY,i=t.currentTarget.getBoundingClientRect(),o=e-i.left,a=n-i.top;x(o,a,!0)}function j(){var t=e.jsonData,n=t.columns,i=(n[0],n.slice(1)),s=t.colors;if(h.classList.add("invisible"),e.isBars)r={line:[o.toDiv(h,"shadow"),o.toDiv(h,"shadow")],dots:[],block:a.toPopUpBlock(e,h)};else{var c=[];e.isPercentage&&e.isZoom||c.push(o.toDiv(h,"line"));var u=e.isPercentage?[]:i.map(function(t){var e=t[0],n=o.toDiv(h,"dot");return n.style.borderColor=s[e],n});r={line:c,dots:u,block:a.toPopUpBlock(e,h)}}}function C(){r.line.forEach(function(t){return h.removeChild(t)}),r.dots.forEach(function(t){return h.removeChild(t)}),r.block.destroy(),h.removeChild(r.block.panel),r=null}l.addEventListener("click",S),l.addEventListener("mousemove",D),l.addEventListener("mouseleave",T),l.addEventListener("touchstart",w,{passive:!1}),l.addEventListener("touchend",M),e.onVisibilityChange(function(t){if(R(),r.dots.length)for(var e=1;e<t.length;e++)o.toggleClass(r.dots[e-1],!t[e],"invisible")}),e.onTimeRangeChange(function(){return R()}),e.onZoomStart(function(){return R()}),e.onDestroy(function(){l.removeEventListener("click",S),l.removeEventListener("mousemove",D),l.removeEventListener("mouseleave",T),l.removeEventListener("touchstart",w),l.removeEventListener("touchend",M)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);function o(t){var e=i.drawConvas(t,20,20,"icon"),n=e.getContext("2d");n.strokeStyle="#d2d5d7",n.lineWidth=2*i.devicePixelRatio;var o,a=e.width,r=e.height,s=r/2,c=r/2-2*i.devicePixelRatio,u=Math.sqrt(2)/2*c,l=315,h=90;function f(){o=setTimeout(function(){360===(l+=5)&&(l=0),n.clearRect(0,0,a,r),n.beginPath(),n.arc(s,s,c,i.toRadian(l),i.toRadian(l+h)),n.stroke(),f()},20)}function d(){n.clearRect(0,0,a,r),n.beginPath(),n.moveTo(s+u,s-u),n.lineTo(s+c,s),n.lineTo(s+u,s+u),n.stroke()}return d(),{start:function(){f()},end:function(){clearTimeout(o),l=315,d()},destroy:function(){clearTimeout(o),t.removeChild(e),t=null}}}function a(t){var e=t.toString();return e.length>6?e.substr(0,e.length-6)+"."+e.substr(e.length-6,1)+"M":e.length>4?e.substr(0,e.length-3)+"K":e}e.toPopUpBlock=function(t,e){var n,r=t.viewport.width,s=i.toDiv(e,"panel"),c=!1;s.onclick=function(e){t.isZoom?t.unzoom():t.zoom(),e.stopPropagation(),c&&u&&u.start()};var u=null;t.isZoom&&t.isPercentage||(n=i.toDiv(s,"date"),u=o(s));var l=t.jsonData,h=l.columns,f=(h[0],h.slice(1)),d=l.names,m=l.colors,v=f.map(function(t){var e=i.toDiv(s,"block"),n=i.toDiv(e,"name"),o=i.toDiv(e,"value");return n.innerHTML=d[t[0]],o.style.color=m[t[0]],{block:e,value:o,num:0,name:n,nameVal:d[t[0]],key:t[0],isShow:!0}});if(t.isBars&&v.length>1){var g=i.toDiv(s,"block"),p=i.toDiv(g,"name"),y=i.toDiv(g,"value");p.innerHTML="All",v.push({block:g,value:y,num:0,name:p,nameVal:"All",key:"all",isShow:!0})}function x(t,e){t.isShow=e,i.toggleClass(t.block,!e,"invisible")}function R(){var t=v.reduce(function(t,e){return e.isShow?t+e.num:t},0),e=i.roundPercentageTotals(v.map(function(e){return e.num/t*100}));v.forEach(function(t,n){t.isShow&&(t.name.innerHTML="<b>"+e[n]+"%</b> "+t.nameVal)})}return{setLoading:function(t){c=!0,t.then(function(){c=!1,u&&u.end()})},setData:function(e,o,c){var u=new Date(e);n.innerHTML=i.days[u.getUTCDay()].slice(0,3)+", "+u.getUTCDate()+" "+i.month[u.getUTCMonth()].slice(0,3),t.isZoom?t.isSingleton?n.innerHTML=("0"+u.getUTCHours()).slice(-2)+":"+("0"+u.getUTCMinutes()).slice(-2):n.innerHTML+=" "+("0"+u.getUTCHours()).slice(-2)+":00":n.innerHTML+=" "+u.getUTCFullYear();var l=t.jsonData.columns,h=(l[0],l.slice(1));if(v.forEach(function(t,e){"all"!==t.key&&(t.num=h[e][o],t.value.innerHTML=a(t.num))}),t.isPercentage&&R(),t.isBars&&v.length>1){var f=v[v.length-1],d=v.filter(function(t){return"all"!==t.key&&t.isShow});d.length>1?(f.num=d.reduce(function(t,e){return t+e.num},0),f.value.innerHTML=a(f.num),x(f,!0)):x(f,!1)}s.style.transform="translate("+(c+(c>r/2?-190:20))+"px, 10px)"},setPersent:function(t,e,n,o){var a=i.roundPercentageTotals(t);v.forEach(function(t,n){x(t,!!e[n]),t.num=a[n],t.value.innerHTML=t.num+"%"}),s.style.transform="translate("+(n-85)+"px, "+(o-50)+"px)"},setVisibility:function(e){for(var n=1;n<e.length;n++)x(v[n-1],e[n]);t.isPercentage&&R()},destroy:function(){s.onclick=null,u&&u.destroy()},panel:s}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.toTimes=function(t,e){var n=e.viewport.width,o=i.drawConvas(t,n,16,"text"),a=o.getContext("2d");a.font=10*i.devicePixelRatio+"px Arial",a.fillStyle=e.style.text;var r,s,c,u=30,l=70,h=20,f=0,d=e.jsonData,m=!1;e.onChangeStyle(function(){a.fillStyle=e.style.text,P()});var v=1;function g(t){c=n/(t.end-t.start),v=Math.min(v+.1,1),P()}function p(t){return void 0!==d.columns[0][t]}function y(t){return p(t)?d.columns[0][t]:null}function x(t){return R(t,e.timeRange)}function R(t,e){return(y(t)-e.start)*(n/(e.end-e.start))}function M(t){var n;a.fillText((n=new Date(y(t)),e.isZoom?("0"+n.getUTCHours()).slice(-2)+":00":n.getUTCDate()+" "+i.month[n.getUTCMonth()].slice(0,3)),x(t)*i.devicePixelRatio,13*i.devicePixelRatio)}function P(){if(!m){a.clearRect(0,0,o.width,o.height),a.globalAlpha=v;for(var t=r;t<=s;t+=f)M(t)}}e.onZoomStart(function(t,e,i){d=t,c=n/(i.end-i.start),v=0,D(e,i)}),e.onZoom(g),e.onPieZoom(g),e.onDrawPie(function(){a.clearRect(0,0,o.width,o.height),m=!0}),e.onDrawPersent(function(){m=!1}),D(e.indexRange,e.timeRange),P();var b=null;function w(t){var i=e.timeRange;c=n/(i.end-i.start),t(),function(){var t=r-f;p(t)&&x(t)>-u&&(r=t),x(r)<-u&&(r+=f);var e=s+f;p(e)&&x(e)<n+u&&(s=e),x(s)>n+u&&(s-=f)}(),P()}function D(t,e){for(c=n/(e.end-e.start),r=t.start;R(r,e)<h;)r++;for(f=1;R(r+f,e)<l+h;)f*=2;for(r-f>t.start&&(r-=f),s=r;p(s+f)&&R(s,e)<=n;)s+=f}return{rdt:function(t){m||(null!==b&&cancelAnimationFrame(b),b=requestAnimationFrame(function(){switch(t){case"left":return w(function(){!function(){if(1!==f){var t=f/2,e=s-t;if(p(e)&&(y(s)-y(e))*c>l){for(var n=e;x(n)>=-u;)n-=t;r=n,f=t}}}(),function(){var t=2*f,e=s-f;if(p(e)&&(y(s)-y(e))*c<l){for(var n=s;x(n)>=-u;)n-=f;r=n,f=t}}()});case"right":return w(function(){!function(){if(1!==f){var t=f/2,e=r+t;if(p(e)&&(y(e)-y(r))*c>l){for(var i=e;x(i)<=n+u;)i+=t;s=i,f=t}}}(),function(){var t=2*f,e=r+f;if(p(e)&&(y(e)-y(r))*c<l){for(var i=r;x(i)<=n+u;)i+=t;s=i,f=t}}()});case"move":return function t(){var e=r-f;p(e)&&x(e)>-u&&(s-=f,r=e,t())}(),function t(){var e=s+f;p(e)&&x(e)<n+u&&(r+=f,s=e,t())}(),void P();default:return}}))}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);function o(t){if(t.isZoom){var e=new Date(t.timeRange.start+(t.isPercentage?0:i.day/2));return i.days[e.getUTCDay()]+", "+e.getUTCDate()+" "+i.month[e.getMonth()]+" "+e.getFullYear()}var n=new Date(t.timeRange.start),o=new Date(t.timeRange.end);return n.getUTCDate()+" "+i.month[n.getMonth()]+" "+n.getFullYear()+" - "+o.getUTCDate()+" "+i.month[o.getMonth()]+" "+o.getFullYear()}e.toHeader=function(t,e,n){var a=i.toDiv(t,"header");a.innerHTML="<h1>Chart "+e.url+"</h1>",n<400&&a.classList.add("double");var r=i.toDiv(a,"zoom");r.innerHTML='<svg class="loupe" height="27" width="27"><circle cx="12" cy="12" r="9"></circle><line x1="7" x2="17" y1="12" y2="12"></line><line x1="19" x2="27" y1="19" y2="27"></line></svg><span>Zoom Out</span>';var s=i.toDiv(a,"range");function c(){var t;t=o(e),g!==t&&(p&&clearTimeout(p),p=setTimeout(function(){g=t,m?v=!0:y()},35))}e.onTimeRangeChange(c),e.onZoom(c),e.onPieZoom(c);var u=!1;function l(){u=!0}e.onZoomStart(l),e.onDrawPie(l),e.onDrawPersent(l),r.onclick=function(){u||e.unzoom()},e.onDestroy(function(){r.onclick=null});var h=i.toDiv(s,"changer");h.innerHTML=o(e);var f=i.toDiv(s,"changer");f.classList.add("hide");var d=!0,m=!1,v=!1,g="",p=null;function y(){d?x(h,f):x(f,h)}function x(t,e){m=!0,d=!d,e.innerHTML=g,e.classList.add("animation"),t.classList.add("animation"),e.classList.remove("hide"),t.classList.add("hiding");var n=u;u&&(a.classList.toggle("in-zoom"),u=!1),setTimeout(function(){t.classList.add("hide"),t.classList.remove("hiding","animation"),e.classList.remove("animation"),n&&(e.classList.toggle("reverse"),t.classList.toggle("reverse")),setTimeout(function(){m=!1,v&&(v=!1,y())},50)},300)}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.toMenu=function(t,e){var n=i.toDiv(t,"menu"),a=[];function r(){e.jsonData.columns.forEach(function(t,r){var s=t[0];"x"===s?a.push(o):a.push(function(t,e,n,o,a,r){var s=i.toDiv(r,"checkbox");s.innerHTML+=o,requestAnimationFrame(function(){s.appendChild(function(t,e){var n=document.createElementNS("http://www.w3.org/2000/svg","svg");return n.innerHTML+='<circle class="shadow" cx="22" cy="21" r="'+e+'" style="fill: '+t+';"></circle><circle cx="22" cy="21" r="13" style="fill: '+t+';"></circle>',n.innerHTML+='<polyline class="check-mark" points="16,21.5 20,25.5 27,17.5"></polyline><circle class="cover" cx="22" cy="21" r="12"></circle>',n}(n,s.clientWidth))});var c=!1,u=null;function l(t){e=t,i.toggleClass(s,e,"as-check")}return s.onmousedown=s.ontouchstart=function(){u=setTimeout(function(){c=!0,a.uncheckOther(t)},500)},s.onmouseup=s.ontouchend=function(){u&&clearTimeout(u)},s.onclick=function(){c||a.toggleVisibility(t),c=!1},l(e),{setValue:l,destroy:function(){s.onclick=null,s.onmousedown=null,s.onmouseup=null,s.ontouchstart=null,s.ontouchend=null,r.removeChild(s),r=null}}}(r,e.visibility[r],e.jsonData.colors[s],e.jsonData.names[s],e,n))})}e.isSingleton||r(),e.onSingletonZoom(function(t){t?r():(a.forEach(function(t){return t.destroy()}),a=[])}),e.onVisibilityChange(function(t){return t.forEach(function(t,e){return a.length&&a[e].setValue(t)})}),e.onDestroy(function(){a.forEach(function(t){return t.destroy()}),t.removeChild(n)})};var o={setValue:function(){},destroy:function(){}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),o=n(0),a=n(2),r=n(3),s=n(17);e.toMiniMap=function(t,e){var n=o.toDiv(t,"mini-map");!function(t,e){var n,s,c,u,l=e.miniMap,h=o.drawConvas(t,l.viewport.width,l.viewport.height),f=h.getContext("2d");function d(t){return n.length>1?n[t-1]:n[0]}function m(){var t=e.toFactory(e.jsonData,1,1);return t.draw(e.useMin,f,e.indexRange,d,l.viewport),t}n=e.toMaxVisibleValue(l.indexRange);var v=m();function g(){n=e.toMaxVisibleValue(e.miniMap.indexRange),f.clearRect(0,0,h.width,h.height),v.draw(e.useMin,f,e.indexRange,d,l.viewport)}function p(){u&&(cancelAnimationFrame(u),n=o.mapMaxMin(n,function(t){return 10*Math.floor(t/10)})),s=e.toMaxVisibleValue(l.indexRange),c=o.map2MaxMin(s,n,function(t,e){return Math.round((t-e)/10)}),function t(i){u=requestAnimationFrame(function(){if(f.clearRect(0,0,h.width,h.height),v.scale(e.useMin,f,e.indexRange,d,l.viewport),10!==i)return n=o.map2MaxMin(n,c,function(t,e){return t+e}),t(i+1)})}(0)}e.onZoom(g),e.onPieZoom(g),e.onVisibilityChange(function(t){v.setVisible(t),p()}),e.onDrawPie(function(){e.adapter.use=i.recountAndUsePercentChartOver(!1),(v=a.toScalableFactory(e.jsonData,r.toPoligonItemOver,o.toScales(e.visibility))).draw(e.useMin,f,e.indexRange,d,l.viewport)}),e.onDrawPersent(function(){e.adapter.use=i.recountAndUsePercentChartOver(!0),v=m()})}(n,e),s.drawLens(n,e),e.onSingletonZoom(function(t){o.toggleClass(n,t,"fade")})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.drawLens=function(t,e){var n=i.toDiv(t,"lens"),o=i.toDiv(t,"cover");o.style.left="0px";var a=i.toDiv(t,"cover");a.style.right="0px";var r=document.createElement("span");n.appendChild(r),r.style.left="-5px";var s=document.createElement("span");n.appendChild(s),s.style.right="-5px";var c=e.miniMap,u=e.miniMap.viewport.width,l=u/(c.timeRange.end-c.timeRange.start);function h(t){l=u/(c.timeRange.end-c.timeRange.start),m(t)}e.onZoom(h),e.onPieZoom(h);var f=!1;function d(){f=!f}e.onZoomStart(d),e.onDrawPersent(d),e.onDrawPie(d);var m=function(t){var e=Math.floor((t.end-t.start)*l),i=Math.floor((t.start-c.timeRange.start)*l);n.style.width=e+"px",n.style.left=i+"px",o.style.width=i+"px",a.style.left=i+e+"px"};function v(t,i){e.isMove=!0;var o,a=(e.timeRange.end-e.timeRange.start)*l,h=(e.timeRange.start-c.timeRange.start)*l;function d(n){o&&cancelAnimationFrame(o),o=requestAnimationFrame(function(){return function(n){switch(t){case r:if(f)return;if((d=Math.min(Math.max(h+n-i,0),h+a-20))===h)return;e.setTimeRange("left",{start:Math.floor(c.timeRange.start+d/l),end:e.timeRange.end});break;case s:if(f)return;var o=Math.min(u-h,Math.max(20,a+n-i));if(o===a)return;e.setTimeRange("right",{start:e.timeRange.start,end:Math.floor(c.timeRange.start+(h+o)/l)});break;default:var d;if((d=Math.min(Math.max(h+n-i,0),u-a))===h)return;e.setTimeRange("move",{start:Math.floor(c.timeRange.start+d/l),end:Math.floor(c.timeRange.start+(d+a)/l)})}}(n)})}function m(t){t.stopPropagation(),t.preventDefault(),d(t.clientX)}function v(t){1===t.targetTouches.length&&(t.stopPropagation(),t.preventDefault(),d(t.targetTouches[0].clientX))}function g(){e.isMove=!1,document.removeEventListener("mousemove",m),document.removeEventListener("touchmove",v),document.removeEventListener("mouseup",g),n.removeEventListener("touchend",g)}document.addEventListener("mousemove",m),document.addEventListener("touchmove",v,{passive:!1}),document.addEventListener("mouseup",g),n.addEventListener("touchend",g)}m(e.timeRange),e.onTimeRangeChange(function(t,e){return m(e)}),n.addEventListener("mousedown",function(t){t.stopPropagation(),t.preventDefault(),v(t.target,t.clientX)}),n.addEventListener("touchstart",function(t){1===t.targetTouches.length&&(t.stopPropagation(),t.preventDefault(),v(t.targetTouches[0].target,t.targetTouches[0].clientX))},{passive:!1})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(2),o=n(19),a=n(20),r=n(3),s=n(21),c=n(1),u=n(0),l=n(4),h=n(22),f=n(23),d=function(){function t(t,e){var n=this;this.url=e,this.visibility=[],this.isMove=!1,this.isBars=!1,this.isPercentage=!1,this.isSingleton=!1,this.styleWatchers=[],this.timeChangeWatchers=[],this.visibilityWatchers=[],this.destroyWatchers=[],this.use=function(t,e,i,o,a,r){n.adapter.use(n.jsonData,t,n.visibility,n.indexRange,n.timeRange,e,i,o,a,r)},this.useMin=function(t,e,i,o,a,r){n.adapter.use(n.jsonData,t,n.visibility,n.miniMap.indexRange,n.miniMap.timeRange,e,i,o,a,r)},this.isZoom=!1,this.yearDatas=null,this.zoomWatchers=[],this.zoomStartWatchers=[],this.singletonZoomWatchers=[],this.drawPieWatchers=[],this.drawPersentsWatchers=[],this.pieZoomWatchers=[],this.hoverWatchers=[],this.asSoonAsReady=p("./json/"+e+"/overview.json").then(function(e){return n.setDate(t,e)}).then(function(){return n})}return t.prototype.changeStyle=function(t){this.style="day"===t?f.dayStyle:f.nightStyle,this.styleWatchers.forEach(function(t){return t()})},t.prototype.onChangeStyle=function(t){this.styleWatchers.push(t)},t.prototype.setDate=function(t,e){var n=this;this.changeStyle("day"),this.jsonData=e;var h=e.columns[0];this.timeRange={start:h[Math.max(Math.round(.8*h.length),1)],end:h[h.length-1]},this.indexRange=l.toIndexRange(this.jsonData,this.timeRange),this.viewport={width:t,height:Math.round(t*(e.percentage?.7:.6))},this.miniMap={viewport:{width:t-10,height:46},indexRange:{start:1,end:h.length-1},timeRange:{start:h[1]-2*u.day,end:h[h.length-1]+2*u.day}},this.visibility=e.columns.map(function(){return!0}),this.isBars=("bar"===e.types[e.columns[1][0]]||e.stacked)&&!e.percentage,this.isPercentage=e.percentage,this.isSingleton=2===e.columns.length,e.y_scaled?(this.zIndex="-1",this.toFactory=function(t,e,n){return o.toChartItemsFactory(t,s.toPolylineItemOver,e,n)},this.adapter={use:c.recountAndUseSimplePintsChart,toMax:c.recountDoubleMax}):e.percentage?(this.zIndex="1",this.toFactory=function(t){return i.toScalableFactory(t,a.toAreaItemOver,u.toScales(n.visibility))},this.adapter={use:c.recountAndUsePercentChartOver(!0),toMax:function(){return[[100,0]]}}):e.stacked?(this.zIndex="1",this.toFactory=function(t){return i.toScalableFactory(t,r.toPoligonItemOver,u.toScales(n.visibility))},this.adapter={use:c.recountAndUseChartBySumm,toMax:c.recountMaxBySumm}):this.isSingleton?(this.zIndex="1",this.toFactory=function(t){return i.toScalableFactory(t,r.toPoligonItemOver,u.toScales(n.visibility))},this.adapter={use:c.recountAndUseSimplePintsChart,toMax:c.recountSimpleMax}):(this.zIndex="-1",this.toFactory=function(t,e,n){return o.toChartItemsFactory(t,s.toPolylineItemOver,e,n)},this.adapter={use:c.recountAndUseSimplePintsChart,toMax:c.recountSimpleMaxAndMin})},t.prototype.onTimeRangeChange=function(t){this.timeChangeWatchers.push(t)},t.prototype.setTimeRange=function(t,e){this.indexRange=l.toIndexRange(this.jsonData,e),this.timeRange=e,this.timeChangeWatchers.forEach(function(n){return n(t,e)})},t.prototype.uncheckOther=function(t){var e=this;this.visibility=this.visibility.map(function(e,n){return n===t}),this.visibilityWatchers.forEach(function(t){return t(e.visibility)})},t.prototype.toggleVisibility=function(t){var e=this;this.visibility[t]=!this.visibility[t],this.visibilityWatchers.forEach(function(t){return t(e.visibility)})},t.prototype.onVisibilityChange=function(t){this.visibilityWatchers.push(t)},t.prototype.onDestroy=function(t){this.destroyWatchers.push(t)},t.prototype.toMaxVisibleValue=function(t){return this.adapter.toMax(this.jsonData,this.visibility,t)},t.prototype.loadingData=function(t){return this.zoomedTime=t,this.isPercentage?Promise.resolve():this.asSoonAsLoading=p(function(t,e){var n=new Date(e);return"./json/"+t+"/"+n.getUTCFullYear()+"-"+("0"+(n.getMonth()+1)).slice(-2)+"/"+("0"+n.getDate()).slice(-2)+".json"}(this.url,t))},t.prototype.storeYearsDatas=function(){this.yearDatas={yearData:this.jsonData,indexRange:u.copyRange(this.indexRange),timeRange:u.copyRange(this.timeRange),miniMapIndexRange:u.copyRange(this.miniMap.indexRange),miniMapTimeRange:u.copyRange(this.miniMap.timeRange)}},t.prototype.unzoom=function(){if(this.isPercentage)return this.percentageUnZoom();this.isZoom=!1;var t=this.yearDatas,e=t.yearData,n=t.miniMapTimeRange,i=t.timeRange,o=t.indexRange,a=this.zommingTimesOver(i,n,16);this.isSingleton?(this.zoomStart(e,o,i,e.columns.map(function(){return!0})),this.singletonUnzooming(16,e,a)):(this.zoomStart(e,o,i,this.visibility),this.simpleUnzooming(e,this.jsonData,a))},t.prototype.singletonUnzooming=function(t,e,n){var o=this;g(t,v,function(a){if(n(),16===a)o.jsonData=e,o.indexRange=l.toIndexRange(o.jsonData,o.timeRange),o.miniMap.indexRange=l.toIndexRange(o.jsonData,o.miniMap.timeRange),o.visibility=e.columns.map(function(){return!0}),o.isBars=!0,o.toFactory=function(t){return i.toScalableFactory(t,r.toPoligonItemOver,u.toScales(o.visibility))},o.singletonZoomWatchers.forEach(function(t){return t(!1)});else if(o.indexRange=l.toIndexRange(o.jsonData,o.timeRange),o.miniMap.indexRange=l.toIndexRange(o.jsonData,o.miniMap.timeRange),o.zoomWatchers.forEach(function(e){return e(o.timeRange,(t-a)/10)}),1===a)return!0})},t.prototype.simpleUnzooming=function(t,e,n){var i=this,o=u.copyRange(this.miniMap.timeRange),a=h.mergeJsonForSimpleZoomOver(t,e,this.miniMap.timeRange,o);g(20,v,function(e){if(n(e>14?3:1),19===e&&(i.jsonData=a(3)),16===e&&(i.jsonData=a(6)),14===e&&(i.jsonData=a(12)),10===e&&(i.jsonData=t),i.indexRange=l.toIndexRange(i.jsonData,i.timeRange),i.miniMap.indexRange=l.toIndexRange(i.jsonData,i.miniMap.timeRange),i.zoomWatchers.forEach(function(t){return t(i.timeRange)}),1===e)return!0})},t.prototype.zommingTimesOver=function(t,e,n){var i=this,o=(t.start-this.timeRange.start)/n,a=(t.end-this.timeRange.end)/n,r=(e.start-this.miniMap.timeRange.start)/n,s=(e.end-this.miniMap.timeRange.end)/n;return function(t){void 0===t&&(t=1),i.timeRange.start+=o/t,i.timeRange.end+=a/t,i.miniMap.timeRange.start+=r/t,i.miniMap.timeRange.end+=s/t}},t.prototype.zoom=function(){var t=this;if(this.isPercentage)return this.percentageZoom();this.storeYearsDatas(),this.asSoonAsLoading.then(function(e){t.isZoom=!0;var n=e.columns[0],i={start:t.zoomedTime,end:t.zoomedTime+u.day},o=l.toIndexRange(e,i),a={start:n[1],end:n[n.length-1]},r=t.zommingTimesOver(i,a,16);t.isSingleton?(t.zoomStart(e,o,i,e.columns.map(function(){return!0})),t.singletonZoomin(e,r)):(t.zoomStart(e,o,i,t.visibility),t.simpleZooming(i,t.jsonData,e,r))})},t.prototype.singletonZoomin=function(t,e){var n=this;g(1,m,function(i){if(e(),n.indexRange=l.toIndexRange(n.jsonData,n.timeRange),n.miniMap.indexRange=l.toIndexRange(n.jsonData,n.miniMap.timeRange),n.zoomWatchers.forEach(function(t){return t(n.timeRange,(16-i)/10)}),16===i)return n.jsonData=t,n.visibility=t.columns.map(function(){return!0}),n.indexRange=l.toIndexRange(n.jsonData,n.timeRange),n.miniMap.indexRange=l.toIndexRange(n.jsonData,n.miniMap.timeRange),n.isBars=!1,n.toFactory=function(t,e,n){return o.toChartItemsFactory(t,s.toPolylineItemOver,e,n)},n.singletonZoomWatchers.forEach(function(t){return t(!0)}),!0})},t.prototype.simpleZooming=function(t,e,n,i){var o=this,a=h.mergeJsonForSimpleZoomOver(e,n,this.miniMap.timeRange,t);g(1,m,function(t){if(i(t>14?3:1),11===t&&(o.jsonData=a(12)),14===t&&(o.jsonData=a(6)),17===t&&(o.jsonData=a(3)),20===t&&(o.jsonData=n),o.indexRange=l.toIndexRange(o.jsonData,o.timeRange),o.miniMap.indexRange=l.toIndexRange(o.jsonData,o.miniMap.timeRange),o.zoomWatchers.forEach(function(t){return t(o.timeRange)}),20===t)return!0})},t.prototype.onZoom=function(t){this.zoomWatchers.push(t)},t.prototype.onZoomStart=function(t){this.zoomStartWatchers.push(t)},t.prototype.onSingletonZoom=function(t){this.singletonZoomWatchers.push(t)},t.prototype.zoomStart=function(t,e,n,i){this.zoomStartWatchers.forEach(function(o){return o(t,e,n,i)})},t.prototype.percentageZoom=function(){this.storeYearsDatas(),this.isZoom=!0;var t={start:this.zoomedTime,end:this.zoomedTime+u.day},e=l.toIndexRange(this.jsonData,t),n=this.jsonData.columns[0],i={start:Math.max(this.zoomedTime-3*u.day,n[1]),end:Math.min(this.zoomedTime+4*u.day,n[n.length-1])},o=c.recountPercent(this.jsonData,e.start,u.toScales(this.visibility));this.drawPieWatchers.forEach(function(t){return t(o,e)}),this.pieZoomingMiniMap(t,i)},t.prototype.pieZoomingMiniMap=function(t,e){var n=this,i=this.zommingTimesOver(t,e,16);g(1,m,function(t){if(i(),n.indexRange=l.toIndexRange(n.jsonData,n.timeRange),n.miniMap.indexRange=l.toIndexRange(n.jsonData,n.miniMap.timeRange),n.pieZoomWatchers.forEach(function(t){return t(n.timeRange)}),16===t)return!0})},t.prototype.onDrawPie=function(t){this.drawPieWatchers.push(t)},t.prototype.onDrawPersent=function(t){this.drawPersentsWatchers.push(t)},t.prototype.percentageUnZoom=function(){this.isZoom=!1;var t=c.recountPercent(this.jsonData,this.indexRange.start,u.toScales(this.visibility));this.drawPersentsWatchers.forEach(function(e){return e(t)}),this.pieZoomingMiniMap(this.yearDatas.timeRange,this.yearDatas.miniMapTimeRange)},t.prototype.onPieZoom=function(t){this.pieZoomWatchers.push(t)},t.prototype.hover=function(t,e,n,i,o){this.hoverWatchers.forEach(function(a){return a(t,e,n,i,o)})},t.prototype.onHover=function(t){this.hoverWatchers.push(t)},t}();function m(t){return t+1}function v(t){return t-1}function g(t,e,n){!function t(i){requestAnimationFrame(function(){n(i)||t(e(i))})}(t)}function p(t){return new Promise(function(e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==this.readyState&&200==this.status&&e(JSON.parse(this.responseText))},n.open("GET",t,!0),n.send()})}e.DataService=d},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toChartItemsFactory=function(t,e,n,i){for(var o=[],a=1;a<t.columns.length;a++){var r=t.columns[a][0];o.push(e(t.colors[r],n,i))}return{draw:function(t,e,n,i,a){o.forEach(function(n,o){n.drw(t,e,o+1,i(o+1)[1],i(o+1)[0],a)})},setVisible:function(t){for(var e=1;e<t.length;e++)o[e-1].set(t[e])},scale:function(t,e,n,i,a){o.forEach(function(n,o){n.sc(t,e,o+1,i(o+1)[1],i(o+1)[0],a)})},setRange:function(){},setHover:function(){}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.toAreaItemOver=function(t){return{drw:function(e,n,i,o,a,r,s){n.fillStyle=t,n.beginPath();var c=[];e(i,r,o,a,function(t,e,i,o){n.lineTo(t,e),c.push([i,o])},s);for(var u=c.length-1;u>=0;u--){var l=c[u],h=l[0],f=l[1];n.lineTo(h,f)}n.closePath(),n.fill()}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0);e.toPolylineItemOver=function(t,e,n){var o=1===n?"none":"in";function a(o,a,r,s,c,u){a.lineWidth=e*i.devicePixelRatio,a.globalAlpha=n,a.strokeStyle=t,a.beginPath(),o(r,u,s,c,function(t,e){return a.lineTo(t,e)}),a.stroke()}return{drw:a,set:function(t){o=t?"in":"out"},sc:function(t,e,i,r,s,c){"in"===o&&1===(n=Math.min(1,n+.1))&&(o="none"),"out"===o&&0===(n=Math.max(0,n-.1))&&(o="none"),0!==n&&a(t,e,i,r,s,c)}}}},function(t,e,n){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=n(4);e.mergeJsonForSimpleZoomOver=function(t,e,n,a){return function(r){var s=o.toIndexRange(t,n),c=s.start,u=s.end,l=t.columns.map(function(t){return t.slice(c,u)}),h=function(t,e){for(var n=1;t[n]<e.start;)n++;n=Math.max(n-2,1);for(var i=t.length-1;t[i]>e.end;)i--;return i=Math.min(i+3,t.length-1),{start:n,end:i}}(l[0],a);return i({},e,{columns:l.map(function(t,n){var i=e.columns[n],o=i[0],a=i.slice(1);if("x"===o){var s=a.reduce(function(t,e,n){return n%r==0&&t.push(e),t},[]);return[o].concat(t.slice(0,h.start),s,t.slice(h.end,t.length-1))}var c=function(t){return 12===t?2:6===t?4:8}(r);if(s=a.reduce(function(t,e,n){return n%r==0?t.push(e):t[t.length-1]+=e,t},[]),12===r){var u=t[h.start]/c;s=s.map(function(t){return t>u?t/1.5:1.5*t})}return[o].concat(t.slice(0,h.start).map(function(t){return t/c}),s,t.slice(h.end,t.length-1).map(function(t){return t/c}))})})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.dayStyle={text:"rgba(37, 37, 41, 0.5)",line:"rgba(24, 45, 59, 0.1)"},e.nightStyle={text:"rgba(163, 177, 194, 0.6)",line:"rgba(255, 255, 255, 0.1)"}},function(t,e,n){}]);